<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<meta name="author" content="Adam Miller, Maxim Svistunov, Marie Doleželová, et al.">
<title>RPM Paketleme Rehberi</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>RPM Paketleme Rehberi</h1>
<div class="details">
<span id="author" class="author">Adam Miller, Maxim Svistunov, Marie Doleželová, et al.</span><br>
<span id="revdate">Çeviri</span>
<br><span id="revremark">Emrecan Şuşter</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#tanitim">Tanıtım</a>
<ul class="sectlevel2">
<li><a href="#pdf-version">PDF Versiyonu</a></li>
<li><a href="#_doküman_anahtarları">Doküman Anahtarları</a></li>
</ul>
</li>
<li><a href="#on-kosullar">Ön Koşullar</a></li>
<li><a href="#Neden-Yazilimlari-RPM-ile-Paketlemeliyiz">Neden Yazılımları RPM ile Paketlemeliyiz?</a></li>
<li><a href="#merhaba-dunya">İlk RPM Paketiniz</a></li>
<li><a href="#yazilimi-paketlemeye-hazirlamak">Yazılımı Paketlemeye Hazırlamak</a>
<ul class="sectlevel2">
<li><a href="#kaynak-kodu-nedir">Kaynak kodu nedir?</a></li>
<li><a href="#programlar-nasil-yapilir">Programlar Nasıl Yapılır?</a>
<ul class="sectlevel3">
<li><a href="#yerel-derlenmis-kod">Yerel Olarak Derlenmiş Kod</a></li>
<li><a href="#yorumlanan-kod">Yorumlanan Kod</a></li>
</ul>
</li>
<li><a href="#yazilimi-kaynaktan-insa-etmek">Yazılımı Kaynaktan İnşa Etmek</a>
<ul class="sectlevel3">
<li><a href="#yerel-derlenen-kodu-kaynaktan-insa-etmek">Yerel Derlenen Kod</a></li>
<li><a href="#yorunlanan-kodu-kaynaktan-insa-etmek">Yorumlanan Kod</a></li>
</ul>
</li>
<li><a href="#yazilimi-yamalamak">Yazılımı Yamalamak</a></li>
<li><a href="#ihtiyari-yapilar-kurma">İhtiyari Yapılar Kurma</a>
<ul class="sectlevel3">
<li><a href="#install-komutu">Install komutunu kullanmak</a></li>
<li><a href="#make-install">Make Install komutunu kullanmak</a></li>
</ul>
</li>
<li><a href="#kodu-paketlemek-icin-hazirlamak">Kodu Paketlemek İçin Hazırlamak</a></li>
<li><a href="#tarballa-kaynak-kodu-eklemek">Tarball İçerisine Kaynak Kodu Eklemek</a>
<ul class="sectlevel3">
<li><a href="#belaba">belaba</a></li>
<li><a href="#pelaba">pelaba</a></li>
<li><a href="#celaba">celaba</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#yazilimi-paketlemek">Yazılımı Paketlemek</a>
<ul class="sectlevel2">
<li><a href="#rpm-paketleri">RPM Paketleri</a>
<ul class="sectlevel3">
<li><a href="#rpm-nedir">RPM Nedir?</a></li>
<li><a href="#rpm-paketleme-araclari">RPM Paketleme Araçları</a></li>
<li><a href="#rpm-paketlemesi-icin-calisma-alani">RPM Paketlemesi İçin Çalışma Alanı</a></li>
<li><a href="#spec-dosyasi-nedir">Spec Dosyası Nedir?</a></li>
<li><a href="#buildroot">BuildRoot</a></li>
<li><a href="#rpm-makrolari">RPM Makroları</a></li>
<li><a href="#spec-dosyalari-ile-calismak">SPEC Dosyaları İle Çalışmak</a></li>
</ul>
</li>
<li><a href="#rpm-insa-etmek">RPMleri İnşa Etmek</a>
<ul class="sectlevel3">
<li><a href="#kaynak-rpmler">Kaynak RPMler</a></li>
<li><a href="#ikili-rpmler">İkili RPMler</a></li>
</ul>
</li>
<li><a href="#checking-rpms-for-sanity">RPMlerin Geçerliliğini Denetleme</a>
<ul class="sectlevel3">
<li><a href="#belaba-spec-dosyasini-denetlemek">Belaba SPEC dosyasını Denetlemek</a></li>
<li><a href="#ikili-belaba-rpm-denetimi">Belaba&#8217;nın İkili RPM&#8217;ini Denetleme</a></li>
<li><a href="#pelaba-spec-dosyasini-denetlemek">Pelaba SPEC Dosyasını Denetlemek</a></li>
<li><a href="#pelaba-ikili-rpm-denetlemek">İkili Pelaba RPM&#8217;ini Denetlemek</a></li>
<li><a href="#celaba-spec-denetlemek">Celaba&#8217;nın SPEC Dosyasını Denetleme</a></li>
<li><a href="#celaba-ikili-rpm-denetlemek">Celaba İkili RPM&#8217;inin</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#ileri-duzey-konular">İleri Düzey Konular</a>
<ul class="sectlevel2">
<li><a href="#paketleri-imzalamak">Paketleri İmzalamak</a>
<ul class="sectlevel3">
<li><a href="#pakete-imza-eklemek">Pakete İmza Eklemek</a></li>
<li><a href="#paket-imzasini-degistirmek">Paket İmzasını Değiştirmek</a></li>
<li><a href="#insa-zamani-imzalamak">İnşa zamanı imzalamak</a></li>
</ul>
</li>
<li><a href="#mock">Mock</a></li>
<li><a href="#versiyon-kontrol-sistemleri">Versiyon Kontrol Sistemleri</a>
<ul class="sectlevel3">
<li><a href="#tito">tito</a></li>
<li><a href="#dist-git">dist-git</a></li>
</ul>
</li>
<li><a href="#makrolar-hakkinda-daha-fazlasi">Makrolar Hakkında Daha Fazlası</a>
<ul class="sectlevel3">
<li><a href="#kendinizinkini-tanimlayin">Kendi Makronuzu Tanımlayın</a></li>
<li><a href="#setup">%setup</a></li>
<li><a href="#files">%files</a></li>
<li><a href="#gomulu-makrolar">Gömülü Makrolar</a></li>
<li><a href="#rpm-dagitim-makrolari">RPM Dağıtım Makroları</a></li>
</ul>
</li>
<li><a href="#ozel-makrolar">Özel Makrolar</a></li>
<li><a href="#epoch-betikciler-ve-tetikciler">Epoch, Scriptlets, and Triggers</a>
<ul class="sectlevel3">
<li><a href="#donem">Dönem</a></li>
<li><a href="#tetikleyiciler-ve-betikciler">Betikçiler ve Tetikleyiciler</a></li>
</ul>
</li>
<li><a href="#rpmde-kosullu-ifadeler">RPM&#8217;de Koşullu İfadeler</a>
<ul class="sectlevel3">
<li><a href="#_koşullu_i̇fadelerin_sözdizimi">Koşullu İfadelerin Sözdizimi</a></li>
<li><a href="#_koşullu_i̇fadelerin_örnekleri">Koşullu İfadelerin Örnekleri:</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_rhel_7_ile_beraber_gelen_yeni_rpm_özellikleri">RHEL 7 ile Beraber Gelen Yeni RPM Özellikleri</a></li>
<li><a href="#_referanslar">Referanslar</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="tanitim">Tanıtım</h2>
<div class="sectionbody">
<div class="paragraph">
<p>RPM Paketleme açıklayıcı dokümanları:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Kaynak kodunu RPM paketlemek için hazırlamak.</dt>
<dd>
<p>Yazılım geliştirmek konusunda hiçbir fikriniz yoksa sizi şöyle alalım:
<a href="#yazilimi-paketlemeye-hazirlamak">Yazılımı Paketlemeye Hazırlamak</a>.</p>
</dd>
<dt class="hdlist1">Kaynak kodunu RPM olarak paketlemek.</dt>
<dd>
<p>Bu kısım paketlerini RPM olarak paketlemek isteyen yazılımcılar içindir. Buyrun:
<a href="#yazilimi-paketlemek">Yazılımı Paketlemek</a>.</p>
</dd>
<dt class="hdlist1">Gelişmiş paketleme senaryoları.</dt>
<dd>
<p>Bu kısım, RPM paketçilerinin karşısına çıkan
zorlu RPM paketleme senaryoları için bir kaynakçadır. <a href="#ileri-duzey-konular">İleri Düzey Konular</a> kısmını inceleyin.</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="pdf-version">PDF Versiyonu</h3>
<div class="paragraph">
<p>Dilerseniz şu adresten PDF versiyonunu inceleyebilirsiniz:
<a href="https://tarbetu.github.io/rpm_paketleme/rpm-packaging-guide.pdf" class="bare">https://tarbetu.github.io/rpm_paketleme/rpm-packaging-guide.pdf</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_doküman_anahtarları">Doküman Anahtarları</h3>
<div class="paragraph">
<p>Bu doküman anlatımı kolaylaştırmak üzere şöyle anahtarlar kullanır:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bloklar hâlindeki yerleştirilmiş kaynak kodlarını içeren, komut çıktısını ve içeriğini barındıran metin dosyaları:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ tree ~/rpmbuild/
/home/user/rpmbuild/
|-- BUILD
|-- RPMS

[komut çıktısı sadeleştirildi]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="txt">Name:           bello
Version:
Release:        1%{?dist}
Summary:

[komut çıktısı sadeleştirildi]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="comment">#!/usr/bin/env python</span>

print(<span class="string"><span class="delimiter">&quot;</span><span class="content">Merhaba Dünya</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
</li>
<li>
<p>Kendisine has anlamları olan konular veya başka bir sitedeki kaynakla ilişkili terimler <strong>kalınla</strong> ya da <em>eğik yazıyla</em> gösterilir.</p>
</li>
<li>
<p>Bazı yazılımlar, komutlar ve komut içerisinde bulunabilecek şeyler <code>eş aralıklı</code> fontlarla gösterilir.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="on-kosullar">Ön Koşullar</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Bu kılavuzu takip etmek için bazı paketlere ihtiyacınız olacak.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Bazı paketler varsayılan olarak şu sistemlerde kuruludur:
<a href="https://getfedora.org/">Fedora</a>, <a href="https://www.centos.org/">CentOS</a> ve
<a href="https://www.redhat.com/en/technologies/linux-platforms">RHEL</a>.
Bu paketler hangi araçların kullanıldığını açıkça göstermek için listelenmiştir.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Fedora, CentOS 8 ve RHEL 8 üzerinde:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ dnf install gcc rpm-build rpm-devel rpmlint make python bash coreutils diffutils patch rpmdevtools</code></pre>
</div>
</div>
<div class="paragraph">
<p>CentOS 7 ve RHEL 7 üzerinde:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ yum install gcc rpm-build rpm-devel rpmlint make python bash coreutils diffutils patch rpmdevtools</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Neden-Yazilimlari-RPM-ile-Paketlemeliyiz">Neden Yazılımları RPM ile Paketlemeliyiz?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>RPM Paket Yöneticisi (RPM), Red Hat Enterprise Linux, CentOS ve Fedora&#8217;da kullanılan bir paket yönetim sistemidir. RPM, bahsi edilen bu dağıtımlar üzerinde yazılımlarızı dağıtmaya, yönetmeye ve güncellemeye yardımcı olur. Pek çok yazılımcı bir gelenek olarak kendi yazılımlarını tarball olarak da bilinen arşiv dosyaları aracılığıyla dağıtır. Buna karşın, yazılımları RPM formatında paketlemenin pek çok faydası vardır. Bu faydalar, aşağıda şu şekilde anlatılmıştır.</p>
</div>
<div class="paragraph">
<p>RPM ile şunları yapabilirsiniz:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Paketleri kurma, yeniden kurma, kaldırma, güncelleme ve onaylama</dt>
<dd>
<p>Kullanıcılar, standart paket yönetim araçlarıyla (Yum veya PackageKit gibi) sizin RPM paketleriyle kurabilir, yeniden kurabilir, kaldırabilir ve onaylayabilir.</p>
</dd>
<dt class="hdlist1">Paketleri onaylamak ve sıralamak için kurulmuş paketlerin bir veritabanını kurma</dt>
<dd>
<p>RPM&#8217;in kurulmuş paketler ve onların dosyaları için sağladığı veritabanı sayesinde kullanıcılar, kendi sistemlerindeki paketlerini rahatlıkla sıralayabilir ve onaylayabilir.</p>
</dd>
<dt class="hdlist1">Paketlerinizi açıklamak, onların kurulum talimatlarını anlatmak ve buna benzer işler için üstverileri (metadata) kullanın</dt>
<dd>
<p>Her bir RPM paketi kendi paketinin öğeleri, versiyonu, yayın numarasını, büyüklüğünü, proje adresini ve kurulum talimatları gibi pek çok bilgiyi vermek için bir üstveri (metadata) içerir.</p>
</dd>
<dt class="hdlist1">Saf yazılım kaynakları aracılığıyla paketinizi kaynak ve ikili hâlde paketleyin</dt>
<dd>
<p>RPM, saf yazılım kaynağına erişmenize ve onları ikili ve kaynak paketler hâlinde kullanıcılarınıza iletmenize izin verir. Kaynak paketlerde saf kaynaklara üzerine uygulanmış kodlarla ve derleme talimatlarına erişebilirsiniz. Bu tasarım, yazılımların yeni sürümleri yayınlandıkça yeni sürümlerin yayınlanabilirliğini kolaylaştırır.</p>
</dd>
<dt class="hdlist1">Yum depolarına paketler ekleyin</dt>
<dd>
<p>Paketlerinizi alıcılarınızın kolaylıkla paketlerinizi bulup kurabileceği Yum depolarına ekleyebilirsiniz.</p>
</dd>
<dt class="hdlist1">Paketlerinizi dijital olarak imzalayın</dt>
<dd>
<p>GPG imza anahtarı aracılığıyla, paketlerinizi dijital olarak imzalayabilirsiniz. Böylece kullanıcılar paketlerinizin güvenilirliğini onaylayabilir.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="merhaba-dunya">İlk RPM Paketiniz</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Bir RPM paketi kurgulamak gayet karmaşık olabilir. Daha anlaşılır olması açısından burada sadeleştirilmiş ve bazı noktaları atlanmış bir RPM Spec dosyası hazırladık.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Name:       merhaba-dunya
Version:    1
Release:    1
Summary:    Epey sade bir RPM paketi
License:    FIXME

%description
Bu benim ilk RPM paketim. Süs bitkisi niyetine sisteminize kurabilirsiniz.

%prep
# bir kaynağımız yok, hâliyle buraya hiçbir şey eklemedik.
%build
cat &gt; merhaba-dünya.sh &lt;&lt;EOF
#!/usr/bin/bash
echo Merhaba dünya
EOF

%install
mkdir -p %{buildroot}/usr/bin/
install -m 755 merhana-dünya.sh %{buildroot}/usr/bin/merhaba-dünya.sh

%files
/usr/bin/merhaba-dünya.sh

%changelog
# Şimdilik boş verin gitsin</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bu dosyayı <code>merhaba-dunya.spec</code> ismiyle kaydedin.</p>
</div>
<div class="paragraph">
<p>Ardından, şu komutları kullanın:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpmdev-setuptree
$ rpmbuild -ba merhaba-dunya.spec</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>rpmdev-setuptree</code> isimli komut çeşitli çalışma dizinleri hazırlar.
Bu dizinler, ev dizininizde ($HOME) saklanacağı için bu komutun bir kere kullanılması yeterlidir.</p>
</div>
<div class="paragraph">
<p><code>rpmbuild</code> komutu ise rpm paketini hazırlar. Bu komutun çıktı şöyle bir şeye benzer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="txt">... [KESTİK!]
Wrote: /home/mirek/rpmbuild/SRPMS/merhaba-dunya-1-1.src.rpm
Wrote: /home/mirek/rpmbuild/RPMS/x86_64/merhaba-dunya-1-1.x86_64.rpm
Executing(%clean): /bin/sh -e /var/tmp/rpm-tmp.wgaJzv
+ umask 022
+ cd /home/mirek/rpmbuild/BUILD
+ /usr/bin/rm -rf /home/mirek/rpmbuild/BUILDROOT/merhaba-dunya-1-1.x86_64
+ exit 0</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>/home/mirek/rpmbuild/RPMS/x86_64/merhaba-dunya-1-1.x86_64.rpm</code> sizin ilk RPM paketinizdir.
Sisteminize kurabilir ve test edebilirsiniz.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="yazilimi-paketlemeye-hazirlamak">Yazılımı Paketlemeye Hazırlamak</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Bu bölüm bir RPM paketçisinin bilmesi gereken temel konular olan kaynak kodundan ve yazılım oluşturmaktan bahseder.</p>
</div>
<div class="sect2">
<h3 id="kaynak-kodu-nedir">Kaynak kodu nedir?</h3>
<div class="paragraph">
<p><strong>Kaynak kodu</strong> bir dosyanın bilgisayara nasıl derlenmesi gerektiğinin anlatıldığı ve insanlar tarafından okunabilen talimatlardır. Kaynak kodları, bir programlama dili aracılığıyla hazırlanır. Bkz:
<a href="https://tr.wikipedia.org/wiki/Programlama_dili">Programlama Dili</a></p>
</div>
<div class="paragraph">
<p>Bu klavuz farklı programlama dillerinde yazılmış <code>Merhaba Dünya</code> programının üç sürümünü ele alır. Farklı programlama dilleriyle yazılmış programlar farklı şekilde paketlenir ve bir RPM paketçisinin karşılaşacağı üç farklı durumu özetler.</p>
</div>
<div class="paragraph">
<p>Not: Yüzden fazla programlama dili vardır. Bu belge, yalnızca üç tanesini ele alır fakat kavramsal bir gözden geçirme için yeterlidir.</p>
</div>
<div class="paragraph">
<p><a href="https://www.gnu.org/software/bash/">Bash</a> ile yazılmış bir <code>Merhaba Dünya</code>:</p>
</div>
<div class="paragraph">
<p><code>belaba</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">#!/bin/bash

printf &quot;Merhaba Dünya\n&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://www.python.org/">Python</a> ile yazılmış bir <code>Merhaba Dünya</code>:</p>
</div>
<div class="paragraph">
<p><code>pelaba.py</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="comment">#!/usr/bin/env python</span>

print(<span class="string"><span class="delimiter">&quot;</span><span class="content">Merhaba Dünya</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://tr.wikipedia.org/wiki/C_(programlama_dili)">C</a>
ile yazılmış bir <code>Merhaba Dünya</code>:</p>
</div>
<div class="paragraph">
<p><code>celaba.c</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c"><span class="preprocessor">#include</span> <span class="include">&lt;stdio.h&gt;</span>

<span class="predefined-type">int</span> main(<span class="directive">void</span>) {
    printf(<span class="string"><span class="delimiter">&quot;</span><span class="content">Merhaba Dünya</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>);
    <span class="keyword">return</span> <span class="integer">0</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Yukarıdaki üç programın da amacı komut satırına "Merhaba Dünya" yazmaktır.</p>
</div>
<div class="paragraph">
<p>Not: Programlamayı bilmek yazılım paketlemek için gerekli değildir ama faydalıdır.</p>
</div>
</div>
<div class="sect2">
<h3 id="programlar-nasil-yapilir">Programlar Nasıl Yapılır?</h3>
<div class="paragraph">
<p>İnsan tarafından okunabilen kaynak kodunu bilgisayarın takip ettiği talimatları sunan makine koduna çevirmek için pek çok yöntem vardır. Bununla birlikte, bu yöntemler üç taneye indirgenebilir:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Program yerel olarak derlenebilir.</p>
</li>
<li>
<p>Program ham hâliyle yorumlanabilir.</p>
</li>
<li>
<p>Program bayt derleme ile yorumlanabilir.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="yerel-derlenmis-kod">Yerel Olarak Derlenmiş Kod</h4>
<div class="paragraph">
<p><strong>(Mimariye) Yerel derlenmiş</strong> yazılım, makine koduna dönüştürülen bir programlama dilinde yazılmış yazılımdır. Bu tarz yazılımlar tek başına, çalıştırılabilir ikili dosyalar olarak çalıştırılabilir.</p>
</div>
<div class="paragraph">
<p>Bu yolla derlenmiş RPM paketleri belirli bir
<a href="https://tr.wikipedia.org/wiki/Bilgisayar_organizasyonu">mimariye</a>
yöneliktir. Yani, sizin 64 bit (x86_64) mimarisine yönelik hazırladığınız yazılım 32 bit (x86) mimarisinde çalıştırılamaz. Yazılımların paketlerinin isimlerinde hangi mimariyi hedef aldığı belirtilir.</p>
</div>
</div>
<div class="sect3">
<h4 id="yorumlanan-kod">Yorumlanan Kod</h4>
<div class="paragraph">
<p><a href="https://www.gnu.org/software/bash/">bash</a> ve <a href="https://www.python.org/">Python</a> gibi bazı programlama dilleri doğrudan makine diline derlenmez. Bunun yerine, bu dillerin dillerde yazılan kaynak kodları herhangi bir ön dönüşüme tabii tutulmaksızın adım adım çalıştılır. Bu kodlar bir
<a href="https://tr.wikipedia.org/wiki/Yorumlayıcı">Dil Yorumlayıcısı</a>
tarafından veya Dil Sanal Makinesi tarafından işlenir.</p>
</div>
<div class="paragraph">
<p>Bu yazılımlar belirli bir
<a href="https://tr.wikipedia.org/wiki/Bilgisayar_organizasyonu">mimariye</a>
yönelik değildir. Dolayısıyla, bu yazılımların RPM paketlerinin isminde <code>noarch</code> ibaresi bulunur.</p>
</div>
<div class="paragraph">
<p>Yorumlanan bir dil ya <strong>bayt olarak derlenebilir</strong> ya da <strong>ham hâliyle yorumlanabilir</strong>. Bu iki farklı tipin inşa süreci ve paketleme yöntemi birbirinden farklıdır.</p>
</div>
<div class="sect4">
<h5 id="_ham_olarak_yorumlanan_programlar">Ham olarak yorumlanan programlar</h5>
<div class="paragraph">
<p>Ham hâliyle yorumlanan dillerin programlarının derlenmeye ihtiyacı yoktur, direkt yorumlanabilirler.</p>
</div>
</div>
<div class="sect4">
<h5 id="_bayt_derlenen_programlar">Bayt derlenen programlar</h5>
<div class="paragraph">
<p>Bayt derlenen dillerin bayt koduna derlenmeye ihtiyacı vardır. Bu programlar dil sanal makineleri tarafından çalıştırılırlar.</p>
</div>
<div class="paragraph">
<p>Not: Bazı diller ham olarak yorumlanmak veya bayt koduna derlenmek arasında bir seçenek sunar.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="yazilimi-kaynaktan-insa-etmek">Yazılımı Kaynaktan İnşa Etmek</h3>
<div class="paragraph">
<p>Bu kısım, kaynak kodundan bir yazılımı inşa etmeyi açıklar.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Derlenen dillerde yazılan yazılımlar, bir <strong>inşa</strong> sürecinden geçer ve makine kodu üretilir. Bu süreç, yaygın olarak <strong>derleme</strong> veyahut <strong>çeviri</strong> olarak isimlendirilir, programlama dilleri açısından farklılık gösterir. Derleme sonrasında program <strong>çalıştırılır</strong> veyahut <strong>yürütülür</strong> ve yazılımcının belirlediği görevleri yerine getirir. (Ç.N: Orijinal belgede <strong>run</strong> ve <strong>executed</strong> ifadelerini sırasıyla <strong>çalıştırma</strong> ve <strong>yürütme</strong> olarak çevirdim.)</p>
</li>
<li>
<p>Ham olarak yorumlanan dillerle yazılmış dillerde yazılım inşa edilmez, doğrudan çalıştırılır.</p>
</li>
<li>
<p>Bayt derlenerek yorumlanan dillerle yazılmış dillerde ise kaynak kodu bayt kodu olarak derlenir ve dil sanal makinesi tarafından çalıştırılır.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="yerel-derlenen-kodu-kaynaktan-insa-etmek">Yerel Derlenen Kod</h4>
<div class="paragraph">
<p>Bu örnekte
<a href="https://tr.wikipedia.org/wiki/C_(programlama_dili)">C</a>
ile yazılmış <code>celaba.c</code>dosyasını çalıştırılabilir bir dosyaya dönüştüreceksiniz.</p>
</div>
<div class="paragraph">
<p><code>celaba.c</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c"><span class="preprocessor">#include</span> <span class="include">&lt;stdio.h&gt;</span>

<span class="predefined-type">int</span> main(<span class="directive">void</span>) {
    printf(<span class="string"><span class="delimiter">&quot;</span><span class="content">Merhaba Dünya</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>);
    <span class="keyword">return</span> <span class="integer">0</span>;
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="elle-insa">Elle İnşa</h5>
<div class="paragraph">
<p><a href="https://tr.wikipedia.org/wiki/C_(programlama_dili)">C</a>
kaynak kodlarını derlemek için kullanılan "GNU Derleyici Koleksiyonu"nu (<a href="https://gcc.gnu.org/">GCC</a>) çalıştıracağız.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">gcc -g -o celaba celaba.c</code></pre>
</div>
</div>
<div class="paragraph">
<p>Çıktı olarak gelen <code>celaba</code> dosyasını çalıştırın.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ ./celaba
Merhaba Dünya</code></pre>
</div>
</div>
<div class="paragraph">
<p>İşte, hepsi bu. Yerel olarak derlenen bir yazılımı kaynak kodundan çalıştırıp derlemiş oldunuz.</p>
</div>
</div>
<div class="sect4">
<h5 id="_otomatik_i̇nşa">Otomatik İnşa</h5>
<div class="paragraph">
<p>Kaynak kodunu elle inşa etmek yerine inşa sürecini otomatikleştirebilirsiniz. Büyük ölçekli projeler için yaygın bir uygulamadır. Otomatik inşa, <code>Makefile</code> isimli bir dosya oluşturup <a href="http://www.gnu.org/software/make/">GNU <code>make</code></a> aracını çağırmakla gerçekleştirilebilir.</p>
</div>
<div class="paragraph">
<p>Otomatik bir inşa kurmak için, <code>celaba.c</code> ile aynı klasörde <code>Makefile</code> isimli bir dosya oluşturun:</p>
</div>
<div class="paragraph">
<p><code>Makefile</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="makefile">celaba:
        gcc -g -o celaba celaba.c

clean:
        rm celaba</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bu yazımlımı inşa etmek için, yalnızca <code>make</code> komutunu çalıştırın:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ make
make: 'celaba' is up to date.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Daha önceden yapılmış bir inşayı temizlemek için <code>make clean</code> komutunu çalıştırın, ardından tekrar <code>make</code> komutunu çalıştırın:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ make clean
rm celaba

$ make
gcc -g -o celaba celaba.c</code></pre>
</div>
</div>
<div class="paragraph">
<p>Yine, hiçbir şey olmayacağını bile bile tekrar bir inşaya teşebbüs edelim:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ make
make: 'celaba' is up to date.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Güzel, programı çalıştırabiliriz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ ./celaba
Merhaba Dünya</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hem elle, hem de otomatik olarak bir programı derlemiş bulunmaktasınız.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="yorunlanan-kodu-kaynaktan-insa-etmek">Yorumlanan Kod</h4>
<div class="paragraph">
<p>İnceleyeceğimiz iki örnekten birisi <a href="https://www.python.org/">Python</a> ile yazılmış bayt olarak derlenen bir program, diğeri ise <a href="https://www.gnu.org/software/bash/">Bash</a> ile yazılmış ve ham olarak yorumlanan başka bir program.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>İki örnekte de göreceğiniz, dosyanın başındaki <code>#!</code> satırı programlama dilinin bir parçası değildir ve
<a href="https://en.wikipedia.org/wiki/Shebang_%28Unix%29">mevzu (shebang)</a>
olarak anılır. (Bağlantı İngilizcedir.)</p>
</div>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/Shebang_%28Unix%29">Mevzular</a>
bir yazı dosyasının çalıştırılabilir bir dosya olarak ele alınmasına izin verir. Sistemin program yükleyicisi bu satırı özellikle arar ve bu satır üzerinde bulunan ikili programla çalıştırır. Bu sonra ilgili programlama dilinin yorumlayıcısı olarak kullanılır.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="bayt-derlenen-kod">Bayt Derlenen Kod</h5>
<div class="paragraph">
<p>Bu örnekte, Python ile yazılmış <code>pelaba.py</code> isimli programı bayt koduna dönüştüreceğiz, bu bayt kodu Python sanal makinesi tarafından derlenecek. Python kodları istenirse ham yorumlanabilir ancak bayt derlenen sürümü daha hızlıdır. Dolayıcıyla, RPM paketçileri son kullanıcıya paketleri dağıtırken bayt derlenen sürümünü tercih eder.</p>
</div>
<div class="paragraph">
<p><code>pello.py</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="comment">#!/usr/bin/env python</span>

print(<span class="string"><span class="delimiter">&quot;</span><span class="content">Merhaba Dünya</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bayt derlenen programlar için prosedür dilden dile değişir. Bu yöntem dil üzerine kuruludur, dilin sanal makinesini gerektirir ve kullanılan araçlar/süreçler dile aittir.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<a href="https://www.python.org/">Python</a> çoğunlukla bayt olarak derlenir, ancak bu bahsettiğimiz şekilde değil. Bahsi geçen yöntem topluluk standarlarına uyumlu olmayı değil sade olmayı gerektirir. Gerçek dünyada kullanılan Python rehberleri için şu bağlantıya bakabilirsiniz:
<a href="https://docs.python.org/2/library/distribution.html">Software Packaging and
Distribution (İngilizce)</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Bayt derlenen <code>pelaba.py</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ python -m compileall pello.py

$ file pello.pyc
pello.pyc: python 2.7 byte-compiled</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>pello.pyc</code> bayt kodunu çalıştırın:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ python pello.pyc
Hello World</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ham-yorumlanan">Ham Hâlde Yorumlanan Kod</h5>
<div class="paragraph">
<p>(Ç.N; Ham olarak yorumlanan kod (raw interpreted) hiçbir işleme tabii tutulmadan yazıldığı gibi yorumlanan kod demektir.)</p>
</div>
<div class="paragraph">
<p>Bu örneğimizde ise <a href="https://www.gnu.org/software/bash/">bash</a> ile ham yorumlanan <code>belaba</code> programımızı inceleyeceğiz.</p>
</div>
<div class="paragraph">
<p><code>belaba</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">#!/bin/bash

printf &quot;Merhaba Dünya\n&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Bash</em> gibi kabuk betik dilleriyle yazılmış programlar ham yorumlanır. Hâliyle sadece dosyayı kaynak kodundan çalıştırılabilir yapmanız ve çalıştırmanız gerekmektedir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ chmod +x belaba
$ ./belaba
Merhaba Dünya</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="yazilimi-yamalamak">Yazılımı Yamalamak</h3>
<div class="paragraph">
<p><strong>Yama</strong>, başka bir kaynak kodunu güncelleyen bir kaynak kodudur. "<em>diff</em>" şeklinde formatlanmıştır zira bu format iki farklı versiyon arasındaki farkı gösterir. "<em>diff</em>" formatı, <code>diff</code> isimli bir araç kullanılarak oluşturulur ki daha sonra <a href="http://savannah.gnu.org/projects/patch/">patch</a> isimli bir araç kullanılarak kaynak koduna uygulanır.</p>
</div>
<div class="paragraph">
<p>Not: Yazılım geliştiricileri kendi kodlarını kontrol etmek için çoğunlukla <a href="https://git-scm.com/">git</a> gibi Versiyon Kontrol Sistemlerini kullanır. Bu tür araçların <em>diff</em> yaratmak ve yamaları uygulamak için kendi yöntemleri vardır.</p>
</div>
<div class="paragraph">
<p>Aşağıdaki örnekte, orijinal kaynak kodundan <code>diff</code> kullanarak yeni bir yama oluşturuyoruz ve <code>patch</code> kullanarak uyguluyoruz. Yamalamadan, daha sonraları <a href="#spec-dosyalari-ile-calismak">SPEC Dosyaları İle Çalışmak</a> kısmında yararlanacağız.</p>
</div>
<div class="paragraph">
<p>Peki yamalamanın RPM paketlemekle ne alakası var? Paketlerken, orijinal kaynak kodunu olduğu değiştirmek yerine onu koruyup üzerine yama uygulamayı tercih ederiz.</p>
</div>
<div class="paragraph">
<p><code>celaba.c</code> için bir yama hazırlayalım:</p>
</div>
<div class="paragraph">
<p>Esas kaynak kodunu koruyalım:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ cp celaba.c celaba.c.orig</code></pre>
</div>
</div>
<div class="paragraph">
<p>+
Bu, orijinal kaynak kodunu muhafaza etmek için yaygın bir yöntemdir.</p>
</div>
<div class="paragraph">
<p>+
. <code>celaba.c</code>'yi değiştirelim:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c"><span class="preprocessor">#include</span> <span class="include">&lt;stdio.h&gt;</span>

<span class="predefined-type">int</span> main(<span class="directive">void</span>) {
    printf(<span class="string"><span class="delimiter">&quot;</span><span class="content">Yeni yamamdan selam dünya!</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>);
    <span class="keyword">return</span> <span class="integer">0</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>+
<code>diff</code> aracını kullanarak bir yama oluşturalım:</p>
</div>
<div class="paragraph">
<p>+
. Not: <code>diff</code> aracını kullanırken birden fazla argüman kullandık. Bu argümanlar hakkında bilgi almak için, <code>diff</code> ile ilgili belgeleri araştırınız.</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="diff"><span class="line comment">$ diff -Naur celaba.c.orig celaba.c</span>
<span class="line head"><span class="head">--- </span><span class="filename">cello.c.orig        2016-05-26 17:21:30.478523360 -0500</span></span>
<span class="line head"><span class="head">+++ </span><span class="filename">cello.c     2016-05-27 14:53:20.668588245 -0500</span></span>
<span class="line change"><span class="change">@@</span> -1,6 +1,6 <span class="change">@@</span></span>
 #include&lt;stdio.h&gt;

 int main(void){
<span class="line delete"><span class="delete">-</span>    printf(&quot;Hello World!\n&quot;);</span>
<span class="line insert"><span class="insert">+</span>    printf(&quot;Hello World<span class="eyecatcher"> from my very first patch</span>!\n&quot;);</span>
     return 0;
 }</code></pre>
</div>
</div>
<div class="paragraph">
<p>+
. <code>-</code> ile başlayan satırlar, orijinal kaynak kodundan çıkarılmış kodlardır. <code>+</code> ile yer alan kodlar ise çıkarılan kodların yerine geçer.</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Yamayı bir dosyaya kaydedelim:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ diff -Naur celaba.c.orig celaba.c &gt; celaba-ciktisi-ilk-yama.patch</code></pre>
</div>
</div>
</li>
<li>
<p>Orijinal <code>celaba.c</code> dosyasını geri getirelim:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ cp celaba.c.orig celaba.c</code></pre>
</div>
</div>
<div class="paragraph">
<p>Esas <code>celaba.c</code> dosyasını geri getirdik. Bunun nedeni, bir RPM paketi inşa edileceği zaman düzenlenmiş dosya yerine esas dosyanın kullanılmasıdır. Daha fazla bilgi için: <a href="#spec-dosyalari-ile-calismak">SPEC Dosyaları İle Çalışmak</a></p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>celaba.c</code> dosyasını, <code>celaba-ciktisi-ilk-yama.patch</code> dosyasını kullanarak, yamalanmış dosyayı <code>patch</code> komutuna yönlendirin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ patch &lt; celaba-ciktisi-ilk-yama.patch
patching file celaba.c</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>celaba.c</code> dosyasının içeriği, gördüğünüz üzere yamayla değişti:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ cat celaba.c
#include&lt;stdio.h&gt;

int main(void){
    printf(&quot;Yeni yamamdan selam dünya!\n&quot;);
    return 0;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Yamalanmış <code>celaba.c</code> dosyasını derleyip çalıştıralım:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ make clean
rm celaba

$ make
gcc -g -o celaba celaba.c

$ ./celaba
Yeni yamamdan selam dünya!</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tebrikler! Bir yama oluşturdunuz, sonra programı yamaladınız, yamalı programı derlediniz ve çalıştırmış oldunuz!</p>
</div>
</div>
<div class="sect2">
<h3 id="ihtiyari-yapilar-kurma">İhtiyari Yapılar Kurma</h3>
<div class="paragraph">
<p><a href="https://tr.wikipedia.org/wiki/Linux">Linux</a>
ve Unix benzeri işletim sistemlerinin büyük bir avantajı
<a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard">Dosya Sistemi Hiyerarşisi Standartlarıdır</a>
ifdef::rhel[Dosya Sistemi Hiyerarşisi Standartlarıdır]. Bu standartlar, hangi dizinde hangi dosyanın depolanacağını belirtir. RPM paketlerinden kurulan dosyalar ise Dosya Sistemi Hiyerarşisine uygun olmalıdır. Örneğin, çalıştırılabilir bir dosya
<a href="https://en.wikipedia.org/wiki/PATH_%28variable%29">PATH</a>
değişkeninde belirtilen bir dizin altında tutulmalıdır.</p>
</div>
<div class="paragraph">
<p>Bu belgenin bağlamında, bir <em>İhtiyari Yapı</em> RPM aracılığıyla sisteme kurulan herhangi bir şeydir. Bu RPM ve sistem için bir betik, paketin içerdiği kaynak kodundan derlenen ikili bir dosya, önceden derlenmiş ikili bir dosya veya başka bir dosya olabilir.</p>
</div>
<div class="paragraph">
<p>Burada, sisteme <em>İhtiyari Yapıları</em> yerleştirmenin iki popüler yolunu keşfedeceğiz: <code>install</code> veya <code>make install</code> kullanmak.</p>
</div>
<div class="sect3">
<h4 id="install-komutu">Install komutunu kullanmak</h4>
<div class="paragraph">
<p>Program çok basit olduğunda ve fazladan ek yüke ihtiyaç duymadığında, <a href="http://www.gnu.org/software/make/">GNU make</a> gibi bir otomatik derleme aracı kullanmak pek mantıklı olmayabilir. Bu ve bunun gibi durumlarda paketçiler çoğunlukla <a href="http://www.gnu.org/software/coreutils/coreutils.html">coreutils</a> tarafından sunulan <code>install</code> komutunu tercih ederler. Bu komut sözünü ettiğimiz yapıları dosya sisteminde belirli bir dizine, belirli izinlerle yerleştirir.</p>
</div>
<div class="paragraph">
<p>Aşağıdaki örnekte daha önce hazırladığımız <code>belaba</code> dosyasını ihtiyari yapı olarak sistemimize kuracağız. Yalnız dikkat etmeniz gereken bir şey, bu kurulum için <a href="http://www.sudo.ws/">sudo</a> veya root yetkilerine sahip olmanız gerektiğidir.</p>
</div>
<div class="paragraph">
<p>Aşağıdaki örnekte, <code>belaba</code> dosyasını <code>/usr/bin</code> içerisine <code>install</code> komutuyla yerleştireceğiz, elbette ki çalıştırmak için gerekli izinlerle beraber:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ sudo install -m 0755 belaba /usr/bin/belaba</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>belaba</code> isimli dosyamız
<a href="https://en.wikipedia.org/wiki/PATH_%28variable%29">$PATH</a>
değişkeninde listelenmiş bir dizinde bulunmakta. Artık herhangi bir dizinde, <code>belaba</code> dosyasını bütün konumu belirtmeden çalıştırabilirsiniz.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ cd ~

$ belaba
Merhaba Dünya!</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="make-install">Make Install komutunu kullanmak</h4>
<div class="paragraph">
<p>Bir yazılımı otomatikleştirilmiş şekilde kurmak için <code>make install</code> komutunu kullanmak popüler bir yöntemdir. Bu yöntem, <code>Makefile</code> içerisinde ihtiyari yapıların sisteme nasıl kurulacağını belirtmenizi gerektirir.</p>
</div>
<div class="paragraph">
<p>Not:  <code>Makefile</code> çoğunlukla paketçi tarafından değil geliştirici tarafından hazırlanır.</p>
</div>
<div class="paragraph">
<p><code>Makefile</code> içerisine <code>install</code> kısmını ekleyin:</p>
</div>
<div class="paragraph">
<p><code>Makefile</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="makefile">cello:
        gcc -g -o celaba celaba.c

clean:
        rm cello

install:
        mkdir -p $(DESTDIR)/usr/bin
        install -m 0755 celaba $(DESTDIR)/usr/bin/celaba</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://www.gnu.org/software/make/manual/html_node/DESTDIR.html">$(DESTDIR)</a> değişkeni <a href="http://www.gnu.org/software/make/">GNU make</a> içerisine yerleştirilmiş bir değişkendir ve çoğunlukla kurulum dizininin kök dizin dışında neresi olması gerektiğini belirtir.</p>
</div>
<div class="paragraph">
<p>Artık, <code>Makefile</code> dosyasını yalnızca dosyayı derlemek için değil, hedef sisteme kurmak için de kullanabilirsiniz.</p>
</div>
<div class="paragraph">
<p><code>celaba.c</code>'yi derleyip kurmak için:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ make
gcc -g -o celaba celaba.c

$ sudo make install
install -m 0755 celaba /usr/bin/celaba</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>celaba</code> programını
<a href="https://en.wikipedia.org/wiki/PATH_%28variable%29">$PATH</a>
değişkeni içerisinde tanımlanmış dizinlerden birisine eklemiş oldunuz. Artık, <code>celaba</code>'yı tam konumunu belirtmeden dilediğiniz gibi çalıştırabilirsiniz.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ cd ~

$ celaba
Merhaba Dünya!</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sisteminize inşa edilmiş bir yapıyı, belirtilmiş bir konuma kurmuş bulunmaktasınız.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="kodu-paketlemek-icin-hazirlamak">Kodu Paketlemek İçin Hazırlamak</h3>
<div class="paragraph">
<p>Not: Bu bölümde hazırladığımız kodları <a href="https://github.com/Tarbetu/rpm-paketleme-rehberi/tree/master/örnek-kod">burada</a> bulabilirsiniz.</p>
</div>
<div class="paragraph">
<p>Geliştiriciler yazılımlarını çoğunlukla sıkıştırılmış arşivler içerisinde dağıtırlar ki bunlar paketleme için kullanılırlar. Bu bölümde sıkıştırılmış arşivler hazırlayacaksınız.</p>
</div>
<div class="paragraph">
<p>Not: Kaynak kodu arşivleme işi çoğunlukla RPM paketçisinin görevi değildir, geliştirici tarafından yapılır. Paketçi, hazır kaynak kodu arşivleriyle çalışır.</p>
</div>
<div class="paragraph">
<p>Yazılımlar
<a href="https://tr.wikipedia.org/wiki/Yazılım_lisansı">yazılım lisansı</a>
ifdef::rhel[yazılım lisansı] aracılığıyla lisanslanmalıdır. Biz örnek olarak <a href="https://www.gnu.org/licenses/quick-guide-gplv3.html">GPLv3</a> lisansını ele alacağız. Lisans metnini örnek programlarımızın <code>LICENCE</code> dosyasında sunacağız. Bir RPM paketçisi, paketlerken lisans dosyaları ile ilgilenmelidir.</p>
</div>
<div class="paragraph">
<p>Aşağıdaki örnekte bir lisans dosyası oluşturduk:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ cat /tmp/LICENSE
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tarballa-kaynak-kodu-eklemek">Tarball İçerisine Kaynak Kodu Eklemek</h3>
<div class="paragraph">
<p>Ç.N: <code>Tarball</code>, kaynak kodlarını içinde bulunduran ve uzantısında "tar" bulunan (Örn: .tar.gz)  arşiv dosyalarına verilen isim. Literatürde bu şekilde yer alır.
Mot a mot çevirisi de "Tartopu" gibi anlamsız bir şeye tekabül ettiği için<code>tarball</code> kelimesini kabul ediyorum. Eğer <code>tarball</code> yerine geçecek iyi bir fikriniz varsa muhakkak bana bildirin.</p>
</div>
<div class="paragraph">
<p>Aşağıdaki örneklerde bulunan üç adet <code>Merhaba Dünya</code> programının her birini <a href="https://www.gnu.org/software/gzip/">gzip</a> ile sıkıştırılmış tarballlara ekliyoruz. Yazılımlar çoğunlukla paketlenmeden önce bu şekilde yayınlanırlar.</p>
</div>
<div class="sect3">
<h4 id="belaba">belaba</h4>
<div class="paragraph">
<p><em>belaba</em> yazılımı, <a href="https://www.gnu.org/software/bash/">bash</a> ile <code>Merhaba Dünya</code> yazmamızı sağlıyor. Bu yazılım kendi içerisinde yalnızca <code>belaba</code> kabuk betiğini içeriyor ve oluşturacağımız <code>.tar.gz</code> arşivinde <code>LICENCE</code> dışında yalnızca bu betik var. Bu yazılımın sürüm numarasını <code>0.1</code> olarak düşünebiliriz.</p>
</div>
<div class="paragraph">
<p><em>belaba</em> yazılımını dağıtıma hazırlayalım:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Dosyaları bir dizine yerleştirin:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ mkdir /tmp/belaba-0.1

$ mv ~/bello /tmp/belaba-0.1/

$ cp /tmp/LICENSE /tmp/belaba-0.1/</code></pre>
</div>
</div>
</li>
<li>
<p>Arşiv dosyasını oluşturun ve <code>~/rpmbuild/SOURCES/</code> altına taşıyın:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ cd /tmp/

$ tar -cvzf belaba-0.1.tar.gz belaba-0.1
bello-0.1/
bello-0.1/LICENSE
bello-0.1/belaba

$ mv /tmp/belaba-0.1.tar.gz ~/rpmbuild/SOURCES/</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="pelaba">pelaba</h4>
<div class="paragraph">
<p><em>pelaba</em> yazılımı, <a href="https://www.python.org/">Python</a> ile <code>Merhaba Dünya</code> yazmamızı sağlıyor. Bu yazılım kendi içerisinde yalnızca <code>pelaba</code> betiğini içeriyor ve oluşturacağımız <code>.tar.gz</code> arşivinde <code>LICENCE</code> dışında yalnızca bu betik var. Bu yazılımın sürüm numarasını <code>0.1.1</code> olarak düşünebiliriz.</p>
</div>
<div class="paragraph">
<p><em>pelaba</em> yazılımını dağıtıma hazırlayalım:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Dosyaları bir dizine yerleştirin:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ mkdir /tmp/pello-0.1.1

$ mv ~/pello.py /tmp/pello-0.1.1/

$ cp /tmp/LICENSE /tmp/pello-0.1.1/</code></pre>
</div>
</div>
</li>
<li>
<p>Arşiv dosyasını oluşturun ve <code>~/rpmbuild/SOURCES/</code> altına taşıyın:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ cd /tmp/

$ tar -cvzf pello-0.1.1.tar.gz pello-0.1.1
pello-0.1.1/
pello-0.1.1/LICENSE
pello-0.1.1/pello.py

$ mv /tmp/pello-0.1.1.tar.gz ~/rpmbuild/SOURCES/</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="celaba">celaba</h4>
<div class="paragraph">
<p><em>celaba</em> yazılımı,
<a href="https://tr.wikipedia.org/wiki/C_(programlama_dili)">C</a>
ile <code>Merhaba Dünya</code> yazmamızı sağlıyor. Bu yazılım kendi içerisinde yalnızca <code>celaba.c</code>'yi ve <code>Makefile</code> dosyasını içeriyor ve oluşturacağımız <code>.tar.gz</code> arşivinde <code>LICENCE</code> dışında yalnızca iki dosya olacak. Bu yazılımın sürüm numarasını <code>1.0</code> olarak düşünebiliriz.</p>
</div>
<div class="paragraph">
<p><code>patch</code> dosyasını arşiv ile beraber dağıtıma çıkartmadığımıza dikkat edin. RPM Paketleyicisi yamayı RPM derlenirken uygular. Yama, <code>.tar.gz</code> dosyası ile beraber <code>~/rpmbuild/SOURCES/</code> dizinine yerleştirilecek.</p>
</div>
<div class="paragraph">
<p><em>celaba</em> yazılımını dağıtıma hazırlayalım:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Dosyaları bir dizine yerleştirin:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ mkdir /tmp/cello-1.0

$ mv ~/cello.c /tmp/cello-1.0/

$ mv ~/Makefile /tmp/cello-1.0/

$ cp /tmp/LICENSE /tmp/cello-1.0/</code></pre>
</div>
</div>
</li>
<li>
<p>Arşiv dosyasını oluşturun ve <code>~/rpmbuild/SOURCES/</code> altına taşıyın:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ cd /tmp/

$ tar -cvzf cello-1.0.tar.gz cello-1.0
cello-1.0/
cello-1.0/Makefile
cello-1.0/cello.c
cello-1.0/LICENSE

$ mv /tmp/cello-1.0.tar.gz ~/rpmbuild/SOURCES/</code></pre>
</div>
</div>
</li>
<li>
<p>Yamayı uygulayın</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ mv ~/cello-output-first-patch.patch ~/rpmbuild/SOURCES/</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Ve kaynak kodlarınız RPM&#8217;e paketlenmek üzere hazır!</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="yazilimi-paketlemek">Yazılımı Paketlemek</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Bu kaynakça, Red Hat bağlantılı dağıtımlar için paketlemeyi öncelikle ele alır. Bu dağıtımlar aşağıda listelenmiştir:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://getfedora.org/">Fedora</a></p>
</li>
<li>
<p><a href="https://www.centos.org/">CentOS</a></p>
</li>
<li>
<p><a href="https://www.redhat.com/en/technologies/linux-platforms">Red Hat Enterprise Linux</a> (<a href="https://www.redhat.com/en/technologies/linux-platforms">RHEL</a>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Bu dağıtımlar, <a href="http://rpm.org/">RPM</a> paketleme usulünü kullanır.</p>
</div>
<div class="paragraph">
<p>Yine de, yazıda çoğunlukla bahsi geçen sistemler hedef alınsa da bu rehber çoğu <a href="https://en.wikipedia.org/wiki/List_of_Linux_distributions#RPM-based">RPM temelli</a> dağıtıma uygulanabilir. Ancak dağıtımların kendisine özgü rehberleri, makroları ve önhazırlık maddeleri incelenmelidir.</p>
</div>
<div class="paragraph">
<p>Bu rehber, okuyucunun Linux veya başka bir işletim sistemiyle ilgili herhangi bir altyapısı olmadığını varsayar.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Eğer yazılım paketleme ve Linux dağıtımları hakkında hiçbir fikriniz yoksa öncelikle <a href="https://tr.wikipedia.org/wiki/Linux">Linux</a> ve <a href="https://tr.wikipedia.org/wiki/Paket_yönetim_sistemi">Paket Yöneticileri</a> hakkında bir ön araştırma yapmayı düşünebilirsiniz.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="rpm-paketleri">RPM Paketleri</h3>
<div class="paragraph">
<p>Bu bölüm, RPM hakkında basit bilgileri içerir. Eğer daha ileri düzey bilgiler görmek isterseniz <a href="#gelismis-konular">[gelismis-konular]</a> başlığını inceleyebilirsiniz.</p>
</div>
<div class="sect3">
<h4 id="rpm-nedir">RPM Nedir?</h4>
<div class="paragraph">
<p>Bir RPM paketi, basitçe sistem tarafından gereken bilgileri ve dosyaları içeren bir dosyadır. Detaya inersek, bir RPM paketi
<a href="https://en.wikipedia.org/wiki/Cpio">cpio</a>
ismi verilen bir arşiv türüdür. <code>RPM</code> paket yöneticisi üstveri aracılığıyla bağımlılıkları saptar, nereye kurulması gerektiğini anlar ve diğer bilgileri ele alır.</p>
</div>
<div class="paragraph">
<p>İki tip RPM paketleri vardır:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Kaynak RPM (SRPM, Source RPM&#8217;in kısaltmasıdır)</p>
</li>
<li>
<p>İkili RPM</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Kaynak ve ikili RPMler aynı dosya biçimini ve araçlarını kullanırlar ancak farklı içeriklere ve amaçlara sahiptirler. SRPM, kaynak kodunu ve isteğe bağlı olarak yamalarını ve SPEC dosyasını içerir ki SPEC, kaynak kodunun nasıl ikili RPM&#8217;e çevirilmesi gerektiğini içerir. İkili RPM ise kaynak kodunun ve yamalarının derlenmiş hâlidir.</p>
</div>
</div>
<div class="sect3">
<h4 id="rpm-paketleme-araclari">RPM Paketleme Araçları</h4>
<div class="paragraph">
<p><a href="#on-kosullar">Ön Koşullar</a>'da belirtilmiş <code>rpmdevtools</code> paketi pek RPM paketlemek için pek çok aracı içerir. Araçları listemek için şu komutu çalıştırın:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpm -ql rpmdevtools | grep bin</code></pre>
</div>
</div>
<div class="paragraph">
<p>Araçlar hakkında bilgi edinmek için kullanım talimatlarını veya yardım yazılarını inceleyebilirsiniz.</p>
</div>
</div>
<div class="sect3">
<h4 id="rpm-paketlemesi-icin-calisma-alani">RPM Paketlemesi İçin Çalışma Alanı</h4>
<div class="paragraph">
<p>RPM için çalışma alanı oluşturacak bir dizin hazırlamak istiyorsanız <code>rpmdev-setuptree</code> aracını kullanın.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpmdev-setuptree

$ tree ~/rpmbuild/
/home/user/rpmbuild/
|-- BUILD
|-- RPMS
|-- SOURCES
|-- SPECS
`-- SRPMS

5 directories, 0 files</code></pre>
</div>
</div>
<div class="paragraph">
<p>Oluşturulan dizinler şu amaçlara hizmet eder:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dizin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amaç</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BUILD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bir paket inşa edildiği zaman gereken <code>%buildroot</code> dizinleri burada oluşturulur. Bu dizinleri incelemek, hata kayıtlarının yetersiz kaldığı zamanlar nerede hata çıktığını anlamaya yardımcı olur.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RPMS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">İkili RPMler mimarilere göre ayrılmış altdizinlere göre burada oluşturulur. Bunlar <code>x86_64</code> veya <code>noarch</code> olabilir.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SOURCES</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Burada paketçinin sıkıştırılmış kaynak kodu arşivleri ve yamaları bulunur. <code>rpmbuild</code> komutu burayı arar.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SPECS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paketçi SPEC dosyalarını buraya yerleştirir.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SRPMS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eğer <code>rpmbuild</code> paketi ikili RPM üretmek yerine SRPM inşa etmek için kullanılırsa, SRPMler burada oluşturulur.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="spec-dosyasi-nedir">Spec Dosyası Nedir?</h4>
<div class="paragraph">
<p>Eğer RPM paketlerini yemeğe benzetirsek SPEC dosyasını, <code>rpmbuild</code> aracını RPM pişirmek için baz alınan yemek tarifi olarak düşünebiliriz. SPEC dosyası, inşa ortamına neler yapması gerektiğini çeşitli parçalar hâlinde bildirir. Bu parçalar, <em>Önsöz</em> (<em>Preamble</em>) ve <em>Gövde</em> (<em>Body</em>) olarak ikiye ayrılabilir. <em>Gövde</em> kısmı, talimatların esas parçasını içerir.</p>
</div>
<div class="sect4">
<h5 id="onsoz-maddeleri">Önsöz Maddeleri</h5>
<div class="paragraph">
<p>Aşağıdaki tablo RPM Spec dosyasının Önsöz kısmında kullanılan maddeleri listeler.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SPEC Yönergeleri</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Açıklama</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paketin esas adı, SPEC dosyasının adıyla eşleşmelidir.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yazılımın sürüm sayısını içerir.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Release</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bu sürümün kaç defa yayınlandığını içerir. Normalde ilk yayının değeri 1%{?dist} olarak belirlenir ve her yeni yayında sayı arttırılır. Yeni <code>Version</code> (sürüm) yayınlandığında tekrar 1 olur.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Summary</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paketin kısa ve tek satırlık özetini içerir.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>License</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paketlenen yazılımın lisansını belirtir.
<a href="https://getfedora.org/">Fedora</a> gibi topluluk dağıtımlarında dağıtılan paketler, dağıtımın lisanslama rehberlerinde bahsedildiği şekilde özgür yazılım lisansına uygun olmak zorundadır.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>URL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dağıtım hakkında daha fazla bilginin alınabileceği tam adrestir. Çoğu zaman bu adres aynı zamanda yazılımın ana sayfasıdır.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Source0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yazılımın kaynak kodunu barındıran internet adresi veyahut dosya konumudur. Her an erişilebilecek ve güvenilir bir yere atıfta bulunması tavsiye edilir. Güvenilirden kasıt, paketçinin yerel depolaması yerine yazılımın internet sayfasıdır. Eğer gerekliyse daha fazla SourceX yönergesi eklenebilir. (X yerine sayı gelir ve sayılar birer birer arttırılır. Örnek: Source1, Source2, Source3 gibi)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Patch0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eğer gerekliyse kaynak koduna uygulanacak olan ilk yama burada belirtilir. İhtiyaç duyulması hâlinde, SourceX gibi fazladan PatchX eklenebilir. (Patch1, Patch2, Patch3 gibi)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BuildArch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yazılım bir mimariye yönelik değilse, mesela tamamen yorumlanan bir dille yazılmışsa, bu yönerge <code>BuildArch: noarch</code> olarak ayarlanır. Eğer bu yönerge belirtilmezse, makinenin üzerinde çalıştığı mimariye ayarlanır. Örnek: <code>x86_64</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BuildRequires</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Derlenen dilde yazılmış programı paketlemek için gereken programların virgülle veya boşluklarla ayrıldığı listelerdir. <code>BuildRequires</code> yönergesi, aynı satırda kalındığı müddetçe, birden fazla yazılım belirtebilir.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Requires</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yazılımların kurulması için gereken bağımlılıkların virgülle veya  boşluklarlarla belirtildiği bir listedir. Tıpkı <code>BuildRequires</code> gibi, <code>Requires</code> yönergesi de satırına sadık kalınarak birden fazla yazılımı belirtebilir.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ExcludeArch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eğer yazılım belirli bir işlemci mimarisinde çalışmayacaksa, o mimariyi burada dışlayabilirsiniz.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>Name</code>, <code>Version</code> ve <code>Release</code> yönergeleri RPM paketinin dosya ismini oluşturur. RPM Paket geliştiricileri ve sistem yöneticileri bu üç direktiften
<strong>N-V-R</strong> ya da <strong>NVR</strong> olarak bahseder. Çünkü RPM paketleri <code>NAME-VERSION-RELEASE</code> biçimiyle isimlendirilir.</p>
</div>
<div class="paragraph">
<p><code>NAME-VERSION-RELEASE</code> biçiminin örneklerini, <code>rpm</code> komutu aracılığıyla paketleri sorgulayarak bulabilirsiniz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpm -q python
python-2.7.5-34.el7.x86_64</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>python</code>, paket ismini gösteren <code>Name</code> direktifine, <code>2.7.5</code>, <code>Version</code> direktifine, <code>34.el7</code> ise <code>Release</code> direktifine atıfta bulunur. Son işaretçi olan <code>x86_64</code> ise mimariyi gösterir. <strong>NVR</strong> üçlüsünün aksine, mimari paketçinin insiyatifinde değildir fakat <code>rpmbuild</code> tarafından belirlenmiştir. Bu duruma bir istisna, paketin mimariden bağımsız olduğunu belirten <code>noarch</code> ibaresidir.</p>
</div>
</div>
<div class="sect4">
<h5 id="govde-maddeleri">Gövde Maddeleri</h5>
<div class="paragraph">
<p>Aşağıdaki tablo, RPM SPEC dosyasının <em>Gövde</em> kısmındaki maddeleri listeler:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SPEC Yönergesi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Açıklama</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RPM&#8217;e paketlenen yazılım için detaylı açıklamayı içerir. Bu açıklama birden fazla satırı, hatta paragrafı içerebilir.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%prep</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yazılımı kuruluma hazırlayan komut ya da komutları içerir. <code>Source0</code> içerisinde bulunan arşiv dosyasını çıkartmak buna bir örnek olabilir. Bu yönerge, bir kabuk betiğini de içerebilir.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%build</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yazılımı makine koduna veyahut bayt koduna derlemek için kullanılan komut veya komutları içerir.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%install</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">İstenen inşa yapılarını <code>%builddir</code> (Derleme konumunu içerir) içerisinden <code>%buildroot</code>a taşıyan (paketlenecek dizin yapısını barındıran dizin) komut veya komutları içerir. Bu işlem çoğu zaman dosyaları <code>~/rpmbuild/BUILD</code> konumundan <code>~/rpmbuild/BUILDROOT</code>'a taşımak anlamına gelir. Bu komutlar son kullanıcı paketi kurarken değil, yalnızca paket inşa edilirken çalıştırılır. Daha fazla bilgi için <a href="#spec-dosyalari-ile-calismak">SPEC Dosyaları İle Çalışmak</a> kısmını inceleyin.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%check</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yazılımı denetlemek için kullanılan komut ya da komutları içerir. Bu kısım çoğu zaman birim testlerinden oluşur.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%files</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bu kısımda listelenen dosyalar paketi kuran son kullanıcının sistemine yerleştirilir.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%changelog</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paketin <code>Version</code> ve <code>Release</code> numaraları değiştiğinde,neyin değiştiğini bildirmek için kullanılır.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="ileri-duzey-maddeler">İleri Düzey Maddeler</h5>
<div class="paragraph">
<p>SPEC dosyaları ileri düzey maddeleri de içerebilir. Örneğin, bir SPEC dosyası <em>betikçi</em> ve <em>tetikleyici</em>leri içerebilir. Bu yöngergeler, son kullanıcı kendi sistemine kurarken farklı noktalarda tesir eder. (Paket inşa sürecini etkilemez)</p>
</div>
<div class="paragraph">
<p>Daha fazla bilgi için <a href="#tetikleyiciler-ve-betikciler">Betikçiler ve Tetikleyiciler</a> kısmını okuyabilirsiniz.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="buildroot">BuildRoot</h4>
<div class="paragraph">
<p>Ç.N: BuildRoot, Build (İnşa/Derleme) ve Root (Kök) kelimelerinden ortaya çıkan, mot a mot çevirisi <code>DerlemeKökü</code> olan bir kelimedir. Daha önce karşılaştığımız <code>Tarball</code> ve şimdi denk geleceğimiz <code>chroot</code> gibi, literatür içerisinde yer edindiğinden çevirmek istemedim. Bu yüzden, yazı boyunca <code>BuildRoot</code> kelimesini kullanmaya devam edeceğim. Eğer bu kelimeye karşılık gelen iyi bir karşılık bulursanız bana bildirebilirsiniz.</p>
</div>
<div class="paragraph">
<p>RPM paketleme bağlamında, "buildroot" bir
<a href="https://en.wikipedia.org/wiki/Chroot">chroot</a>
ortamıdır. Bu ortam, dosya sistemi içerisindeki paketi kuracak tarafın sisteminin kök dizinini temsil eden derleme yapıları dizinine yerleştirir. Yerleştirme düzeni son kullanıcının <em>Dosya Sistemi Hiyerarşisi</em> standartlarına uygun olmalıdır.</p>
</div>
<div class="paragraph">
<p>"Buildroot" içerisine eklenen dosyalar <a href="https://en.wikipedia.org/wiki/Cpio">cpio</a> arşivine dönüştürülür ki bu RPM&#8217;in temel parçasıdır. RPM paketi, son kullanıcının sistemine kurulduğu zaman dizindeki dosyalar hiyerarşiye uygun olarak kök dizin içerisine çıkartılır.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Geçmişte, <code>%buildroot</code> makrosunun <code>%~/rpmmacros</code> içerisine tanımlanması veya SPEC dosyasında <code>BuildRoot</code> belirtilmesi tavsiye edilirdi. RedHat Enterprise Linux 6&#8217;dan itibaren <code>rpmbuild</code> yazılımı kendi varsayılanlarını benimsedi. Bu varsayılanları yeniden tanımlamak belli başlı sıkıntılar doğurabileceğinden, RedHat bu makroyu değiştirmenizi tavsiye etmez. <code>%{buildroot}</code> makrosunu <code>rpmbuild</code> dizinindeki varsayılanıyla kullanabilirsiniz.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="rpm-makrolari">RPM Makroları</h4>
<div class="paragraph">
<p>Bir <a href="http://rpm.org/user_doc/macros.html">rpm makro</a>su, belirli gömülü işlevleri yerine getirmek için kullanılan ve koşula göre değişen değerleri tutan net ifadesidir. Bu demek oluyor ki, bilmek zorunda olmadığınız şeyleri RPM&#8217;e havale edebilirsiniz.</p>
</div>
<div class="paragraph">
<p>SPEC dosyasını hazırlarken yazılım sürümünü tekrar tekrar yazmak istemediğinizde makrolar size yardımcı olur. Daha önce tanımladığınız <em>Version</em> yönergesini, sonraları <code>%{version}</code> makrosunu kullanarak çağırabilirsiniz. Her <code>%{version}</code> makrosu, otomatik olarak <em>Version</em> yönergesiyle yer değiştirecektir.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Eğer makronun ne iş yaptığını anlayamazsanız şu şekilde ne iş yaptığını bulabilirsiniz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpm --eval %{_MAKRO}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Örneğin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpm --eval %{_bindir}
/usr/bin

$ rpm --eval %{_libexecdir}
/usr/libexec</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>%{?dist} makrosu derleme esasında hangi dağıtımın kullanıldığına işaret eder ve yaygın olarak kullanılır.</p>
</div>
<div class="paragraph">
<p>Örnek kullanım:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"># RHEL 7.x üzerinde
$ rpm --eval %{?dist}
.el7

# Fedora 23 üzerinde
$ rpm --eval %{?dist}
.fc23</code></pre>
</div>
</div>
<div class="paragraph">
<p>Makrolar hakkında daha fazla bilgi almak için: <a href="#makrolar-hakkinda-daha-fazlasi">Makrolar Hakkında Daha Fazlası</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="spec-dosyalari-ile-calismak">SPEC Dosyaları İle Çalışmak</h4>
<div class="paragraph">
<p>Yazılımları paketlemenin büyük kısmı SPEC dosyalarını düzenlemekten oluşur. Bu bölümde, SPEC dosyaları oluşturmak ve düzenlemek üzerine konuşacağız.</p>
</div>
<div class="paragraph">
<p>Yeni bir yazılımı paketlemek için yeni bir SPEC dosyası oluşturmanız gerekir. Bütün dosyayı en temelden oluşturmak yerine, <code>rpmdev-newspec</code> aracını kullanabilirsiniz. Bu araç size doldurulmamış bir SPEC dosyası hazırlar ve ihtiyacınıza göre yönergeleri ve alanları kullanabilirsiniz.</p>
</div>
<div class="paragraph">
<p>Bu bölümde, daha önce <a href="#yazilimi-paketlemeye-hazirlamak">Yazılımı Paketlemeye Hazırlamak</a> kısmında gördüğümüz üç farklı Merhaba Dünya programını ele alacağız.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/Tarbetu/rpm-paketleme-rehberi/blob/master/%C3%B6rnek-kod/belaba-0.1.tar.gz">belaba-0.1.tar.gz</a></p>
</li>
<li>
<p><a href="https://github.com/Tarbetu/rpm-paketleme-rehberi/blob/master/%C3%B6rnek-kod/pelaba-0.1.1.tar.gz">pelaba-0.1.1.tar.gz</a></p>
</li>
<li>
<p><a href="https://github.com/Tarbetu/rpm-paketleme-rehberi/blob/master/%C3%B6rnek-kod/celaba-1.0.tar.gz">celaba-1.0.tar.gz</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/Tarbetu/rpm-paketleme-rehberi/blob/master/%C3%B6rnek-kod/celaba-ciktisi-ilk-yama.patch">celaba-ciktisi-ilk-yama.patch</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Hepsini <code>~/rpmbuild/SOURCES</code> içine yerleştirin.</p>
</div>
<div class="paragraph">
<p>Üç dosya için de bir SPEC dosyası hazırlayın:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Bazı yazılımcı odaklı metin düzenleyicileri <code>.spec</code> dosyasını önceden hazırlayabilir. <code>rpmdev-newspec</code> aracı ise düzenleyiciden bağımsız bir yol sunar ki bu rehberde kullanmamızın nedeni budur.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ cd ~/rpmbuild/SPECS

$ rpmdev-newspec belaba
belaba.spec created; type minimal, rpm version &gt;= 4.11.

$ rpmdev-newspec celaba
celaba.spec created; type minimal, rpm version &gt;= 4.11.

$ rpmdev-newspec pelaba
pelaba.spec created; type minimal, rpm version &gt;= 4.11.</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>~/rpmbuild/SPECS/</code> dizini artık üç farklı SPEC dosyasını içeriyor. Bunlar, <code>belaba.spec</code>, <code>celaba.spec</code> ve <code>pelaba.spec</code>'tir.</p>
</div>
<div class="paragraph">
<p>Dosyaları gözden geçirebilirsiniz. <a href="#spec-dosyasi-nedir">Spec Dosyası Nedir?</a> kısmında gördüğünüz yönergeleri bu dosyalarda da göreceksiniz. Sonraki bölümlerde, bu SPEC dosyalarını kendiniz dolduracaksınız.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p><code>rpmdev-newspec</code> aracı herhangi bir dağıtıma özgü standartları ve eğilimleri göz önünde bulundurmaz. Fakat bu belge Fedora, CentOS ve RHEL&#8217;i hedeflediğinden bazı detayları fark edebilirsiniz:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>CentOS</em> (7.0&#8217;dan önceki sürümler) veyahut <a href="https://getfedora.org/">Fedora</a> (18&#8217;den önceki sürümler) üzerinde çalışırken <code>rm $RPM_BUILD_ROOT</code> komutuna denk gelebilirsiniz. Biz, diğer makrolarla tutarlılık sağlamak açısından <code>%{buildroot}</code> kullanmayı <code>$RPM_BUILD_ROOT</code> kullanmaya tercih ederiz.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Paketlenecek olan üç yazılımın özetleri aşağıda mevcuttur. Her biri detaylıca tarif edilmiştir. Paketleme için isterseniz sadece ihtiyacınıza özel hitap edenlere bakabilirsiniz veya farklı paketleme yöntemleri keşfetmek için hepsini birden okuyabilirsiniz.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 85%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yazılım Adı</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Açıklama</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">belaba</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ham olarak yorumlanan bir programlama dilinde yazılmış bir yazılım. Kaynak kodunun derlenmeye ihtiyacı olmadığı, yalnızca kurulmayı ihtiyaç olduğu bir durumda ne yapılması gerektiğine örnektir. Eğer önceden derlenmiş ikili bir paketin kurulması gerekiyorsa, ikili dosyalar yalnızca bir dosya olduğu için bu kısma göz atabilirsiniz.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pelaba</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bayt derlenen ve yorumlanan bir programlama dilinde yazılmış bir yazılım. Bayt derlenen kaynak kodunun nasıl derlenmesi ve kurulması gerektiğine örnektir.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">celaba</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yerel olarak derlenen bir programlama dilinde yazılmış bir yazılım. Kaynak kodundan makine koduna programın nasıl derlenmesi gerektiğine ve çıktı olarak gelen çalıştırılabilir dosyaların nasıl kurulması gerektiğine örnektir.</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="spec-dosyalari-ile-calisma-belaba">belaba</h5>
<div class="paragraph">
<p>İlk SPEC dosyamız, <a href="#yazilimi-paketlemeye-hazirlamak">Yazılımı Paketlemeye Hazırlamak</a> kısmında daha önce karşılaştığımız, bash kabuk betiği ile yazılmış olan belaba.</p>
</div>
<div class="paragraph">
<p>Şunları yaptığınızdan emin olun:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>belaba</code> kaynak kodunu <code>~/rpmbuild/SOURCES/</code> kısmına yerleştirdiğinize dikkat edin. Bilgi için: <a href="#spec-dosyalari-ile-calismak">SPEC Dosyaları İle Çalışmak</a>.</p>
</li>
<li>
<p>Doldurulmamış SPEC dosyasını <code>~/rpmbuild/SPECS/belaba.spec</code> konumunda olduğuna emin olun. Bu dosyanın içerisinde olması gerekenler:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Name:           belaba
Version:
Release:        1%{?dist}
Summary:

License:
URL:
Source0:

BuildRequires:
Requires:

%description

%prep
%setup -q

%build
%configure
make %{?_smp_mflags}

%install
rm -rf $RPM_BUILD_ROOT
%make_install

%files
%doc

%changelog
* Tue May 31 2016 Adam Miller &lt;maxamillion@fedoraproject.org&gt;
-</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Şimdi, <code>belaba</code> RPMlerini oluşturmak için <code>~/rpmbuild/SPECS/belaba.spec</code> dosyasını düzenleyelim:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>Name</code>, <code>Version</code>, <code>Release</code>, ve <code>Summary</code> yöngergelerini doldurun:</p>
<div class="ulist">
<ul>
<li>
<p><code>Name</code> yönergesi hâlihazırda <code>rpmdev-newspec</code> tarafından dolduruldu.</p>
</li>
<li>
<p><code>Version</code> yönergesi yazılımının sürümünü belirtmelidir. Sevimli kaynak kodumuz <code>belaba</code> için bu, <code>0.1</code>.</p>
</li>
<li>
<p><code>Release</code>, otomatik olarak ilk değer olan <code>1{%dist}</code> olarak ayarlandı. Eğer yazılımın sürümünde bir değişiklik olmadan yeni bir güncelleme olursa, mesela yeni bir yama, bu sayı tek tek arttırılmalıdır. Yeni sürümlerde <code>Release</code> rakamı tekrar <code>1</code> olmalıdır. Örneğin eğer belaba&#8217;nın <code>0.2</code> sürümü yayınlanırsa, <code>Release</code> tekrardan ``1{%dist} olarak ayarlanmalıdır. <em>disttag</em> makrosu ise <a href="#rpm-makrolari">RPM Makroları</a> kısmında detaylıca anlatılmıştır.</p>
</li>
<li>
<p><code>Summary</code>, yazılımın ne olduğu anlatan tek satırlık, kısa bir açıklamadır.</p>
<div class="paragraph">
<p>Düzenlemelerinizden sonra, SPEC dosyasının ilk kısmı şuna benzemelidir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Name:           belaba
Version:        0.1
Release:        1%{?dist}
Summary:        Bash ile Yazılmış Bir Merhaba Dünya örneği</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>License</code>, <code>URL</code> ve <code>Source0</code> yönergelerini doldurun:</p>
</div>
</li>
<li>
<p><code>License</code> kısmı, yazılımın kaynak kodundaki
<a href="https://tr.wikipedia.org/wiki/Yazılım_lisansı">Software License</a>
ile ilişkili olmalıdır.</p>
<div class="paragraph">
<p><code>License</code> bölümü için şu formatı takip ediniz:
<a href="https://fedoraproject.org/wiki/Licensing:Main">Fedora License Guidelines</a></p>
</div>
<div class="paragraph">
<p>Biz örnek olması için <code>GPLv3+</code> kullanacağız.</p>
</div>
</li>
<li>
<p><code>URL</code> bölümü, yazılımın yayınlandığı internet adresini gösterir. Örneğin: <code>https:://example.com/belaba</code>. Yine de tutarlı olması açısından, %{name} makrosunu tercih edin ve <code><a href="https://example.com/%{name}" class="bare">https://example.com/%{name}</a></code> şeklinde kullanın.</p>
</li>
<li>
<p><code>Source0</code> yöngergesi, kaynak kodunun yayınlandığı internet adresini içerir. Doğrudan paketlenecek yazılımın indirilmek için yayınlandığı adresi içermelidir. Bu örnekte, temsilen <code><a href="https://example.com/belaba/releases/belaba-0.1.tar.gz" class="bare">https://example.com/belaba/releases/belaba-0.1.tar.gz</a></code> adresini kullanacağız. Elbette ki %{name} makrosunu da kullanacağız. Ayrıca, %{version} makrosunu da sürüm değişikliklerine uyum sağlamak için kullacağız. Sonuç olarak girdimiz şu şekli alacaktır:
<code><a href="https://example.com/%{name}/releases/%{name}-%{version}.tar.gz" class="bare">https://example.com/%{name}/releases/%{name}-%{version}.tar.gz</a></code></p>
<div class="paragraph">
<p>Değişikliklerinizden sonra, SPEC dosyasının ilk kısmı aşağıdaki gibi görünmelidir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Name:           belaba
Version:        0.1
Release:        1%{?dist}
Summary:        Bash ile Yazılmış Bir Merhaba Dünya örneği

License:        GPLv3+
URL:            https://example.com/%{name}
Source0:        https://example.com/%{name}/release/%{name}-%{version}.tar.gz</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>BuildRequires</code> ve <code>Requires</code> yönergelerini doldurun ve <code>BuildArch</code> yönergesini ekleyin:</p>
<div class="ulist">
<ul>
<li>
<p><code>BuildRequires</code>, paket için derleme zamanı bağımlılıklarını belirtir. <code>belaba</code>'nın derlenmesi için hiçbir adıma gerek yoktur, çünkü Bash ham hâlde yorumlanan bir programlama dilidir ve yalnızca dosyaların sisteme kurulması yeterlidir. Yapılacak tek şey, bu yönergeyi silmektir.</p>
</li>
<li>
<p><code>Requires</code> ise paketlenmiş programın çalışması için gereken bağımlılıkları belirtir. <code>belaba</code> betiği için gereken tek bağımlılık, çalıştırılması için gereken <code>bash</code> kabuk ortamıdır. Bu yüzden, bu yönergeye <code>bash</code> yazarak bunu belirteceğiz.</p>
</li>
<li>
<p>Program yorumlanan bir dilde yazıldığından dolayı mimari açıdan herhangi bir bağlantı gerektirmeyecektir. <code>BuildArch</code> direktifini ekleyip buna <code>noarch</code> değeri vereceğiz. Bu değer, RPM paketinin herhangi bir işlemci mimarisi üzerinde çalışabileceğini belirtecektir.</p>
<div class="paragraph">
<p>Değişikliklerinizden sonra, SPEC dosyasının ilk kısmı şu şekilde görünmelidir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Name:           belaba
Version:        0.1
Release:        1%{?dist}
Summary:        Bash ile Yazılmış Bir Merhaba Dünya örneği

License:        GPLv3+
URL:            https://example.com/%{name}
Source0:        https://example.com/%{name}/release/%{name}-%{version}.tar.gz

Requires:       bash

BuildArch:      noarch</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>%description</code>, <code>%prep</code>, <code>%build</code>, <code>%install</code>, <code>%files</code>, ve <code>%license</code> kısımlarını doldurun. Bu yönergeler "Konu başlıkları" olarak da düşünülebilir, zira bu yönergeler çoklu satır hâlinde belirlenebilir, çalıştırılması gereken komutları belirleyebilir ve çoklu talimatlar bildirebilirler.</p>
<div class="ulist">
<ul>
<li>
<p><code>%description</code> kısmı dosyanın uzun bir anlatımını içerir. <code>Summary</code> yönergesinden farkı, bir veya birden çok paragrafı barındırmasıdır. Bu örneğimizde kısa bir açıklamayla geçiştireceğiz.</p>
</li>
<li>
<p><code>%prep</code> kısmı, derleme için uygun ortamı belirtir. Bu, arşivlenmiş kodun dışarı açılması, yamaların uygulanması ve SPEC dosyasının ileri safhalarında kullanmak üzere kaynak kodundaki belirli bir bilgiyi almak için taramak olabilir. Bu bölümde yalnızca <code>%setup -q</code> gömülü makrosunu kullanacağız.</p>
</li>
<li>
<p><code>%build</code> kısmı ise, paketlediğimiz yazılımın nasıl derlenmesi gerektiğini belirtir. <code>bash</code> diliyle yazılan dosyaların derlenmeye ihtiyacı olmadığı için, basitçe bu kısmı silip boş bırakacağız.</p>
</li>
<li>
<p><code>%install</code> kısmı ise <code>rpmbuild</code>'in dosyaları nasıl kurması gerektiğini bildiren yönergeleri içerir. Bu dizinde inşa edilen dosyalar <code>BUILDROOT</code> dizinine eklenir. Bu dizin,
<a href="https://en.wikipedia.org/wiki/Chroot">chroot</a>
temel dizinidir ve paketi kuran tarafın kök dizinini temsil eder. Burada, kurduğumuz dosyaların dizinlerini oluşturmamız gerekir.</p>
<div class="paragraph">
<p><code>belaba</code> için yalnızca hedef dizini kurmamız ve <code>bash</code> betiğini yerleştirmemiz gerektiği için <code>install</code> komutunu kullanacağız. RPM makroları bu işi kolay yoldan yapmamız için yardımcı olacaktır. .</p>
</div>
<div class="paragraph">
<p><code>%install</code> kısmı düzenlemeleri bitirdikten sonra şöyle görünecektir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">%install

mkdir -p %{buildroot}/%{_bindir}

install -m 0755 %{name} %{buildroot}/%{_bindir}/%{name}</code></pre>
</div>
</div>
</li>
<li>
<p>paketinizin <code>%files</code> kısmı,  son kullanıcının sistemine yerleştireceği dosyaların tam konumunu belirtir. Yalnızca <code>belaba</code> dosyasını kuracağımız için, konumumuz <code>/usr/bin/belaba</code>'dır ki bunu RPM Makroları ile ``%{_bindir}/%{name} olarak kısaltabiliriz.</p>
</li>
<li>
<p>Aynı zamanda, gömülü makrolar aracılığıyla dosyaların ne gibi görevleri olduğunu belirtebilirsiniz.
Örneğin LICENSE dosyasının yazılım lisansı olduğunu belirtmek için %license makrosunu kullanabilirsiniz.
Bu,<code>rpm</code> komutunu aracılığıyla üstveriyi belirten paket dosyalarını sorgularken kolaylık sağlar.
+o
Değişikliklerinizden sonra, %files kısmı şu şekilde görünecektir:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">%files
%license LICENSE
%{_bindir}/%{name}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Son kısım olan <code>%changelog</code>, her Sürüm-Yayın değişikliği için tarif damgalı girdileri listeler. Bu günlük, paketleme değişikliklerini içerir, yazılım değişikliğini değil. Paketleme değişiklikleri için örnekler: yama ekleme, inşa sürecini değiştirme vs.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Ç.N: <code>%changelog</code> içerisindeki değişiklikleri ve tarih damgasını İngilizce yazmanız paketi inceleyecek yabancı kullanıcılar için kolaylık sağlayacaktır.</p>
</div>
<div class="paragraph">
<p>+
İlk satır için şu biçimi takip ediniz:</p>
</div>
<div class="paragraph">
<p>+
<code>* HaftanınGünü Ay Gün Yıl İsim Soyisim &lt;eposta&gt; - Sürüm-Yayın</code></p>
</div>
<div class="paragraph">
<p>+
Değişiklikleri bildirirken şu kuralları uygulayın:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Her satır girdi birden fazla öğe içerebilir - Her madde için bir tane</p>
</li>
<li>
<p>Her madde için yeni bir satıra geçilmelidir.</p>
</li>
<li>
<p>Her madde <code>-</code> ile başlamalıdır.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>+
Tarih damgalanmış örnek bir girdi:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">%changelog
* Tue May 31 2016 Adam Miller &lt;maxamillion@fedoraproject.org&gt; - 0.1-1
- İlk belaba paketi
- 0.1-1 sürüm - yayını için öylesine bir ikinci madde</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sonunda <strong>belaba</strong> için bütün SPEC dosyasını yazmış bulunmaktasınız. <strong>belaba</strong> için yazmış olduğunuz dosya buna benzemelidir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Name:           belaba
Version:        0.1
Release:        1%{?dist}
Summary:        Bash ile Yazılmış Bir Merhaba Dünya örneği

License:        GPLv3+
URL:            https://www.example.com/%{name}
Source0:        https://www.example.com/%{name}/releases/%{name}-%{version}.tar.gz

Requires:       bash

BuildArch:      noarch

%description
Bash ile yazılmış Merhaba Dünya örneği için
satırlara sığmayan
epey uzun bir
tanıtım yazısı

%prep
%setup -q

%build

%install

mkdir -p %{buildroot}/%{_bindir}

install -m 0755 %{name} %{buildroot}/%{_bindir}/%{name}

%files
%license LICENSE
%{_bindir}/%{name}


%changelog
* Tue May 31 2016 Adam Miller &lt;maxamillion@fedoraproject.org&gt; - 0.1-1
- First belaba package</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sonraki kısım, RPM&#8217;nin nasıl derlenmesi gerektiği hakkında bilgi verir.</p>
</div>
</div>
<div class="sect4">
<h5 id="spec-dosyalari-ile-calisma-pelaba">pelaba</h5>
<div class="paragraph">
<p>Hazırlayacağımız ikinci SPEC dosyası, <a href="https://www.python.org/">Python</a> ile hazırlanmış olan örnek programımız için. İndirdiğimiz (ya da <a href="#yazilimi-paketlemeye-hazirlamak">Yazılımı Paketlemeye Hazırlamak</a> kısmında hazırladığımız) dosyayı  <code>~/rpmbuild/SOURCES/</code> dosyasına yerleştiriyoruz ve <code>~/rpmbuild/SPECS/pelaba.spec</code> dosyasını oluşturup düzenliyoruz.</p>
</div>
<div class="paragraph">
<p>Bu düzenlemeye girişmeden önce, bayt derlenerek yorumlanan dillere dair önemli bir detaydan bahsetmemiz gerekiyor. Yazılımı bayt-derlediğimiz için
<a href="https://en.wikipedia.org/wiki/Shebang_%28Unix%29">mevzu (shebang)</a>
olarak isimlendirilen yapıyı kullanamıyoruz. Bu yapı, bayt derlenmeyen kabuk betikleri ve <a href="https://www.python.org/">Python</a> gibi dillerin ufak çaplı kodları için yaygın olarak tercih edilen bir yoldur. Bizim tek satırlık kodumuz için bayt derleme işi anlamsız görünebilir, fakat yüzlerce koddan oluşan büyük çaptaki yazılım projeleri için performans açısından oldukça faydalıdır.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Bayt derlenmiş kodu çağıran betiği hazırlamak veyahut yazılıma bayt derlenmemiş koda giriş noktası oluşturmak, yazılımcıların paketi yayına çıkartmadan önce sıklıkla yaptıkları iştir. Ancak her zaman böyle bir giriş noktası hazırlanmamış olabilir ve yapacağımız alıştırma bunun gibi durumlarda ne yapmanız gerektiğini gösterir. <a href="https://www.python.org/">Python</a> kodunun normalde nasıl yayınlandığını ve dağıtıldığını öğrenmek istiyorsanız lütfen <a href="https://docs.python.org/3/library/distribution.html">Yazılım Paketleme ve Dağıtma</a> belgelerini inceleyiniz.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Bayt derlenmiş yazılıma bir giriş noktası hazırlamak için ufak bir kabuk betiği hazırlayacağız ve SPEC dosyasının içine dâhil ekleyeceğiz. Bu, aynı zamanda SPEC dosyası içinde nasıl betik kabuğu kodlarını çalıştırdığımıza dair bir örnek olmuş olacak. Daha sonra bunun nasıl yapılacağına dair detayları <code>%install</code> kısmında inceleyeceğiz.</p>
</div>
<div class="paragraph">
<p>Şimdi işi biraz daha ilerletelim ve <code>~/rpmbuild/SPECS/pelaba.spec</code> dosyasını incelemek üzere açalım.</p>
</div>
<div class="paragraph">
<p>Aşağıdaki örnek dosya <code>rpmdev-newspec</code> komutunun bize verdiği şablondur.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Name:           pelaba
Version:
Release:        1%{?dist}
Summary:

License:
URL:
Source0:

BuildRequires:
Requires:

%description

%prep
%setup -q

%build
%configure
make %{?_smp_mflags}

%install
rm -rf $RPM_BUILD_ROOT
%make_install

%files
%doc

%changelog
* Tue May 31 2016 Adam Miller &lt;maxamillion@fedoraproject.org&gt;
-</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tıpkı ilk örnekte olduğu gibi, belgenin en tepesinde yer alan <code>Name</code>,
<code>Version</code>, <code>Release</code>, <code>Summary</code> yönergeleriyle düzenlemeye başlayalım. <code>rpmdev-newspec</code> komutu gerekli bilgiyi önceden sağladığı için <code>Name</code> yönergesi önceden belirtilmiş oldu.</p>
</div>
<div class="paragraph">
<p>İlk iş, <code>Version</code> yönergesini <em>pelaba</em>'nın sürüm numarasına eşleştirmek olsun. Bu yazılım numarası, indirdiğimiz kod için (veya <a href="#yazilimi-paketlemeye-hazirlamak">Yazılımı Paketlemeye Hazırlamak</a> kısmında gördüğümüz üzere) <code>0.1.1</code>'dir.</p>
</div>
<div class="paragraph">
<p><code>Release</code> hâlihazırda bizim için <code>1%{?dist}</code> olarak ayarlandı. Ayarlanmış değerin içindeki <code>1</code> sayısı paket her düzenlendiğinde bir arttırılmak zorundadır, ki bu düzenlemeler bir sorunun düzeltilmesi için yama eklemek olabilir. Fakat yeni bir <code>Version</code> yayınlandığında bu sayı tekrar <code>1</code>'e geri çekilmelidir. <a href="#rpm-makrolari">RPM Makroları</a> bölümünü okuyanlar <code>%{?dist}</code> ile gösterilen <em>disttag</em> makrosunu hemen tanımış olmalılar.</p>
</div>
<div class="paragraph">
<p><code>Summary</code>, yazılımın ne olduğunu açıklayan kısa, tek satırlık bir yönergedir.</p>
</div>
<div class="paragraph">
<p>SPEC dosyasının ilk kısmında yaptığımız değişikliklerden sonra bu kısım aşağıdakine benzemelidir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Name:           pelaba
Version:        0.1.1
Release:        1%{?dist}
Summary:        Python ile Yazılmış Bir Merhaba Dünya örneği</code></pre>
</div>
</div>
<div class="paragraph">
<p>Şimdi, <code>rpmdev-newspec</code> komutunun <code>License</code>, <code>URL</code>, <code>Source0</code> şeklinde gruplandığı ikinci kısma bakalım.</p>
</div>
<div class="paragraph">
<p><code>License</code> kısmı, yazılımcının kaynak kodu için belirttiği
<a href="https://tr.wikipedia.org/wiki/Yazılım_lisansı">yazılım lisansıdır</a>
. SPEC dosyasında kullanılan olan lisans etiketleri RPM tabanlı <a href="https://tr.wikipedia.org/wiki/Linux" class="bare">https://tr.wikipedia.org/wiki/Linux</a> dağıtımları için farklılık gösterir. Biz, <a href="https://fedoraproject.org/wiki/Licensing:Main">Fedora Lisanslama Rehberi</a> için geçerli olan yazım standartlarını kullanacağız. Programımız için örnek olarak seçtiğimiz tarz <code>GPLv3+</code>'dır.</p>
</div>
<div class="paragraph">
<p><code>URL</code> yönergesi kaynak kodun indirme linki değil, yazılımın anasayfasına giden bağlantıdır. İçeriğinde, yayındaki yazılım hakkında daha fazla bilgi sahibi olmak isteyenler için ürünün, projenin veyahut şirketin anasayfasına giden bağlantı olmalıdır. Şimdilik örnek olması açısından <code><a href="https://example.com/pelaba" class="bare">https://example.com/pelaba</a></code> adresini seçiyoruz. Ancak, SPEC dosyasının diğer parçaları arasında tutarlılık olması için adresteki yazılım ismini <code>%{name}</code> RPM makrosu ile değiştireceğiz.</p>
</div>
<div class="paragraph">
<p><code>Source0</code> kaynak kodu yazılım kodunun indirilebileceği adresi işaret eder. Bağlantı, paketlenecek olan kaynak kodun ilgili sürümüne yönlendirmelidir. Aynı şekilde, bu yalnızca bir örnek olduğu için aşağıdaki linki kullanacağız:
<code><a href="https://example.com/pelaba/releases/pelaba-0.1.1.tar.gz" class="bare">https://example.com/pelaba/releases/pelaba-0.1.1.tar.gz</a></code></p>
</div>
<div class="paragraph">
<p>Tamamen sabit bir şekilde belirtilmiş bir bağlantı ileride yayınlanacak olan sürümler için sıkıntı yaratacaktır, bu yüzden adresteki <code>0.1.1</code> kısmı muhakkak değişecektir. SPEC dosyası yalnızca tek bir sürüm için hazırlanmaz, yeni sürümlerde de olabilecek en az değişiklikle tekrar kullanılır. Bu yüzden, kodu hazırlarken adres sabit olarak değil <code><a href="https://example.com/%{name}/releases/%{name}-%{version}.tar.gz" class="bare">https://example.com/%{name}/releases/%{name}-%{version}.tar.gz</a></code> biçimiyle yazılır.</p>
</div>
<div class="paragraph">
<p>Değişikliklerin ardından, SPEC dosyanızın üst tarafı şuna benzemelidir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Name:           pelaba
Version:        0.1.1
Release:        1%{?dist}
Summary:        Python ile Yazılmış Bir Merhaba Dünya örneği

License:        GPLv3+
URL:            https://www.example.com/%{name}
Source0:        https://www.example.com/%{name}/releases/%{name}-%{version}.tar.gz</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ardından, <code>BuildRequires</code> ve <code>Requires</code> isimli iki yönergeyi ele alacağız, bu iki yönerge de paketin bağımlılıklarını belirler. Fakat, <code>BuildRequires</code> paketin <strong>inşa edilmesi</strong> için gereken bağımlılıkları gösterirken <code>Requires</code> paketin düzgünce <strong>çalışması</strong> için gerekli olan bağımlılıklara işaret eder.</p>
</div>
<div class="paragraph">
<p>Örneğimizde, hem kaynak kodunu bayt olarak derlemek hem de bayt-derlenmiş kodu çalıştırmak için <code>python</code> paketine ihtiyacımız var. Bunu belirtmek için <code>Requires</code> direktifini kullanacağız. Aynı şekilde, paketimize hazırlayacağımız ufak bir giriş betiği çalıştırmak için <code>bash</code> paketine de ihtiyacımız var.</p>
</div>
<div class="paragraph">
<p>Eklememiz gereken bir diğer şey ise, yorumlanan bir programlama dili üzerinde çalıştığımız için <code>BuildArch</code> direktifini <code>noarch</code> olarak belirtmemiz gerekiyor, böylece RPM bu paketin bir işlemci mimarisine bağımlı olmadığını anlamış olacak.</p>
</div>
<div class="paragraph">
<p>Düzenlemlerin ardından, SPEC dosyanızın üst kısmı şuna benzemelidir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Name:           pelaba
Version:        0.1.1
Release:        1%{?dist}
Summary:        Python ile Yazılmış Bir Merhaba Dünya örneği

License:        GPLv3+
URL:            https://www.example.com/%{name}
Source0:        https://www.example.com/%{name}/releases/%{name}-%{version}.tar.gz

BuildRequires:  python
Requires:       python
Requires:       bash

BuildArch:      noarch</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bundan sonraki yönergeler, "gövde başlıklar" olarak düşünülebilir. Çünkü bu yönergeler birden çok satırı, talimatı ve betiklendirilmiş görevleri kapsamakta. Bu yönergeleri de daha önce yaptıklarımızla aynı şekilde düzenleyeceğiz.</p>
</div>
<div class="paragraph">
<p><code>%description</code>, <code>Summary</code> yönergesine kıyasla paketlenecek yazılım hakkında çok daha uzun bir açıklamayı içerir. Örneğimizde çok uzun bir tanıtım yazısı yazmayacağız, ancak bu kısım dilenirse tüm bir paragrafı ya da paragrafları kapsayabilir.</p>
</div>
<div class="paragraph">
<p><code>%prep</code>, "Hazırlamak" kelimesinin İngilize karşılığı olan <em>prepare</em> kelimesinin kısaltmasıdır. Yazılımı derlemek için gerekli olan ortamı veya çalışma alanını inşa etmek için kullanılır. Çoğu zaman burada olan şey; arşivlerin açılması, yamaların uygulanması ve kaynak kodda gerekebilecek bilginin taranmasıdır ki bu bilgiler SPEC dosyasının sonraki bölümlerinde kullanılacaktır. Bu bölümde kısa yoldan işimizi göreceğinden <code>%setup -q</code> makrosunu kullanacağız.</p>
</div>
<div class="paragraph">
<p><code>%build</code>, paketlerin derlenmesi için ne yapılması gerektiğini içerir. Örneğimizde kaynak kodunun nasıl derlenmesi gerektiğine dair komutları uygulayacağız. <a href="#yazilimi-paketlemeye-hazirlamak">Yazılımı Paketlemeye Hazırlamak</a> kısmını okumuş okuyucular bu kodu tanıyacaktır.</p>
</div>
<div class="paragraph">
<p>SPEC dosyamızdaki <code>%build</code> kısmı aşağıdakine benzemelidir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">%build

python -m compileall pelaba.py</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>%install</code> kısmı ise <code>rpmbuild</code>'in dosyaları nasıl kurması gerektiğini bildiren yönergeleri içerir. Bu dizinde inşa edilen dosyalar <code>BUILDROOT</code> dizinine eklenir. Bu dizin,
<a href="https://en.wikipedia.org/wiki/Chroot">chroot</a>
temel dizinidir ve paketi kuran tarafın kök dizinini temsil eder. Burada, kurduğumuz dosyaların dizinlerini oluşturmamız gerekir. Ancak, RPM Makroları burada yapılan işleri sabit bir şekilde kodlamadan yapmamıza yardımcı olur.</p>
</div>
<div class="paragraph">
<p>Daha önce, dosyanın
<a href="https://en.wikipedia.org/wiki/Shebang_%28Unix%29">mevzu</a>
isimli kısmını kaybettiğimizi söylemiştik, bundan dolayı bayt derlenmiş kodumuz için aynı işi yapan bir betik hazırlamamız gerekiyor. Bunu yapmak için birçok seçeneğimizden biri de bir betik hazırlayıp ayrı bir <code>SourceX</code> yönergesiyle bunu belirtmek ve  bu örnekte tercih edeceğimiz şekilde SPEC dosyası içerisinde bir dosya oluşturmaktır. Bu örneği tercih etmemizin sebebi SPEC dosyasının da betik yazılabilir bir dosya olduğunu göstermektir. Yapacağımız şey, <a href="https://www.python.org/">Python</a> bayt-derlenmiş kodunu
<a href="https://en.wikipedia.org/wiki/Here_document">"here" belgesi</a>
ile çalıştırmak. Aynı zamanda bayt-derlenmiş dosyayı bir sistemin erişebileceği bir kütüphane dizinine kurmamız gerekmektedir.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Fark ettiğiniz üzere burada kütüphane adresini elle belirtiyoruz. Bu durumdan kaçınmanın pek çok yolu var ve bunların önemli bir kısmı paketlenen yazılımın yazıldığı programlama diline uygun olarak <a href="#gelismis-konular">[gelismis-konular]</a> altındaki <a href="#makrolar-hakkinda-daha-fazlasi">Makrolar Hakkında Daha Fazlası</a> kısmında bahsediliyor. Bu örnekte kafa karışıklığı yaratmamak için kütüphane adresini elle yazmayı tercih ediyoruz.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>%install</code> kısmı düzenlemelerin ardından şu şekilde görünmelidir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">%install

mkdir -p %{buildroot}/%{_bindir}
mkdir -p %{buildroot}/usr/lib/%{name}

cat &gt; %{buildroot}/%{_bindir}/%{name} &lt;&lt;-EOF
#!/bin/bash
/usr/bin/python /usr/lib/%{name}/%{name}.pyc
EOF

chmod 0755 %{buildroot}/%{_bindir}/%{name}

install -m 0644 %{name}.py* %{buildroot}/usr/lib/%{name}/</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>%files</code> kısmı, RPM paketinin içerdiği dosyaları ve paketin kurulacağı sisteme yerleştirilmesi planlanan dosyaları belirttiğimiz kısımdır.</p>
</div>
<div class="paragraph">
<p>Dikkat etmeniz gereken bir husus, bu kısmın <code>%{buildroot}</code>'a göre yazılmaması gerektiğidir. Bu kısımdaki dosyalar, paketi kuran kullanıcının sisteminde kurulumdan sonra belirlenecek tam konuma göre belirtilmelidir. Bu yüzden, <code>pelaba</code> dosyasının sistemdeki konumunu belirtirken <code>%{_bindir}/pelaba</code> olarak belirtmemiz gerekmektedir. Aynı zamanda, dosyaları içine yerleştirdiğimiz bir kütüphane dizinin bu paket tarafından "sahiplenildiğini" belirtmek üzere bir <code>%dir</code> tanımlamamız gerekmektedir.</p>
</div>
<div class="paragraph">
<p>Ayrıca bu kısımda, bir dosyanın içeriğinde ne olduğunu belirtmek üzere bazı gömülü makroları kullanmaya ihtiyacınız olacaktır. Bu, <code>rpm</code> komutunun çıktısını sorgulamak isteyen sistem yöneticileri ve son kullanıcılar için oldukça kullanışlı olabilir. Burada kullanacağımız <code>%license</code> gömülü makrosu, <code>rpmbuild</code>'e dosyanın yazılım lisansını içerdiğini bildirecektir.</p>
</div>
<div class="paragraph">
<p><code>%files</code> kısmı, düzenlemenizin ardından şu şekilde görünmelidir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">%files
%license LICENSE
%dir /usr/lib/%{name}/
%{_bindir}/%{name}
/usr/lib/%{name}/%{name}.py*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Son kısım olan <code>%changelog</code>, tarih damgalı girdilerin Sürüm-Yayın değişikliklerinde ne olduğunu günlüklemek içindir. Bu günlükte her değişikliğin yazılması gerekmez ancak her önemli paketleme değişikliklerinin belirtilmesi gereklidir. Örneğin, bir paket içerisindeki yazılımın paketlemeye ihtiyacı varsa veya <code>%build</code> kısmında gösterilen derleme yönteminin değiştirilmesi gerekiyorsa burada bilgi verilebilir. Her girdi birden fazla maddeyi içerebilir, ve her madde <code>-</code> karakteriyle başlayan yeni bir satırla başlamalıdır.
Aşağıda örnek bir girdi görmektesiniz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">%changelog
* Tue May 31 2016 Adam Miller &lt;maxamillion@fedoraproject.org&gt; - 0.1.1-1
- İlk belaba paketi
- 0.1.1-1 sürüm - yayın için öylesine bir ikinci madde</code></pre>
</div>
</div>
<div class="paragraph">
<p>Yukarıdaki örnekte dikkat etmelisiniz ki, tarih damgası <code>*</code> karakteriyle başlamalıdır ve günün adının ardından ay, gün, yıl şeklinde tarih atılmalı ve RPM paketçisi hakkındaki iletişim bilgileri formatıyla hazırlanmalıdır. Daha sonra, alışılageldiği üzre Sürüm (Version) - Yayın&#8217;dan (Release) önce <code>-</code> karakterini yerleştirdik ancak bu yaklaşım zorunlu değildir.</p>
</div>
<div class="paragraph">
<p>Ve hepsi bu kadar! <strong>Pelaba</strong> için bütün SPEC dosyasını yazmış bulunmaktayız! Bundan sonraki kısımda bir RPM dosyası nasıl inşa edilir, bunu okuyacaksınız!</p>
</div>
<div class="paragraph">
<p>Bütün SPEC dosyası değişikliklerden sonra aşağıdaki gibi görünmelidir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Name:           pelaba
Version:        0.1.1
Release:        1%{?dist}
Summary:        Python ile Yazılmış Bir Merhaba Dünya örneği

License:        GPLv3+
URL:            https://www.example.com/%{name}
Source0:        https://www.example.com/%{name}/releases/%{name}-%{version}.tar.gz

BuildRequires:  python
Requires:       python
Requires:       bash

BuildArch:      noarch

%description
Python ile yazılmış Merhaba Dünya örneği için
satırlara sığmayan
epey uzun bir
tanıtım yazısı

%prep
%setup -q

%build

python -m compileall %{name}.py

%install

mkdir -p %{buildroot}/%{_bindir}
mkdir -p %{buildroot}/usr/lib/%{name}

cat &gt; %{buildroot}/%{_bindir}/%{name} &lt;&lt;-EOF
#!/bin/bash
/usr/bin/python /usr/lib/%{name}/%{name}.pyc
EOF

chmod 0755 %{buildroot}/%{_bindir}/%{name}

install -m 0644 %{name}.py* %{buildroot}/usr/lib/%{name}/

%files
%license LICENSE
%dir /usr/lib/%{name}/
%{_bindir}/%{name}
/usr/lib/%{name}/%{name}.py*


%changelog
* Tue May 31 2016 Adam Miller &lt;maxamillion@fedoraproject.org&gt; - 0.1.1-1
- First pelaba package</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="spec-dosyalari-ile-calisma-pelaba">celaba</h5>
<div class="paragraph">
<p>Üçüncü SPEC dosyamız ise,
<a href="https://en.wikipedia.org/wiki/C_%28programming_language%29">C</a>
programlama dilinde yazılmış olan örneğimiz için. Daha önceden bu örnek programı hazırlamış (ya da indirmiş) ve kaynak kodunu <code>~/rpmbuild/SOURCES/</code> içerisine yerleştirmiş olmalısınız.</p>
</div>
<div class="paragraph">
<p>Şimdi biraz daha ileri gidelim ve <code>~/rpmbuild/SPECS/celaba.spec</code> dosyasını açıp boşluklarını doldurmaya başlayalım.</p>
</div>
<div class="paragraph">
<p><code>rpmdev-newspec</code> komutu ile bu dosyayı oluşturabilirsiniz.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Name:           celaba
Version:
Release:        1%{?dist}
Summary:

License:
URL:
Source0:

BuildRequires:
Requires:

%description

%prep
%setup -q

%build
%configure
make %{?_smp_mflags}

%install
rm -rf $RPM_BUILD_ROOT
%make_install

%files
%doc

%changelog
* Tue May 31 2016 Adam Miller &lt;maxamillion@fedoraproject.org&gt;
-</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tıpkı daha önceki örneklerimizde yaptığımız gibi, <code>rpmdev-newspec</code> komutunun dosyanın üst tarafına topladığı yönergelerlerle başlayacağız, bunlar: <code>Name</code>, <code>Version</code>, <code>Release</code>, <code>Summary</code>'dir. <code>Name</code> isimli yönerge, <code>rpmdev-newspec</code> tarafından hâlihazırda belirtildiği için düzenlememize gerek yok.</p>
</div>
<div class="paragraph">
<p><code>Version</code> isimli yönerge <em>celaba</em>'nın kaynak kodu sürümüyle eşleşmelidir ki indirdiğimiz (ya da <a href="#yazilimi-paketlemeye-hazirlamak">Yazılımı Paketlemeye Hazırlamak</a> kısmında belirlediğimiz) üzere bu <code>1.0</code>'dır.</p>
</div>
<div class="paragraph">
<p><code>Release</code> hâlihazırda bizim için <code>1%{?dist}</code> olarak ayarlandı. Ayarlanmış değerin içindeki <code>1</code> sayısı paket her düzenlendiğinde bir arttırılmak zorundadır, ki bu düzenlemeler bir sorunun düzeltilmesi için yama eklemek olabilir. Fakat yeni bir <code>Version</code> yayınlandığında bu sayı tekrar <code>1</code>'e geri çekilmelidir. <a href="#rpm-makrolari">RPM Makroları</a> bölümünü okuyanlar <code>%{?dist}</code> ile gösterilen <em>disttag</em> makrosunu hemen tanımış olmalıdır.</p>
</div>
<div class="paragraph">
<p><code>Summary</code> ise yazılımın ne olduğuna göre tek satırlık, kısa bir açıklamadır.</p>
</div>
<div class="paragraph">
<p>Düzenlemelerinizin ardından, SPEC dosyasının ilk bölümü şuna benzemelidir.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Name:           celaba
Version:        1.0
Release:        1%{?dist}
Summary:        C ile Yazılmış Bir Merhaba Dünya örneği</code></pre>
</div>
</div>
<div class="paragraph">
<p>Şimdi, <code>rpmdev-newspec</code> komutunun SPEC dosyamızda grupladığı direktiflerin ikinci setine göz atalım:
<code>License</code>, <code>URL</code> ve <code>Source0</code>. Ancak, bu direktiflerin içine <code>Source0</code> ile yakından alakalı, bizim hazırladığımız yamayı yazılıma dâhil edecek<code>Patch0</code> direktifini de ekleyeceğiz.</p>
</div>
<div class="paragraph">
<p><code>License</code> kısmı, yazılımcının kaynak kodu için belirttiği <a href="https://tr.wikipedia.org/wiki/Yazılım_lisansı">Yazılım Lisansıdır</a>. SPEC dosyasında kullanılan lisans etiketleri RPM tabanlı <a href="https://tr.wikipedia.org/wiki/Linux">Linux</a> dağıtımları için farklılık gösterir. Biz, <a href="https://fedoraproject.org/wiki/Licensing:Main">Fedora Lisanslama Rehberi</a> için geçerli olan yazım standartlarını kullanacağız ve bu programımız için örnek olarak seçtiğimiz tarz <code>GPLv3+</code>'dır.</p>
</div>
<div class="paragraph">
<p><code>URL</code> yönergesi, yazılımın anasayfasına giden bağlantıyı içerir. İçeriğinde, yayındaki yazılım hakkında daha fazla bilgi sahibi olmak isteyenler için ürünün, projenin veyahut şirketin anasayfasına giden bağlantı olmalıdır. Şimdilik örnek olması açısından <code><a href="https://example.com/celaba" class="bare">https://example.com/celaba</a></code> adresini seçiyoruz. Ancak, SPEC dosyasının diğer parçaları arasında tutarlılık olması için adresteki yazılım ismini <code>%{name}</code> RPM makrosu ile değiştireceğiz.</p>
</div>
<div class="paragraph">
<p><code>Source0</code> yöngergesi, kaynak kodunun yayınlandığı internet adresini içerir. Doğrudan paketlenecek yazılımın indirilmek için yayınlandığı adresi içermelidir. Bu örnekte, temsilen <code><a href="https://example.com/belaba/releases/celaba-1.0.tar.gz" class="bare">https://example.com/belaba/releases/celaba-1.0.tar.gz</a></code> adresini kullanacağız. Elbette ki <code>%{name}</code> makrosunu ve buna ek olarak sürüm değişikliklerine uyum sağlamak için <code>%{version}</code> makrosunu da kullacağız. Sonuç olarak girdimiz şu şekli alacaktır:
<code><a href="https://example.com/%{name}/releases/%{name}-%{version}.tar.gz" class="bare">https://example.com/%{name}/releases/%{name}-%{version}.tar.gz</a></code></p>
</div>
<div class="paragraph">
<p>Tamamen sabit bir şekilde belirtilmiş bir bağlantı ileride yayınlanacak olan sürümler sıkıntı yaratacaktır ve adresteki <code>1.0</code> kısmı muhakkak değişecektir. Bir SPEC dosyası yalnızca tek bir sürüm için hazırlanmaz, yeni sürümlerde de olabilecek en az değişiklikle tekrar kullanılır. Bu yüzden, kodu hazırlarken adres sabit olarak değil <code><a href="https://example.com/%{name}/releases/%{name}-%{version}.tar.gz" class="bare">https://example.com/%{name}/releases/%{name}-%{version}.tar.gz</a></code> biçimiyle yazılır.</p>
</div>
<div class="paragraph">
<p>Bir sonraki işimiz ise daha önceden hazırladığımız <code>.patch</code> dosyasını paketimize <code>%prep</code> kısmında kullanılmak üzere dahil etmek. Bunun için,
<code>Patch0:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; celaba-ciktisi-ilk-yama.patch`</code> satırını SPEC dosyamıza ekleyeceğiz.</p>
</div>
<div class="paragraph">
<p>Bütün değişikliklerden sonra, SPEC dosyanızın üst kısmı aşağıdakine benzemelidir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Name:           celaba
Version:        1.0
Release:        1%{?dist}
Summary:        C ile Yazılmış Bir Merhaba Dünya örneği

License:        GPLv3+
URL:            https://www.example.com/%{name}
Source0:        https://www.example.com/%{name}/releases/%{name}-%{version}.tar.gz

Patch0:         celaba-ciktisi-ilk-yama.patch</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bundan sonraki yönergelerimiz, <code>BuildRequires</code> ve <code>Requires</code> yönergeleridir ki bu satırlar gerekli paketleri sıralar.
Fakat <code>BuildRequires</code>, <code>rpmbuild</code>'e paketin <strong>inşa edilmesi</strong> için ne gerektiğini bildirirken <code>Requires</code> paketin <strong>çalışması</strong> için hangi paketlere ihtiyaç olduğunu bildirir.</p>
</div>
<div class="paragraph">
<p>Bu örnekte kaynak kodunu derlemek üzere <code>gcc</code> ve <code>make</code> paketine ihtiyacımız olacak. Yazılımın çalışması için gereken bağımlılıklar ise <code>rpmbuild</code> tarafından sağlanmakta, zira programımız standart
<a href="https://tr.wikipedia.org/wiki/C_(programlama_dili)">C</a>
kütüphaneleri dışında hiçbir şeyi gerektirmemektedir. Bundan dolayı herhangi bir şeyi <code>Requires</code> yönergesi içerisinde belirtmemize gerek yok, bu yönergeyi SPEC içerisinden çıkartabiliriz.</p>
</div>
<div class="paragraph">
<p>Düzenlemenizin ardından, SPEC dosyanızın üst tarafı şuna benzemelidir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Name:           celaba
Version:        1.0
Release:        1%{?dist}
Summary:        C ile Yazılmış Bir Merhaba Dünya örneği

License:        GPLv3+
URL:            https://www.example.com/%{name}
Source0:        https://www.example.com/%{name}/releases/%{name}-%{version}.tar.gz

Patch0:         celaba-ciktisi-ilk-yama.patch

BuildRequires:  gcc
BuildRequires:  make</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bundan sonraki yönergeler, "gövde başlıklar" olarak düşünülebilir. Çünkü bu yönergeler birden çok satırı, talimatı ve betiklendirilmiş görevleri kapsamakta. Bu yönergeleri de daha önceki yönergelerimizdekilerle aynı şekilde düzenleyeceğiz.</p>
</div>
<div class="paragraph">
<p><code>%description</code>, <code>Summary</code> yönergesine kıyasla paketlenecek yazılım hakkında çok daha uzun bir açıklamayı içerir. Örneğimizde çok uzun bir tanıtım yazısı yazmayacağız, ancak bu kısım dilenirse tüm bir paragrafı ya da paragrafları kapsayabilir.</p>
</div>
<div class="paragraph">
<p><code>%prep</code>, "Hazırlamak" kelimesinin İngilize karşılığı olan <em>prepare</em> kelimesinin kısaltmasıdır. Yazılımı derlemek için gerekli olan ortamı veya çalışma alanını inşa etmek için kullanılır. Çoğu zaman burada olan şey; arşivlerin açılması, yamaların uygulanması ve kaynak kodda gerekebilecek bilginin taranmasıdır ki bu bilgiler SPEC dosyasının sonraki bölümlerinde kullanılacaktır. Bu bölümde kısa yoldan işimizi göreceğinden <code>%setup -q</code> makrosunu kullanacağız.</p>
</div>
<div class="paragraph">
<p><code>%build</code> ise paketlediğimiz yazılımın nasıl derlenmesi/inşa edilmesi gerektiğini bildiren kısımdır.
<a href="https://tr.wikipedia.org/wiki/C_(programlama_dili)">C</a>
ile yazdığımız programımız için basit bir <code>Makefile</code> yazdığımızdan dolayı,<code>rpmdev-newspec</code> komutunun bizim için hazırladığı <a href="http://www.gnu.org/software/make/">GNU make</a> komutunu kolayca kullanabiliriz. Ancak, bir
<a href="https://tr.wikipedia.org/wiki/Configure" class="bare">https://tr.wikipedia.org/wiki/Configure</a>["configure" (yapılandırma) betiği
hazırlamadığımız için <code>%configure</code> yönergesini kaldırmamız gerekmektedir.</p>
</div>
<div class="paragraph">
<p>Kodumuzun <code>%build</code> kısmı aşağıdakine benzemelidir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">%build
make %{?_smp_mflags}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>%install</code> kısmı ise <code>rpmbuild</code>'in dosyaları nasıl kurması gerektiğini bildiren yönergeleri içerir. Bu dizinde inşa edilen dosyalar <code>BUILDROOT</code> dizinine eklenir. Bu dizin, bir
<a href="https://en.wikipedia.org/wiki/Chroot">chroot</a>
temel dizinidir ve paketi kuran tarafın kök dizinini temsil eder. Yapmamız gereken şey kurduğumuz dosyaların dizinlerini oluşturmaktır. Buradaki RPM Makroları, bu işi gerçekleştirirken değişmez kalıp kodlardan kaçınmamıza yardımcı olur.</p>
</div>
<div class="paragraph">
<p>Tekrar bahsetmek gerekirse, elimizdeki <code>Makefile</code> dosyasındaki kurulum talimatları kolaylıkla <code>rpmdev-newspec</code> tarafından sağlanmış olan <code>%make_install</code> makrosu aracılığıyla kurulabilir.</p>
</div>
<div class="paragraph">
<p>Bütün değişikliklerden sonra <code>%install</code> yönergesi aşağıdaki şekilde görünmelidir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">%install
%make_install</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>%files</code> kısmı, RPM paketinin içerdiği dosyaları ve paketin kurulacağı sisteme yerleştirilmesi planlanan dosyaları belirttiğimiz kısımdır.</p>
</div>
<div class="paragraph">
<p>Dikkat etmeniz gereken bir husus, bu kısmın <code>%{buildroot}</code>'a göre yazılmaması gerektiğidir çünkü buradaki dosyalar, paketi kuran kullanıcının sisteminde kurulumdan sonra belirlenecek tam konuma göre belirtilmelidir. Bu yüzden, <code>celaba</code> dosyasının sistemdeki konumunu belirtirken <code>%{_bindir}/celaba</code> olarak belirtmemiz gerekmektedir.</p>
</div>
<div class="paragraph">
<p>Ayrıca bu kısımda, bir dosyanın içeriğinde ne olduğunu belirtmek üzere bazı gömülü makroları kullanmaya ihtiyacınız olacaktır. Bu, <code>rpm</code> komutunun çıktısını sorgulamak isteyen sistem yöneticileri ve son kullanıcılar için oldukça kullanışlı olabilir. Burada kullanacağımız <code>%license</code> gömülü makrosu, <code>rpmbuild</code>'e bu dosyanın yazılım lisansını içerdiğini bildirecektir.</p>
</div>
<div class="paragraph">
<p><code>%files</code> kısmı, son değişikliklerden sonra şu şekilde görünmelidir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">%files
%license LICENSE
%{_bindir}/%{name}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Son kısım olan <code>%changelog</code>'da, tarih damgalı girdiler Sürüm-Yayın değişikliklerinde ne olduğunun kaydını tutmak içindir. Bu günlükte her değişikliğin yazılması gerekmez ancak her önemli paketleme değişikliklerinin belirtilmesi gereklidir. Örneğin, bir paket içerisindeki yazılımın paketlemeye ihtiyacı varsa veya <code>%build</code> kısmında gösterilen derleme yönteminin değiştirilmesi gerekiyorsa burada bilgi verilebilir. Her bir girdi birden fazla maddeyi içerebilir, ve her madde <code>-</code> karakteriyle başlayan yeni bir satırla başlamalıdır.
Aşağıda örnek bir girdi görmektesiniz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">%changelog
* Tue May 31 2016 Adam Miller &lt;maxamillion@fedoraproject.org&gt; - 0.1-1
- İlk celaba paketi
- 1.0-1 sürüm - yayın için öylesine bir ikinci madde</code></pre>
</div>
</div>
<div class="paragraph">
<p>Yukarıdaki örnekte dikkat etmelisiniz ki, tarih damgası <code>*</code> karakteriyle başlamalıdır ve günün adının ardından ay, gün,yıl şeklinde tarih atılmalı ve RPM paketçisi hakkındaki iletişim bilgileri formatıyla hazırlanmalıdır. Ardından, Sürüm (Version) - Yayın&#8217;dan (Release) önce <code>-</code> karakterini yerleştirdik, bu alışılagelen bir yaklaşımdır ancak zorunlu değildir.</p>
</div>
<div class="paragraph">
<p>Ve hepsi bu kadar! <strong>celaba</strong> için bütün SPEC dosyasını yazmış bulunmaktayız. Bundan sonraki kısımda bir RPM dosyası nasıl inşa edilir, bunu okuyacaksınız.</p>
</div>
<div class="paragraph">
<p>Bütün SPEC dosyası aşağıdaki gibi olmalıdır:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Name:           celaba
Version:        1.0
Release:        1%{?dist}
Summary:        C ile Yazılmış Bir Merhaba Dünya örneği

License:        GPLv3+
URL:            https://www.example.com/%{name}
Source0:        https://www.example.com/%{name}/releases/%{name}-%{version}.tar.gz

Patch0:         celaba-ciktisi-ilk-yama.patch

BuildRequires:  gcc
BuildRequires:  make

%description
C ile yazılmış Merhaba Dünya örneği için
satırlara sığmayan
epey uzun bir
tanıtım yazısı

%prep
%setup -q

%patch0

%build
make %{?_smp_mflags}

%install
%make_install


%files
%license LICENSE
%{_bindir}/%{name}


%changelog
* Tue May 31 2016 Adam Miller &lt;maxamillion@gmail.com&gt; - 1.0-1
- İlk celaba paketi</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>rpmdevtools</code> paketi aynı zamanda popüler programlama dilleri için pek çok SPEC dosyası örneği içerir.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="rpm-insa-etmek">RPMleri İnşa Etmek</h3>
<div class="paragraph">
<p>RPMler <code>rpmbuild</code> komutu aracılığıyla inşa edilirler. Farklı senaryolara ve istenen sonuçlara göre <code>rpmbuild</code> komutu farklı parametreler gerektirir. Bu kısımda, iki ana senaryoyu ele alacağız:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>kaynak RPM inşa etmek</p>
</li>
<li>
<p>ikili RPM inşa etmek</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>rpmbuild</code> komutu belirli bir dizin ve dosya yapısını gerektirir ki bu yapı <code>rpmdev-setuptree</code> aracıyla hazırlanmış yapının birebir aynısıdır. Aynı şekilde daha önceki talimatlar da gerekli olan bu yapıya uygundur.</p>
</div>
<div class="sect3">
<h4 id="kaynak-rpmler">Kaynak RPMler</h4>
<div class="paragraph">
<p>Neden kaynak RPM (SRPM) inşa etmeliyiz?</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Yayını yapılmış bir RPM&#8217;in İsim-Sürüm-Yayın yapısına özgü gerçek kaynağı korumak için. Kaynak RPMler SPEC dosyasını, kaynak kodunu ve ilişkili yamaları barındırır. Bu tür paketler geri dönüp ne olduğunu incelemek ve hata ayıklamak için kullanışlıdır.</p>
</li>
<li>
<p>Çeşitli donanım platformları veya <a href="https://tr.wikipedia.org/wiki/Bilgisayar_organizasyonu">işlemci mimarileri</a> için RPM inşa edebilmek için</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="kaynak-rpm-insa-etmek">Kaynak RPM inşa etmek:</h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpmbuild -bs _SPECDOSYASİ_</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>SPECDOSYASİ</em> ile SPEC dosyasının konumunu değiştirin. <code>-bs</code> ise kaynak kodu için kullanılan bir parametredir ve "build source" kelimelerinin kısaltmasından oluşur.</p>
</div>
<div class="paragraph">
<p>Şimdi <code>belaba</code>,<code>pelaba</code> ve <code>celaba</code> için kaynak RPM inşa edeceğiz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ cd ~/rpmbuild/SPECS/

$ rpmbuild -bs belaba.spec
Wrote: /home/admiller/rpmbuild/SRPMS/belaba-0.1-1.el7.src.rpm

$ rpmbuild -bs pelaba.spec
Wrote: /home/admiller/rpmbuild/SRPMS/pelaba-0.1.1-1.el7.src.rpm

$ rpmbuild -bs celaba.spec
Wrote: /home/admiller/rpmbuild/SRPMS/celaba-1.0-1.el7.src.rpm</code></pre>
</div>
</div>
<div class="paragraph">
<p>İnşa edilecek olan kaynak RPMlerinin (İngilizce: Source RPM, SRPM) <code>rpmbuild/SRPM</code> dizinine yerleştirileceğine dikkat ediniz ki bu dizin <code>rpmbuild</code> komutunun gerektirdiği dizinlerden birisidir.</p>
</div>
<div class="paragraph">
<p>Kaynak RPM derlemek için gerekli olan her şey budur.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ikili-rpmler">İkili RPMler</h4>
<div class="paragraph">
<p>İkili RPM inşa etmek için iki yöntem vardır:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Kaynak RPM&#8217;i <code>rpmbuild --rebuild</code> komutuyla yeniden derlemek.</p>
</li>
<li>
<p><code>rpmbuild -bb</code> komutunu kullanarak SPEC dosyasından inşa etmek. <code>-bb</code> parametresi, Türkçesi "ikili inşa" olan "build binary" kelimelerinin kısaltmasıdır.</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="yeniden-insa">Kaynak RPM&#8217;i Yeniden İnşa Etmek</h5>
<div class="paragraph">
<p><code>belaba</code>, <code>pelaba</code>, ve <code>celaba</code>'yı yeniden inşa etmek için:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpmbuild --rebuild ~/rpmbuild/SRPMS/belaba-0.1-1.el7.src.rpm
[çıktı törpülendi]

$ rpmbuild --rebuild ~/rpmbuild/SRPMS/pelaba-0.1.1-1.el7.src.rpm
[çıktı törpülendi]

$ rpmbuild --rebuild ~/rpmbuild/SRPMS/celaba-1.0-1.el7.src.rpm
[çıktı törpülendi]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ve RPM paketlerini inşa etmiş bulunmaktasınız. Şimdi, birkaç detay:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>İkili RPM&#8217;in inşasında üretilen çıktı gayet ayrıntılıdır ki bu hata ayıklamak için kullanışlıdır. Çıktı, SPEC dosyasına ve farklı örneklere göre farklılık gösterir.</p>
</li>
<li>
<p>İkili RPMler <code>~/rpmbuild/RPMS/MIMARIADI</code> isimli bir dosyaya yerleştirilir. <code>MIMARIADI</code>,
<a href="https://tr.wikipedia.org/wiki/Bilgisayar_organizasyonu">işlemci mimarisine</a>
tekabül eder. Eğer paket bir mimariye özgü değilse <code>~/rpmbuild/RPMS/noarch</code> dizini içerisindedir.</p>
</li>
<li>
<p><code>rpmbuild --rebuild</code> komutunu çalıştırınca adım adım şu olaylar gerçekleşir:</p>
<div class="openblock">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>~/rpmbuild</code> dizini içerisine SRPM&#8217;in içerdiği SPEC dosyasını ve kaynak kodlarını yerleştirir.</p>
</li>
<li>
<p><code>~/rpmbuild</code> içerisindekiler derlenir.</p>
</li>
<li>
<p>SPEC dosyası da kaynak kodu da temizlenir.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>Eğer SPEC dosyasını ve kaynak kodunu derlendikten sonra da saklamak isterseniz, iki seçeneğiniz var:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>İnşa sırasında, <code>--rebuild</code> yerine <code>--recompile</code> parametresini kullanın.</p>
</li>
<li>
<p>Kaynak RPMleri şu komutlarla kurun:</p>
</li>
</ul>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpm -Uvh ~/rpmbuild/SRPMS/belaba-0.1-1.el7.src.rpm
Updating / installing...
   1:belaba-0.1-1.el7                  ################################# [100%]

$ rpm -Uvh ~/rpmbuild/SRPMS/pelaba-0.1.1-1.el7.src.rpm
Updating / installing...
   1:pelaba-0.1.1-1.el7                ################################# [100%]

$ rpm -Uvh ~/rpmbuild/SRPMS/celaba-1.0-1.el7.src.rpm
Updating / installing...
   1:celaba-1.0-1.el7                  ################################# [100%]</code></pre>
</div>
</div>
<div class="paragraph">
<p>SPEC dosyası ve kaynak kodlarıyla etkileşimi sürdürmek için, gördüğünüz gibi, <code>rpm -Uvh</code> komutunu kullanmanız gerekmektedir.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="ikili-insa">İkili Paketi SPEC dosyasından inşa etmek</h5>
<div class="paragraph">
<p><code>belaba</code>, <code>pelaba</code> ve <code>celaba</code>yı SPEC dosyalarından inşa edebilmek için, şu komutları çalıştırın:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpmbuild -bb ~/rpmbuild/SPECS/belaba.spec

$ rpmbuild -bb ~/rpmbuild/SPECS/pelaba.spec

$ rpmbuild -bb ~/rpmbuild/SPECS/celaba.spec</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hepsi bu kadar! SPEC dosyalarından RPMleri inşa etmiş bulunmaktasınız.</p>
</div>
<div class="paragraph">
<p><a href="#yeniden-insa">Kaynak RPM&#8217;i Yeniden İnşa Etmek</a> kısmındaki bilgilerin çoğunluğu burada da geçerlidir.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="checking-rpms-for-sanity">RPMlerin Geçerliliğini Denetleme</h3>
<div class="paragraph">
<p>Bir paketi oluşturduktan sonra paket kalitesini test etmek hiç de fena bir fikir değildir. Paketin kalitesinden kasıt, paketin sunduğu yazılım değil paketin kendi kalitesidir. Bu denetimi yapmak üzere kullanılan ana araç <a href="https://github.com/rpm-software-management/rpmlint">rpmlint</a>'dır. Bu araç sayesinde RPM&#8217;nin bakımı kolaylaşır, paketin geçerlilik denetimi ve statik hata analizi iyileşir.</p>
</div>
<div class="paragraph">
<p><code>rpmlint</code>'in oldukça sıkı ilkelere sahip olduğa dikkat ediniz. Sonraki örneklerde göreceğiniz gibi, kimi zaman hata ve uyarı mesajlarını es geçmek sıkıntı yaratmaz.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Göreceğiniz örneklerde <code>rpmlint</code> bize gayet sade bir çıktı sunmakta. Eğer hataların ve uyarıların detaylı bir çıktısını istiyorsanız, bu komut yerine <code>rpmlint -i</code> komutunu kullanabilirsiniz.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="belaba-spec-dosyasini-denetlemek">Belaba SPEC dosyasını Denetlemek</h4>
<div class="paragraph">
<p><code>belaba</code> için <code>rpmlint</code> çıktısı şöyledir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpmlint belaba.spec
belaba.spec: W: invalid-url Source0: https://www.example.com/belaba/releases/belaba-0.1.tar.gz HTTP Error 404: Not Found
0 packages and 1 specfiles checked; 0 errors, 1 warnings.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gözlemlenenler:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>belaba.spec</code> için elimizde tek bir uyarı var ki bu da <code>Source0</code> yönergesindeki bağlantıya ulaşamadığından bahsediyor. Bu anlaşılmayacak bir şey değil, çünkü <code>example.com</code> adresinde belirttiğimiz dosya yok. Yine de belki gelecekte bağlantının geçerli olabileceğini varsayarak, bu uyarıyı görmezden gelebiliriz.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Bu da <code>belaba</code> kaynak RPM paketi için <code>rpmlint</code> çıktısı:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpmlint ~/rpmbuild/SRPMS/belaba-0.1-1.el7.src.rpm
belaba.src: W: invalid-url URL: https://www.example.com/belaba HTTP Error 404: Not Found
belaba.src: W: invalid-url Source0: https://www.example.com/belaba/releases/belaba-0.1.tar.gz HTTP Error 404: Not Found
1 packages and 0 specfiles checked; 0 errors, 2 warnings.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gözlemlenenler:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Belaba</code> kaynak RPM paketi için <code>URL</code> yönergesindeki bağlantının ulaşılamaz olmasıyla ilgili fazladan bir uyarımız daha var. Gelecekte bu bağlantının geçerli olacağını varsayarak, bu uyarıyı da gözardı edebiliriz.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="ikili-belaba-rpm-denetimi">Belaba&#8217;nın İkili RPM&#8217;ini Denetleme</h4>
<div class="paragraph">
<p>İkili RPMleri denetlerken, <code>rpmlint</code> şu detayları da incelemekte:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Belgelendirme</p>
</li>
<li>
<p><a href="https://tr.wikipedia.org/wiki/Man_(elkitabı)_sayfası">Man (elkitabı) sayfaları</a></p>
</li>
<li>
<p>Dosya Sistemi Hiyerarşisi Standartıı&#8217;nın doğru kullanımı</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>belaba</code> ikili dosyası için <code>rpmlint</code> çıktısı şu şekildedir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpmlint ~/rpmbuild/RPMS/noarch/belaba-0.1-1.el7.noarch.rpm
belaba.noarch: W: invalid-url URL: https://www.example.com/belaba HTTP Error 404: Not Found
belaba.noarch: W: no-documentation
belaba.noarch: W: no-manual-page-for-binary belaba
1 packages and 0 specfiles checked; 0 errors, 3 warnings.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gözlemlenenler:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>no-documentation</code> (Tr. belgelendirme yok) ve <code>no-manual-page-for-binary</code> (Tr. ikili (paket) için man sayfası yok) uyarıları RPM paketimizin belgeleri olmadığını gösteriyor, çünkü böyle bir şey sağlamadık.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Uyarıları görmezden gelirsek, RPM paketimiz <code>rpmlint</code> denetiminden geçmiş sayılır.</p>
</div>
</div>
<div class="sect3">
<h4 id="pelaba-spec-dosyasini-denetlemek">Pelaba SPEC Dosyasını Denetlemek</h4>
<div class="paragraph">
<p><code>Pelaba</code>'nın SPEC dosyası için <code>rpmlint</code> çıktısı şöyledir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpmlint pelaba.spec
pelaba.spec:30: E: hardcoded-library-path in %{buildroot}/usr/lib/%{name}
pelaba.spec:34: E: hardcoded-library-path in /usr/lib/%{name}/%{name}.pyc
pelaba.spec:39: E: hardcoded-library-path in %{buildroot}/usr/lib/%{name}/
pelaba.spec:43: E: hardcoded-library-path in /usr/lib/%{name}/
pelaba.spec:45: E: hardcoded-library-path in /usr/lib/%{name}/%{name}.py*
pelaba.spec: W: invalid-url Source0: https://www.example.com/pelaba/releases/pelaba-0.1.1.tar.gz HTTP Error 404: Not Found
0 packages and 1 specfiles checked; 5 errors, 1 warnings.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gözlemlenenler:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>invalid-url Source0</code> (Tr. Source0 için geçerli adres) uyarısı Source0&#8217;da belirtilen adresin geçersiz olduğuna işaret etmekte. Bu beklenen bir durum, çünkü <code>example.com</code> adresindeki dosya yok. Gelecekte bu adresin çalışacağını varsayarak bu uyarıyı görmezden gelebiliriz.</p>
</li>
<li>
<p>Pek çok hata var, çünkü kasıtlı olarak SPEC dosyasını gerekenden daha basit yazdık ve <code>rpmlint</code> bunu raporluyor.</p>
</li>
<li>
<p><code>hardcoded-library-path</code> (Tr. elle belirtilmiş konum) hatası, elle kütüphane konumu yerine <code>%{_libdir}</code> kullanmamızı öneriyor. Şimdilik bu örnek için bu hatayı görmezden gelebiliriz, ancak gelecekte hazırlayacağınız paketlerde bu hatayı görmezden gelmek için iyi bir nedene ihtiyacınız var.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>Pelaba</code>'nın kaynak RPM&#8217;inin <code>rpmlint</code> çıktısı şu şekildedir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpmlint ~/rpmbuild/SRPMS/pelaba-0.1.1-1.el7.src.rpm
pelaba.src: W: invalid-url URL: https://www.example.com/pelaba HTTP Error 404: Not Found
pelaba.src:30: E: hardcoded-library-path in %{buildroot}/usr/lib/%{name}
pelaba.src:34: E: hardcoded-library-path in /usr/lib/%{name}/%{name}.pyc
pelaba.src:39: E: hardcoded-library-path in %{buildroot}/usr/lib/%{name}/
pelaba.src:43: E: hardcoded-library-path in /usr/lib/%{name}/
pelaba.src:45: E: hardcoded-library-path in /usr/lib/%{name}/%{name}.py*
pelaba.src: W: invalid-url Source0: https://www.example.com/pelaba/releases/pelaba-0.1.1.tar.gz HTTP Error 404: Not Found
1 packages and 0 specfiles checked; 5 errors, 2 warnings.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gözlemlenenler:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Şimdi gördüğümüz <code>invalid-url URL</code> (Tr. geçersiz adres) hatası henüz ulaşılamayan <code>URL</code> yönergesiyle ilgilidir. Gelecekte bu adresin kullanılabilir olacağını düşünerek bu hatayı görmezden gelebiliriz.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="pelaba-ikili-rpm-denetlemek">İkili Pelaba RPM&#8217;ini Denetlemek</h4>
<div class="paragraph">
<p>İkili RPMleri denetlerken, <code>rpmlint</code> şu detayları da incelemektedir:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Belgelendirme</p>
</li>
<li>
<p><a href="https://tr.wikipedia.org/wiki/Man_(elkitabı)_sayfası">Man (elkitabı) sayfaları</a></p>
</li>
<li>
<p>Dosya Sistemi Hiyerarşisi Standartı&#8217;nın doğru kullanımı</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>Pelaba</code>'nın ikili RPM&#8217;inin <code>rpmlint</code> çıktısı şu şekildedir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpmlint ~/rpmbuild/RPMS/noarch/pelaba-0.1.1-1.el7.noarch.rpm
pelaba.noarch: W: invalid-url URL: https://www.example.com/pelaba HTTP Error 404: Not Found
pelaba.noarch: W: only-non-binary-in-usr-lib
pelaba.noarch: W: no-documentation
pelaba.noarch: E: non-executable-script /usr/lib/pelaba/pelaba.py 0644L /usr/bin/env
pelaba.noarch: W: no-manual-page-for-binary pelaba
1 packages and 0 specfiles checked; 1 errors, 4 warnings.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gözlemlenenler</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>no-documentation</code> (Tr. belgelendirme yok) ve <code>no-manual-page-for-binary</code> (Tr. ikili (paket) için man sayfası yok) uyarıları RPM paketimizin belgeleri olmadığını gösteriyor, çünkü böyle bir şey sağlamadık.</p>
</li>
<li>
<p><code>only-non-binary-in-usr-lib</code> uyarısı, <code>/usr/lib</code> dizini içerisinde ikili olmayan yapıları eklediğimizi belirtiyor. Bu dizin, ikili dosya olması gereken paylaşımlı nesne dosyaları içindir. Bundan dolayı, <code>rpmlint</code>, <code>/usr/lib</code> içerisine ekleyeceğimiz bir veya birden fazla dosyanın ikili olmasını bekler.</p>
<div class="paragraph">
<p>Bu örnek, <code>rpmlint</code>in nasıl
<a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard">Dosya hiyerarşisi standartını</a>
koruduğunu gösterir.
.</p>
</div>
<div class="paragraph">
<p>Genellikle RPM makroları aracılığıyla dosyaları doğru konumlarına yerleştiririz. Yalnızca bu örnek için, bu uyarıyı görmezden geliyoruz.</p>
</div>
</li>
<li>
<p><code>non-executable-script</code> (Tr. Çalıştırılamayan betik) hatası <code>/usr/lib/pelaba/pelaba.py</code> dosyasının çalıştırma yetkileri olmadığını belirtiyor. Bu dosya, bir
<a href="https://en.wikipedia.org/wiki/Shebang_%28Unix%29">mevzu</a>
içerdiğinden dolayı <code>rpmlint</code> dosyanın çalıştırılabilir olmasını bekliyor. Şimdilik, bu dosyaya çalıştırma yetkileri vermiyoruz ve hatayı görmezden geliyoruz.
, <code>rpmlint</code> expects</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Yukarıdaki hatalar ve uyarıları görmezsek, RPM&#8217;imiz <code>rpmlint</code> denetimini geçti sayılır.</p>
</div>
</div>
<div class="sect3">
<h4 id="celaba-spec-denetlemek">Celaba&#8217;nın SPEC Dosyasını Denetleme</h4>
<div class="paragraph">
<p><code>Celaba</code>'nın SPEC dosyası için <code>rpmlint</code> çıktısı şöyledir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpmlint ~/rpmbuild/SPECS/celaba.spec
/home/admiller/rpmbuild/SPECS/celaba.spec: W: invalid-url Source0: https://www.example.com/celaba/releases/celaba-1.0.tar.gz HTTP Error 404: Not Found
0 packages and 1 specfiles checked; 0 errors, 1 warnings.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gözlemlenenler:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>celaba.spec</code> için elimizde tek bir uyarı var ki bu da <code>Source0</code> yönergesindeki bağlantıya ulaşamadığından bahsediyor. Bu anlaşılmayacak bir şey değil, çünkü <code>example.com</code> adresinde belirttiğimiz dosya yok. Yine de belki gelecekte bağlantının geçerli olabileceğini varsayarak, bu uyarıyı görmezden gelebiliriz.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>Celaba</code>'nın kaynak RPM&#8217;inin <code>rpmlint</code> çıktısı şu şekildedir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpmlint ~/rpmbuild/SRPMS/celaba-1.0-1.el7.src.rpm
celaba.src: W: invalid-url URL: https://www.example.com/celaba HTTP Error 404: Not Found
celaba.src: W: invalid-url Source0: https://www.example.com/celaba/releases/celaba-1.0.tar.gz HTTP Error 404: Not Found
1 packages and 0 specfiles checked; 0 errors, 2 warnings.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gözlemlenenler:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Şimdi gördüğümüz <code>invalid-url URL</code> (Tr. geçersiz adres) hatası henüz ulaşılamayan <code>URL</code> yönergesiyle ilgilidir. Gelecekte bu adresin kullanılabilir olacağını düşünerek bu hatayı görmezden gelebiliriz.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="celaba-ikili-rpm-denetlemek">Celaba İkili RPM&#8217;inin</h4>
<div class="paragraph">
<p>İkili RPMleri denetlerken, <code>rpmlint</code> şu detayları da incelemektedir:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Belgelendirme</p>
</li>
<li>
<p><a href="https://tr.wikipedia.org/wiki/Man_(elkitabı)_sayfası">Man (elkitabı) sayfaları</a></p>
</li>
<li>
<p>Dosya Sistemi Hiyerarşisi Standartı&#8217;nın doğru kullanımı
.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>Celaba</code>'nın ikili RPM&#8217;inin <code>rpmlint</code> çıktısı şu şekildedir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpmlint ~/rpmbuild/RPMS/x86_64/celaba-1.0-1.el7.x86_64.rpm
celaba.x86_64: W: invalid-url URL: https://www.example.com/celaba HTTP Error 404: Not Found
celaba.x86_64: W: no-documentation
celaba.x86_64: W: no-manual-page-for-binary celaba
1 packages and 0 specfiles checked; 0 errors, 3 warnings.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gözlemlenenler</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>no-documentation</code> (Tr. belgelendirme yok) ve <code>no-manual-page-for-binary</code> (Tr. ikili (paket) için man sayfası yok) uyarıları RPM paketimizin belgelerinin olmadığını gösteriyor, çünkü böyle bir şey sağlamadık.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Uyarıları görmezden gelirsek, RPM paketimiz <code>rpmlint</code> denetiminden geçmiş sayılır.</p>
</div>
<div class="paragraph">
<p>Ve RPMlerimiz hazır olduğu gibi <code>rpmlint</code> testinden de geçti. Bu kısım yalnızca nasıl RPM paketleneceğini anlatan bir rehberdi, daha fazla bilgi için <a href="#ileri-duzey-konular">İleri Düzey Konular</a> kısmına göz atabilirsiniz.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ileri-duzey-konular">İleri Düzey Konular</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Bu bölüm, giriş seviyesi rehberlerden daha ileri konuları ele alır ancak bu konular RPM paketlemenin gerçek hayattaki kullanımı için yararlı bilgiler içerir.</p>
</div>
<div class="sect2">
<h3 id="paketleri-imzalamak">Paketleri İmzalamak</h3>
<div class="paragraph">
<p>Paketleri imzalamak, son kullanıcı için paketi güvenilir kılmanın bir yoludur. Kurulumdan önce paketi indirdiğiniz zaman HTTPS protokolü uygulamasıyla güvenli iletim sağlanabilir. Fakat kimi zaman paketler önceden indirilip daha sonra kullanılmadan önce yerel depolarda saklanırlar. Daha önceden üçüncü parti tarafından içeriğinin değiştirilmediğine emin olmak için bu paketler imzalanır.</p>
</div>
<div class="paragraph">
<p>Paketleri imzalamanın üç yolu vardır:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#pakete-imza-eklemek">Hazır bir pakete imza eklemek</a></p>
</li>
<li>
<p><a href="#paket-imzasini-degistirmek">Hazır bir paketin imzasını değiştirmek</a></p>
</li>
<li>
<p><a href="#insa-zamani-imzalamak">İnşa zamanı paketi imzalamak</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="pakete-imza-eklemek">Pakete İmza Eklemek</h4>
<div class="paragraph">
<p>Çoğu zaman paketler imzalanmadan inşa edilirler. Paketler yayınlanmadan önce imza eklenir.</p>
</div>
<div class="paragraph">
<p>Paketlere imza ekmek için, <code>--addsign</code> parametresini kullanın. Paketin birden fazla imzaya sahip olması, paketi inşa edenden son kullanıcıya kadar giden yolda kimden kime geçtiğinin kaydedilmesini mümkün kılar.</p>
</div>
<div class="paragraph">
<p>Mesela, bir şirketin bir bölümünün bir paketin oluşturduğunu ve bu bölümün anahtarıyla imzalandığını düşünün. Şirketin üst düzey yöneticileri bu paketi inceleyip onaylamak için kendi şirket imzalarını ekleyebilir.</p>
</div>
<div class="paragraph">
<p>Bu iki imza ile beraber, paket satıcıya ulaşır. Satıcı da imzaları ve paketi inceleyeyip kendi imzasını da üzerine ekleyebilir.</p>
</div>
<div class="paragraph">
<p>Şimdi paketi dağıtmayı düşünen başka bir firmaya gidebilir. Bu paketteki her bir imzanın incelenmesinin ardından, bu şirket paketin orijinal kopyası olduğunu ve ilk kez oluşturulduktan sonra değiştirilmediğine emin olabilir. Dağıtımcı firmanın iç deneyimleri sonrasında, onlar da kendi imzalarını, firmalarından onay aldığını göstermek üzere eklemeyi düşünebilirler.</p>
</div>
<div class="paragraph">
<p><code>--addsign</code> çıktısı şu şekildedir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpm --addsign blather-7.9-1.i386.rpm
            Enter pass phrase:

Pass phrase is good.
blather-7.9-1.i386.rpm:</code></pre>
</div>
</div>
<div class="paragraph">
<p>Birden çok imzaya sahip paketi incelemek için:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpm --checksig blather-7.9-1.i386.rpm
blather-7.9-1.i386.rpm: size pgp pgp md5 OK</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>rpm --checksig</code> çıktısındaki <code>pgp</code> metni paketin daha önce iki kez imzalandığını belirtmektedir.</p>
</div>
<div class="paragraph">
<p>Aynı şekilde, RPM aynı imzanın birden fazla kez eklenebilmesine izin verir. <code>--addsign</code> parametresi imzaların birden fazla olup olmadığını denetlemez.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpm --addsig blather-7.9-1.i386.rpm
              Enter pass phrase:

Pass phrase is good.
blather-7.9-1.i386.rpm:
$ rpm --addsig blather-7.9-1.i386.rpm
              Enter pass phrase:

Pass phrase is good.
blather-7.9-1.i386.rpm:
$ rpm --addsig blather-7.9-1.i386.rpm
              Enter pass phrase:

Pass phrase is good.
blather-7.9-1.i386.rpm:
$ rpm --checksig blather-7.9-1.i386.rpm
blather-7.9-1.i386.rpm: size pgp pgp pgp pgp md5 OK</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>rpm --checksig</code> komutunun çıktısı dört imza sayacaktır.</p>
</div>
<div class="paragraph">
<p>The output of the <code>rpm --checksig</code> command displays four signatures.</p>
</div>
</div>
<div class="sect3">
<h4 id="paket-imzasini-degistirmek">Paket İmzasını Değiştirmek</h4>
<div class="paragraph">
<p>Paketi yeniden inşa etmeden imzasını değiştirmek için, <code>--resign</code> parametresini kullanın.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpm --resign blather-7.9-1.i386.rpm
            Enter pass phrase:

Pass phrase is good.
blather-7.9-1.i386.rpm:</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>--resign</code> parametresini birden çok paket dosyası üzerinde kullanmak için:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpm --resign b*.rpm
            Enter pass phrase:

Pass phrase is good.
blather-7.9-1.i386.rpm:
bother-3.5-1.i386.rpm:</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="insa-zamani-imzalamak">İnşa zamanı imzalamak</h4>
<div class="paragraph">
<p>İnşa zamanı esnasında bir paketi imzalamak için <code>rpmbuild</code> komutunu <code>--sign</code> parametresiyle kullanın. Bu, PGP parolasının (passphrase) girilmesini gerektirir.</p>
</div>
<div class="paragraph">
<p>Örnek:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpmbuild -ba --sign blather-7.9.spec
            Enter pass phrase:

Pass phrase is good.
* Package: blather
…
Binary Packaging: blather-7.9-1
Finding dependencies...
…
Generating signature: 1002
Wrote: /usr/src/redhat/RPMS/i386/blather-7.9-1.i386.rpm
…
Source Packaging: blather-7.9-1
…
Generating signature: 1002
Wrote: /usr/src/redhat/SRPMS/blather-7.9-1.src.rpm</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hem ikili hem kaynak paket derlerken ayrıca "Generating signature" (Tr. İmza üretiliyor) imzasına denk gelmekteyiz. Bu mesajın ardından gelen sayı ise PGP ile oluşturulmuş imzayı belirtir.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p><code>rpmbuild</code> için <code>sign</code> parametresi aracılığıyla imza eklerken paket derlemek için yalnızca <code>-bb</code> ve <code>-ba</code> kullanılmalıdır. <code>-ba</code>, ikili <strong>ve</strong> kaynak paket inşa etme anlamına gelir.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Bir paketin imzalasını doğrulamak için <code>rpm</code> komutunu <code>--checksig</code> parametresiyle birlikte kullanın. Örneğin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpm --checksig blather-7.9-1.i386.rpm
blather-7.9-1.i386.rpm: size pgp md5 OK</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="birden-cok-paket-insa-etmek">Birden Çok Paket İnşa Etmek</h5>
<div class="paragraph">
<p>Birden çok paketi inşa ederken, sürekli PGP parolarını girmekten kaçınmak için aşağıdaki sözdizimini kullanın. Mesela, <code>blather</code> ve <code>bother</code> paketlerini şu şekilde bir defa imzalayabilirsiniz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpmbuild -ba --sign b*.spec
              Enter pass phrase:

Pass phrase is good.
* Package: blather
…
Binary Packaging: blather-7.9-1
…
Generating signature: 1002
Wrote: /usr/src/redhat/RPMS/i386/blather-7.9-1.i386.rpm
…
Source Packaging: blather-7.9-1
…
Generating signature: 1002
Wrote: /usr/src/redhat/SRPMS/blather-7.9-1.src.rpm
…
* Package: bother
…
Binary Packaging: bother-3.5-1
…
Generating signature: 1002
Wrote: /usr/src/redhat/RPMS/i386/bother-3.5-1.i386.rpm
…
Source Packaging: bother-3.5-1
…
Generating signature: 1002
Wrote: /usr/src/redhat/SRPMS/bother-3.5-1.src.rpm</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="mock">Mock</h3>
<div class="paragraph">
<p><a href="https://github.com/rpm-software-management/mock/wiki">Mock</a> (Tr. Taklit) paketleri inşa etmek için bir araçtır. Farklı mimariler ve farklı Fedora/RHEL sürümleri için paket inşa edebilir. Mock, yeni chrootlar oluşturur ve paketleri içinde inşa eder. Tek görevi, chrootu eksiksiz bir şekilde doldurmak ve bu chroot paket inşa inşa etmeyi denemektir.</p>
</div>
<div class="paragraph">
<p>Mock aynı şekilde birbirine bağımlı paketler zincirini inşa edebilen <code>mockchain</code> isimli bir çoklu-paketleme aracı da sunar.</p>
</div>
<div class="paragraph">
<p>Mock, kaynak yapılandırmasına göre kaynak RPMler inşa edebilir, eğer <code>mock-scm</code> paketi mevcutsa kaynak RPMleri RPMlere de dönüştürebilir, yazılımın belgelerinden -scm-enable kısmını inceleyiniz.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<a href="https://github.com/rpm-software-management/mock/wiki">Mock</a>'u bir RHEL veya CentOS sistemde kullanmak istiyorsanız "Extra Packages for Enterprise Linux" (Tr. Enterprise Linux için ek paketler) <a href="https://fedoraproject.org/wiki/EPEL">EPEL</a> deposunu aktifleştirmeniz gerekmektedir. Bu depo <a href="https://getfedora.org/">Fedora</a> topluluğu tarafından sağlanmaktadır ve sistem yöneticileri, geliştiriciler ve RPM paketçileri için faydalı araçlar sunar.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>RPM paketçilerinin <a href="https://github.com/rpm-software-management/mock/wiki">Mock</a>'u kullanmalarının en yaygın sebeplerinden birisi "saf inşa ortamı" yaratabilmektir. Mock&#8217;u "saf inşa ortamı" olarak kullanırsanız sisteminizin mevcut durumu RPM paketinin hiçbir kısmını etkilenmez. Mock, sisteminizde inşa "hedef"ini belirtmek üzere çeşitli yapılandırmalar kullanır, bunları (mock paketini kurduysanız) <code>/etc/mock</code> dizininde bulabilirsiniz. Sadece komut satırında dağıtımı veya sürümü belirterek, o sistem için paket inşa edebilirsiniz. Unutulmaması gereken, <code>mock</code> ile beraber gelen yapılandırma dosyaları Fedora RPM paketçilerine yöneliktir ve RHEL, CentOS sürümlerinin versiyonları "epel" olarak isimlendirilir çünkü bu paketler bu depo için üretilmiştir. (<code>.cfg</code> dosya uzantısını saymazsak) dilediğiniz yapılandırmayı kullanabilirsiniz. Örneğin, hazırladığımız <code>celaba</code> örneğini hem RHEL 7 hem de Fedora 23 için tek bir makinede şu komutlarla inşa edebilirsiniz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ mock -r epel-7-x86_64 ~/rpmbuild/SRPMS/celaba-1.0-1.el7.src.rpm

$ mock -r fedora-23-x86_64 ~/rpmbuild/SRPMS/celaba-1.0-1.el7.src.rpm</code></pre>
</div>
</div>
<div class="paragraph">
<p>Neden <code>mock</code> kullanmayı isteyeceğinize dair bir örnek şudur: <code>BuildRequires</code>'da belirtmeniz gereken bir paketi (buna <code>hede</code> diyelim) belirtmeyi unuttunuz ve bu paket laptopunuzda kurulu. <code>Hede</code> sisteminizde kurulu olduğu için de paketiniz inşa edildi çünkü inşa için gerekli olan paket zaten sisteminizde kuruldu. Fakat siz bu kaynak RPM&#8217;i <code>hede</code> kurulu olmayan başka bir sisteme taşırsanız hatalı davranacak, bekleyen bir yan etki oluşturacaktır. <a href="https://github.com/rpm-software-management/mock/wiki">Mock</a> kaynak RPM&#8217;in içeriğini tarar ve <code>BuildRequires</code>'de bahsedilen paketleri <a href="https://en.wikipedia.org/wiki/Chroot">chroot</a> içine kurarak bu durumu önler. Yani, eğer siz <code>BuildRequires</code> girdisini girmeyi unuttuysanız, derleme başarısız olacaktır çünkü <code>mock</code> gerekli paketin nasıl kurulacağını bilemez ve buildroot içerisinde gerekli paket bulunmayacaktır.</p>
</div>
<div class="paragraph">
<p>Tam aksi bir örneği de düşünebiliriz. Diyelim ki <code>gcc</code>'ye bir paketi inşa etmek için ihtiyacınız var fakat sisteminizde kurulu değil. (Bir RPM paketçisinin olmazsa olmazıdır ama varsayalım ki bir şekilde oldu) <a href="https://github.com/rpm-software-management/mock/wiki">Mock</a> sayesinde <code>gcc</code>yi sisteminize kurmaya gerek yoktur çünkü <code>mock</code> işleminin bir parçası olarak chroot içerisine kurulmuş olacak.</p>
</div>
<div class="paragraph">
<p>Aşağıda sistemimde bulunmayan bir bağımlılığı gerektiren bir paketin yeniden inşa etme girişimimi görmektesiniz. İşin püf noktası şudur; <code>gcc</code> paketi bir RPM paketçisinin sisteminde hâlihazırda kurulu olabilir ancak bazı RPM paketleri bir düzineden fazla <code>BuildRequires</code> gerektirir. Bu yöntem, sizin belki bir daha ihtiyaç duymacağınız nice lüzumsuz paketten kurtulmanızı sağlar.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpmbuild --rebuild ~/rpmbuild/SRPMS/celaba-1.0-1.el7.src.rpm
Installing /home/admiller/rpmbuild/SRPMS/celaba-1.0-1.el7.src.rpm
error: Failed build dependencies: gcc is needed by celaba-1.0-1.el7.x86_64

$ mock -r epel-7-x86_64 ~/rpmbuild/SRPMS/celaba-1.0-1.el7.src.rpm
INFO: mock.py version 1.2.17 starting (python version = 2.7.5)...
Start: init plugins
INFO: selinux enabled
Finish: init plugins
Start: run
INFO: Start(/home/admiller/rpmbuild/SRPMS/celaba-1.0-1.el7.src.rpm)  Config(epel-7-x86_64)
Start: clean chroot
Finish: clean chroot
Start: chroot init
INFO: calling preinit hooks
INFO: enabled root cache
Start: unpacking root cache
Finish: unpacking root cache
INFO: enabled yum cache
Start: cleaning yum metadata
Finish: cleaning yum metadata
Mock Version: 1.2.17
INFO: Mock Version: 1.2.17
Start: yum update
base                                                                    | 3.6 kB  00:00:00
epel                                                                    | 4.3 kB  00:00:00
extras                                                                  | 3.4 kB  00:00:00
updates                                                                 | 3.4 kB  00:00:00
No packages marked for update
Finish: yum update
Finish: chroot init
Start: build phase for celaba-1.0-1.el7.src.rpm
Start: build setup for celaba-1.0-1.el7.src.rpm
warning: Could not canonicalize hostname: rhel7
Building target platforms: x86_64
Building for target x86_64
Wrote: /builddir/build/SRPMS/celaba-1.0-1.el7.centos.src.rpm
Getting requirements for celaba-1.0-1.el7.centos.src
 --&gt; Already installed : gcc-4.8.5-4.el7.x86_64
 --&gt; Already installed : 1:make-3.82-21.el7.x86_64
No uninstalled build requires
Finish: build setup for celaba-1.0-1.el7.src.rpm
Start: rpmbuild celaba-1.0-1.el7.src.rpm
Building target platforms: x86_64
Building for target x86_64
Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.v9rPOF
+ umask 022
+ cd /builddir/build/BUILD
+ cd /builddir/build/BUILD
+ rm -rf celaba-1.0
+ /usr/bin/gzip -dc /builddir/build/SOURCES/celaba-1.0.tar.gz
+ /usr/bin/tar -xf -
+ STATUS=0
+ '[' 0 -ne 0 ']'
+ cd celaba-1.0
+ /usr/bin/chmod -Rf a+rX,u+w,g-w,o-w .
Patch #0 (celaba-output-first-patch.patch):
+ echo 'Patch #0 (celaba-output-first-patch.patch):'
+ /usr/bin/cat /builddir/build/SOURCES/celaba-output-first-patch.patch
patching file celaba.c
+ /usr/bin/patch -p0 --fuzz=0
+ exit 0
Executing(%build): /bin/sh -e /var/tmp/rpm-tmp.UxRVtI
+ umask 022
+ cd /builddir/build/BUILD
+ cd celaba-1.0
+ make -j2
gcc -g -o celaba celaba.c
+ exit 0
Executing(%install): /bin/sh -e /var/tmp/rpm-tmp.K3i2dL
+ umask 022
+ cd /builddir/build/BUILD
+ '[' /builddir/build/BUILDROOT/celaba-1.0-1.el7.centos.x86_64 '!=' / ']'
+ rm -rf /builddir/build/BUILDROOT/celaba-1.0-1.el7.centos.x86_64
++ dirname /builddir/build/BUILDROOT/celaba-1.0-1.el7.centos.x86_64
+ mkdir -p /builddir/build/BUILDROOT
+ mkdir /builddir/build/BUILDROOT/celaba-1.0-1.el7.centos.x86_64
+ cd celaba-1.0
+ /usr/bin/make install DESTDIR=/builddir/build/BUILDROOT/celaba-1.0-1.el7.centos.x86_64
mkdir -p /builddir/build/BUILDROOT/celaba-1.0-1.el7.centos.x86_64/usr/bin
install -m 0755 celaba /builddir/build/BUILDROOT/celaba-1.0-1.el7.centos.x86_64/usr/bin/celaba
+ /usr/lib/rpm/find-debuginfo.sh --strict-build-id -m --run-dwz --dwz-low-mem-die-limit 10000000 --dwz-max-die-limit 110000000 /builddir/build/BUILD/celaba-1.0
extracting debug info from /builddir/build/BUILDROOT/celaba-1.0-1.el7.centos.x86_64/usr/bin/celaba
dwz: Too few files for multifile optimization
/usr/lib/rpm/sepdebugcrcfix: Updated 0 CRC32s, 1 CRC32s did match.
+ /usr/lib/rpm/check-buildroot
+ /usr/lib/rpm/redhat/brp-compress
+ /usr/lib/rpm/redhat/brp-strip-static-archive /usr/bin/strip
+ /usr/lib/rpm/brp-python-bytecompile /usr/bin/python 1
+ /usr/lib/rpm/redhat/brp-python-hardlink
+ /usr/lib/rpm/redhat/brp-java-repack-jars
Processing files: celaba-1.0-1.el7.centos.x86_64
Executing(%license): /bin/sh -e /var/tmp/rpm-tmp.vxtAuO
+ umask 022
+ cd /builddir/build/BUILD
+ cd celaba-1.0
+ LICENSEDIR=/builddir/build/BUILDROOT/celaba-1.0-1.el7.centos.x86_64/usr/share/licenses/celaba-1.0
+ export LICENSEDIR
+ /usr/bin/mkdir -p /builddir/build/BUILDROOT/celaba-1.0-1.el7.centos.x86_64/usr/share/licenses/celaba-1.0
+ cp -pr LICENSE /builddir/build/BUILDROOT/celaba-1.0-1.el7.centos.x86_64/usr/share/licenses/celaba-1.0
+ exit 0
Provides: celaba = 1.0-1.el7.centos celaba(x86-64) = 1.0-1.el7.centos
Requires(rpmlib): rpmlib(CompressedFileNames) &lt;= 3.0.4-1 rpmlib(FileDigests) &lt;= 4.6.0-1 rpmlib(PayloadFilesHavePrefix) &lt;= 4.0-1
Requires: libc.so.6()(64bit) libc.so.6(GLIBC_2.2.5)(64bit) rtld(GNU_HASH)
Processing files: celaba-debuginfo-1.0-1.el7.centos.x86_64
Provides: celaba-debuginfo = 1.0-1.el7.centos celaba-debuginfo(x86-64) = 1.0-1.el7.centos
Requires(rpmlib): rpmlib(FileDigests) &lt;= 4.6.0-1 rpmlib(PayloadFilesHavePrefix) &lt;= 4.0-1 rpmlib(CompressedFileNames) &lt;= 3.0.4-1
Checking for unpackaged file(s): /usr/lib/rpm/check-files /builddir/build/BUILDROOT/celaba-1.0-1.el7.centos.x86_64
Wrote: /builddir/build/RPMS/celaba-1.0-1.el7.centos.x86_64.rpm
warning: Could not canonicalize hostname: rhel7
Wrote: /builddir/build/RPMS/celaba-debuginfo-1.0-1.el7.centos.x86_64.rpm
Executing(%clean): /bin/sh -e /var/tmp/rpm-tmp.JuPOtY
+ umask 022
+ cd /builddir/build/BUILD
+ cd celaba-1.0
+ /usr/bin/rm -rf /builddir/build/BUILDROOT/celaba-1.0-1.el7.centos.x86_64
+ exit 0
Finish: rpmbuild celaba-1.0-1.el7.src.rpm
Finish: build phase for celaba-1.0-1.el7.src.rpm
INFO: Done(/home/admiller/rpmbuild/SRPMS/celaba-1.0-1.el7.src.rpm) Config(epel-7-x86_64) 0 minutes 16 seconds
INFO: Results and/or logs in: /var/lib/mock/epel-7-x86_64/result
Finish: run</code></pre>
</div>
</div>
<div class="paragraph">
<p>Göreceğiniz üzere, <code>mock</code> çıktısı biraz fazla "detaylı". Aynı şekilde pek çok (mock hedefinin RHEL7, CentOS7 veyahut Fedora olmasına göre) <a href="http://yum.baseurl.org/">yum</a> veya <a href="https://github.com/rpm-software-management/dnf">dnf</a> çıktısını da görmektesiniz ki daha önce mock hedefi üzerinde önceden gerekli paketleri kuran, önbelleğe taşıyan ve hazırlayan <code>-init</code> parametresini çalıştırsaydınız (Örn: <code>mock -r epel-7-x86_64 --init</code>) bu çıktılarla karşılaşmayacaktınız.</p>
</div>
<div class="paragraph">
<p>Daha fazla için <a href="https://github.com/rpm-software-management/mock/wiki">Mock</a> hakkındaki güncel belgeleri inceleyebilirsiniz.</p>
</div>
</div>
<div class="sect2">
<h3 id="versiyon-kontrol-sistemleri">Versiyon Kontrol Sistemleri</h3>
<div class="paragraph">
<p>Çeviri Notu: Bu bölüm çevirirken en çok zorlandığım bölüm. Eğer cümlelerin anlamsız göründüğünü düşünür, esas anlamını karşılamadığını düşünürseniz muhakkak haber verin.</p>
</div>
<div class="paragraph">
<p>RPMlerle çalışırken, çoğu zaman paketlediğimiz yazılımın içeriğini yönetebilmek için <a href="https://git-scm.com/">git</a> gibi bir <a href="https://en.wikipedia.org/wiki/Version_control">Versiyon Kontrol Sisteminden</a> (İngilizce: Version Control System, VCS olarak kısaltılır ve çeviride bu kısaltma kullanılacaktır) yararlanmayı dileyebilirsiniz. Dikkat edilmesi gereken bir husus, bir VCS&#8217;i ikili dosyaları depolamak için kullanmak pek tercih edilen bir yöntem değildir. Çünkü bu araçlar dosyaların değişikliklerini ölçmek içindir (çoğunlukla metin dosyaları için optimize edilmiştir) ve ikili dosyalar bu özelliği sunamazlar. Üstelik, ikili dosyalar kaynak deposunun büyüklüğünü hızla şişirirler.</p>
</div>
<div class="paragraph">
<p>Bu soruna karşı Açık kaynak projelerinin çözümleri şunlardır: ya SPEC dosyası VCS&#8217;teki kaynak kodunun içerisinde depolanır ya da VCS&#8217;e sadece SPEC dosyası ve yamalarla beraber kaynak kodlarının sıkıştırılmış arşivi yüklenir ki bu arşive "gözardı edilen önbellek" (look aside cache) denir.</p>
</div>
<div class="paragraph">
<p>Bu kısımda RPM paketlerine dönüştürecek içerikleri yönetmek için VCS (<a href="https://git-scm.com/">git</a>) kullanmanın iki yolundan bahsedeceğiz: <a href="https://github.com/dgoodwin/tito">tito</a> ve <a href="https://github.com/release-engineering/dist-git">dist-git</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Bu kısımdakileri takip edebilmek için sisteminize <code>git</code> isimli paketi kurmalısınız.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="tito">tito</h4>
<div class="paragraph">
<p>Tito, paketlenecek yazılımın bütün kaynak kodunun <a href="https://git-scm.com/">git</a> deposu içerisinde olduğunu varsayarak kullanılan bir araçtır. Tito, yazılım geliştiren bir ekibin normal <a href="https://git-scm.com/book/en/v2/Git-Branching-Branching-Workflows">Dallanma Akışını</a> sürdürmesine izin verdiği için DevOps çalışanları için uygun bir tercihtir.</p>
</div>
<div class="paragraph">
<p>Tito yazılımın kademe kademe paketlenmesine izin verir. Paket süreçlerle otomatik olarak inşa edilir ve <a href="http://rpm.org/">RPM</a> tabanlı sistemler için olağan kurulum deneyimini sağlar.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<a href="https://github.com/dgoodwin/tito">Tito</a> paketi <a href="https://getfedora.org/">Fedora</a> ve RHEL 7 ile CentOS 7 üzerine kullanılabilen <a href="https://fedoraproject.org/wiki/EPEL">EPEL</a> deposu için mevcuttur.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Tito, <a href="https://git-scm.com/book/en/v2/Git-Basics-Tagging">git etiketleri</a> aracılığıyla çalışır ve izin verirseniz sizin için yönetir. Bunun yanında isteğe bağlı olarak tercih ettiğiniz etiketleme şeması altında çalışması için de yapılandırılabilir.</p>
</div>
<div class="paragraph">
<p>Şimdi Tito hakkında bir keşfe çıkalım ve Tito&#8217;yu kullanan bir projeye göz atalım. Bu proje, gelecek kısımların birisinin konusu olacak olan <a href="https://github.com/release-engineering/dist-git">dist-git</a>'dir. Hazır bu proje <a href="https://github.com/">GitHub</a>'da yayınlamışken onu klonlayabiliriz.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ git clone https://github.com/release-engineering/dist-git.git
Cloning into 'dist-git'...
remote: Counting objects: 425, done.
remote: Total 425 (delta 0), reused 0 (delta 0), pack-reused 425
Receiving objects: 100% (425/425), 268.76 KiB | 0 bytes/s, done.
Resolving deltas: 100% (184/184), done.
Checking connectivity... done.

$ cd dist-git/

$ ls *.spec
dist-git.spec

$ tree rel-eng/
rel-eng/
├── packages
│   └── dist-git
└── tito.props

1 directory, 2 files</code></pre>
</div>
</div>
<div class="paragraph">
<p>Görebileceğiniz üzere, SPEC dosyası git deposunun kök dizininde ve <code>rel-eng</code> dizini de Tito&#8217;nun veri sayımları, yapılandırması ve özel Tito modülleri gibi çeşitli detayları barındırır.</p>
</div>
<div class="paragraph">
<p>Aynı şekilde, <code>rel-eng</code> dizininde görüleceği gibi <code>packages</code> (Tr. paketler) isimli bir alt dizin vardır. Bu da her paket için bir dosya depolar ki tek bir git deposunda Tito bu işi halleder. Tek bir git deposunda bir çok RPM olabilir ve Tito bunu kolaylıkla halleder.</p>
</div>
<div class="paragraph">
<p>Ancak bu örneğinizde paketler listesinde yalnızca bir tek paketi görmekteyiz. Ayrıca dikkat edilmelidir ki bu paketin ismi de SPEC dosyasının adıyla örtüşmektedir. <a href="https://github.com/release-engineering/dist-git">dist-git</a> geliştiricilerinin git depolarını Tito ile yönetmeleri için tek gereken şey <code>tito init</code> komutunu kullanmalarıdır.</p>
</div>
<div class="paragraph">
<p>Eğer tam bir DevOpscu gibi davranmak istersek <a href="https://en.wikipedia.org/wiki/Continuous_integration">Sürekli Entegrasyon (Continuous Integration - CI olarak kısaltılır)</a> ve <a href="https://en.wikipedia.org/wiki/Continuous_delivery">Sürekli Teslimat (Continuous Delivery - CD olarak kısaltılır)</a> sürecinin bir parçası olarak kullanmayı isteyebiliriz.</p>
</div>
<div class="paragraph">
<p>Bu örnekte yapacağımız şey Tito için bir "deneme inşası" gerçekleştirmek ki bunun için <code>Mock</code>'u dahi kullanabiliriz. Çıktıyı iş hattının (pipeline) diğer parçaları için bir kurulum noktası olarak da kullanabiliriz. Aşağıda bunu gerçekleştiren basit bir komut örneği verilmiştir ve çeşitli ortamlara uyarlanabilir.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ tito build --test --srpm
Building package [dist-git-0.13-1]
Wrote: /tmp/tito/dist-git-git-0.efa5ab8.tar.gz

Wrote: /tmp/tito/dist-git-0.13-1.git.0.efa5ab8.fc23.src.rpm

$ tito build --builder=mock --arg mock=epel-7-x86_64 --test --rpm
Building package [dist-git-0.13-1]
Creating rpms for dist-git-git-0.efa5ab8 in mock: epel-7-x86_64
Wrote: /tmp/tito/dist-git-git-0.efa5ab8.tar.gz

Wrote: /tmp/tito/dist-git-0.13-1.git.0.efa5ab8.fc23.src.rpm

Using srpm: /tmp/tito/dist-git-0.13-1.git.0.efa5ab8.fc23.src.rpm
Initializing mock...
Installing deps in mock...
Building RPMs in mock...
Wrote:
  /tmp/tito/dist-git-selinux-0.13-1.git.0.efa5ab8.el7.centos.noarch.rpm
  /tmp/tito/dist-git-0.13-1.git.0.efa5ab8.el7.centos.noarch.rpm

$ sudo yum localinstall /tmp/tito/dist-git-*.noarch.rpm
Loaded plugins: product-id, search-disabled-repos, subscription-manager
Examining /tmp/tito/dist-git-0.13-1.git.0.efa5ab8.el7.centos.noarch.rpm: dist-git-0.13-1.git.0.efa5ab8.el7.centos.noarch
Marking /tmp/tito/dist-git-0.13-1.git.0.efa5ab8.el7.centos.noarch.rpm to be installed
Examining /tmp/tito/dist-git-selinux-0.13-1.git.0.efa5ab8.el7.centos.noarch.rpm: dist-git-selinux-0.13-1.git.0.efa5ab8.el7.centos.noarch
Marking /tmp/tito/dist-git-selinux-0.13-1.git.0.efa5ab8.el7.centos.noarch.rpm to be installed
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package dist-git.noarch 0:0.13-1.git.0.efa5ab8.el7.centos will be installed</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dikkat edilmelidir ki, son komutun sudo veyahut root yetkileriyle çalıştırılması gereklidir ve fazla uzamaması için çıktısı kırpılmıştır zira bağımlılıklar listesi oldukça uzun sayılabilir.</p>
</div>
<div class="paragraph">
<p>Bu kısa örneğimizde Tito kullanımından kısaca bahsettik, ancak geleneksel Sistem Yöneticileri, RPM paketçileri ve DevOpsçular için ne kadar faydalı özellikleri olduğunu göstermeye çalıştık. <em>Tito</em>'nun GitHub sitesinde bulunan belgelere göz atmanızı şiddetle tavsiye ederiz. Burada, bir projeye başlamak için ferekenlerden çeşitli ileri düzey konulara kadar pek çok şey bulabilirsiniz.</p>
</div>
</div>
<div class="sect3">
<h4 id="dist-git">dist-git</h4>
<div class="paragraph">
<p><a href="https://github.com/release-engineering/dist-git">dist-git</a> aracı <a href="https://github.com/dgoodwin/tito">Tito&#8217;ya</a> göre daha farklı bir yaklaşımı ele alır. Salt kaynak kodunu <a href="https://git-scm.com/">git</a>te tutmak yerine "gözardı edilen önbellek" olarak da anılan kaynak kodunu sıkıştırılmış bir arşivde spec dosyası ve yamalarıyla birlikte saklar.</p>
</div>
<div class="paragraph">
<p>Görmezden gelinen bellek (ya da look-aside-cache), RPM İnşa Sistemlerinin büyük boyutlu dosyaları nasıl idare ettiğini belirten bir terimdir. <a href="https://koji.fedoraproject.org/koji/">Koji</a> gibi RPM İnşa Sistemlerde sıklıkla kullanılan bir yaklaşımı ifade eder. İnşa sistemi, SPEC dosyasında belirtilen  <code>SourceX</code> girdilerindeki verileri "çeker" (bkz: pull). Arşiv dosyası güncellenirken, versiyon kontrol sistemindeki SPEC dosyası ve yamaları sabit kalır. Aynı şekilde, bu yöntem için yardımcı olan bir komut satırı aracı da bulunmaktadır.</p>
</div>
<div class="paragraph">
<p>Başka bir belgelendirmeyi buraya kopyalamak yerine belgenin aslına yönlendirmeyi tercih ediyoruz. Bunun gibi bir sistemin nasıl kurulacağını öğrenmek istiyorsanız, <a href="https://github.com/release-engineering/dist-git">dist-git</a> belgelerini inceleyebilirsiniz.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="makrolar-hakkinda-daha-fazlasi">Makrolar Hakkında Daha Fazlası</h3>
<div class="paragraph">
<p>Gömülü pek çok RPM Makrosu vardır ve bunlardan birkaçını bu kısımda ele alacağız. Ancak dilenirse <a href="http://rpm.org/user_doc/macros.html">RPM Resmi Belgesinde</a> kapsamlı bir listesiye ulaşabilirsiniz.</p>
</div>
<div class="paragraph">
<p>Sizin <a href="https://tr.wikipedia.org/wiki/Linux">Linux</a> dağıtımınızın da kendisine özgü bazı makroları da bulunmaktadır. Bu belgede <a href="https://getfedora.org/">Fedora</a>, <a href="https://www.centos.org/">CentOS</a> ve <a href="https://www.redhat.com/en/technologies/linux-platforms">RHEL</a> tarafından sağlanan pek çok makroyu göstereceğiz. Aynı zamanda makrolarla sisteminizi nasıl inceleyeceğinizi de bu bölümde alacağız. Ancak, diğer RPM tabanlı Linux dağıtımlarına özgü makroları tanıt<strong>ma</strong>yacağız.</p>
</div>
<div class="sect3">
<h4 id="kendinizinkini-tanimlayin">Kendi Makronuzu Tanımlayın</h4>
<div class="paragraph">
<p>Kendi makronuzu tanımlayabilirsiniz. <a href="http://rpm.org/user_doc/macros.html">RPM Resmi Belgesinden</a> yapılan makroların yeteneklerini gösteren detaylı bir alıntıyı aşağıda görebilirsiniz.</p>
</div>
<div class="paragraph">
<p>Bir makro tanımlamak için:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">%global &lt;name&gt;[(opts)] &lt;body&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>\</code> işaretinin ardından gelen boşluklar kaldırılacaktır. İsim, en üç harften oluşmalı ve yalnızca sayılardan, isimlerden ve <code>_</code> işaretinden oluşmalıdır. <code>(opts)</code> kısmı olmayan bir makro, yalnızca özyinelemeli makro genişletmesi yapabileceğinden "sade" bir makrodur. Parametre verilebilen bir makro <code>(opts)</code> kısmını barındırır. (Parantezlerle beraber bir metin olan) <code>(opts)</code> makro çağırmanın başlangıcındaki getopt(3) için argv/argc* işlemi gibidir.</p>
</div>
<div class="paragraph">
<p>*Argc, Argument Count&#8217;un kısaltmasıdır ve argüman sayısı anlamına gelir. Argv Argument Vector&#8217;ün kısaltmasıdır ve argümanın içeriğini gösterir.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Eski RPM SPEC dosyaları <code>%define &lt;name&gt; &lt;body&gt;</code> makro örüntüsünü kullanabilir. <code>%define</code> ve <code>%global</code> atasındaki farklar şöyledir:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>%define</code> daha yerel bir kapsam içindir. Yani, SPEC dosyasının belirli bir kısmına yöneliktir. Bunun yanısıra, <code>%define</code> kısmı tembelce değerlendirilir, ancak kullanıldığında genişletilir.</p>
</li>
<li>
<p><code>%global</code> ise SPEC dosyasının tamamını içine alan bir kapsam içindir. Derlenir derlenmez genişletilir.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Örnekler:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>%global githash 0ec4e58
%global python_sitelib %(%{__python} -c "from distutils.sysconfig import get_python_lib; print(get_python_lib())")</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Yorum içinde dahi olsa, makrolar muhakkak ki genişletilir. Kimi zaman bu zararsızdır, ancak ikinci örnekte göreceğiniz gibi için bir Python komutunu çalıştırmış bulunmaktayız. Bu komut siz yoruma alsanız da, %changelog içinde bahsetseniz de çalışacaktır. Bir makroyu yoruma almak için, <code>%%</code> kullanın. Mesela ki: <code>%%global</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="setup">%setup</h4>
<div class="paragraph">
<p><code>%setup</code> makrosu tarball hâlindeki kaynak kodlarından paketleri inşa etmek için kullanılır. <code>%setup</code> makrosunun öntanımlı hareket tarzı <code>rpmbuild</code> çıktısında göreceğiniz gibidir. Her bir makro safhasının başlangıcında <code>Executing(%falancafilanca)</code> çıktısını verir. Mesela:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.DhddsG</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>set -x</code> aktifleştirilmiş bir kabuk çıktısı buna benzer. <code>/var/tmp/rpm-tmp.DhddsG</code> çıktısını merak ediyorsanız <code>-debug</code> kullanın çünkü <code>Rpmbuild</code> başarılı bir inşadan sonra geçici çıktıları siler. Aşağıdaki örnekte ortam değişkenlerinin yapılandırmasını görebilirsiniz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">cd '/builddir/build/BUILD'
rm -rf 'celaba-1.0'
/usr/bin/gzip -dc '/builddir/build/SOURCES/celaba-1.0.tar.gz' | /usr/bin/tar -xof -
STATUS=$?
if [ $STATUS -ne 0 ]; then
  exit $STATUS
fi
cd 'celaba-1.0'
/usr/bin/chmod -Rf a+rX,u+w,g-w,o-w .</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>%setup</code> doğru dizinde çalıştığımıza emin olur, daha önceki inşalardan kalan kalıntıları siler, tarball kaynağını açar ve çeşitli yetkiler tanımlar. <code>%setup</code> makrosunun davranışını belirleyen çeşitli parametreler vardır.</p>
</div>
<div class="sect4">
<h5 id="setup-q">%setup -q</h5>
<div class="paragraph">
<p><code>-q</code> parametresi <code>%setup</code> makrosunun çıktısını azaltır. <code>tar -xvvof</code> yerine <code>tar -xof</code> kullanılır. Bu parametre, ilk seferde kullanılmalıdır.</p>
</div>
<div class="paragraph">
<p>Option <code>-q</code> limits verbosity of <code>%setup</code> macro. Only <code>tar -xof</code> is
executed instead of <code>tar -xvvof</code>. This option has to be used as first.</p>
</div>
</div>
<div class="sect4">
<h5 id="setup-n">%setup -n</h5>
<div class="paragraph">
<p>Bazı durumlarda, tarballdan gelen dizinin ismi <code>%{name}-%{version}</code> ikilisinden farklıdır. Bu, <code>%setup</code> makrosunun işleyişini sekteye uğratır. Dizin adı <code>-n dizin_adi</code> parametresiyle belirtilmelidir.</p>
</div>
<div class="paragraph">
<p>Örneğin, paketin adı <code>celaba</code>'dır ama kaynak kodunun arşivi <code>hello-1.0.tgz</code> ismindedir ve içeriğinde <code>hello/</code> dizinin barındırır. O zaman SPEC dosyasının içeriği şu şekilde olmalıdır:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Name: celaba
Source0: https://example.com/%{name}/release/hello-%{version}.tar.gz
…
%prep
%setup -n hello</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="setup-c">%setup -c</h5>
<div class="paragraph">
<p><code>-c</code> parametresi kaynak kodunun arşivi açıldıktan sonra herhangi bir alt dizin içermiyorsa kullanılmalıdır. Arşivden gelecek dosyalar bütün dizini dolduracaktır ve <code>-c</code> parametresi bir dizin açıp arşivi içine genişletir. Bu makronun ne yaptığını tasvir eden bir örnek:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">/usr/bin/mkdir -p celaba-1.0
cd 'celaba-1.0'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dizin, arşiv genişletildikten sonra değişmeyecektir.</p>
</div>
</div>
<div class="sect4">
<h5 id="setup-dt">%setup -D ve -T</h5>
<div class="paragraph">
<p><code>-D</code> parametresi kaynak kodu dizinin silinmesini engeller. Tekrar tekrar <code>%setup</code> makrosunun kullanıldığı durumlar için faydalıdır. Aslında, <code>-D</code> parametresinin yap<strong>ma</strong>dığı iş şudur:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">rm -rf 'celaba-1.0'</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>-T</code> parametresi ise tarball&#8217;ın gelişletilmesine engel olur. Yani şu satırlar çalış<strong>ma</strong>yacaktır:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">/usr/bin/gzip -dc '/builddir/build/SOURCES/celaba-1.0.tar.gz' | /usr/bin/tar -xvvof -</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="setup-ab">%setup -a ve -b</h5>
<div class="paragraph">
<p><code>-a</code> ve <code>-b</code> belirli kaynakları genişletir.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>-b</code> (İngilizce "Önce" demek olan "B"efore kelimesinden gelir) belirlenmiş kaynağı çalışma dizinine girmeden önce genişletir.</p>
</li>
<li>
<p><code>-a</code> (İngilizce "Sonra" demek olan "A"fter kelimesinden gelir) belirlenmiş kaynağı çalışma dizinne girdikten sonra genişletir.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Argümanlarındaki kaynak numaraları SPEC dosyasındaki <code>SourceX</code> girdilerinden gelir.</p>
</div>
<div class="paragraph">
<p>Örneğin <code>celaba-1.0.tar.gz</code> içerisinde boş bir <code>örnekler</code> dizini var ve bu dizinin içeriği <code>örnekler.tar.gz</code> isimli başka bir arşivin içinde. O zaman, <code>Source1</code>'i çalışma dizinine girdikten sonra genişletmek için  <code>-a 1</code> parametresini kullanmalıyız.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Source0: https://example.com/%{name}/release/%{name}-%{version}.tar.gz
Source1: örnekler.tar.gz
…
%prep
%setup -a 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Fakat elimizde <code>celaba-1.0/örnekler</code> dizinine dosyaları çıkaran <code>celaba-1.0-örnekler.tar.gz</code> isimli bir arşiv varsa, <code>-b 1</code> parametresini kullanmalıyız. Çünkü çalışma dizinine girmeden önce <code>Source1</code> genişletilmelidir.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">Source0: https://example.com/%{name}/release/%{name}-%{version}.tar.gz
Source1: %{name}-%{version}-örnekler.tar.gz
…
%prep
%setup -b 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Aynı zamanda, üstteki parametreleri bir arada kullanabilirsiniz.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="files">%files</h4>
<div class="paragraph">
<p><code>%files</code> yönergesinde kullanılan yaygın makrolar şu şekildedir:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Makro</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Açıklama</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%license</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LICENCE dosyasını belirtir, sisteme uygun şekilde yükler ve RPM tarafından tanımlanır. Örnek kullanım: <code>%licence LICENCE</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%doc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sisteme kurulmuş olan ve RPM tanımlanmış belgeleri işaretler. Çoğu zaman yalnızca yazılıma yönelik belgelendirmeyi içermez, belgelendirmeyi tamamlayan aynı zamanda örnek kullanımları ve farklı türden parçaları da içerir. Sözkonusu olan durumda kod örnekleri de dahildir. Dosyadan çalıştırılabilir kod çıkarılırken dikkatli olunmalıdır. Örnek kullanım: <code>%doc README</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%dir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bu RPM paketi tarafından sahiplenilen konumu belirtilir. Paketin kaldırılması gerektiği zaman hangi dizinler ive dosyaların kaldırıldığını bilinmesi açısından oldukça önemlidir. Örnek kullanım: <code>%dir %{_libdir}/%{name}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%config(noreplace)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Belirtilen dosyanın bir yapılandırma dosyası olduğunu belirtir. Eğer belirtilen dosyasının sağlama değeri (checksum) orijinal dosyadan ayrıysa RPM bu dosyaları koruyacaktır. Eğer bir değişim gerekecekse, sonu <code>.rpmnew</code> ile biten bir dosya oluşturulur ve son kullanıcının sisteminde daha önceden bulunan/değiştirilmiş dosya değiştirilmez. Örnek kullanım: <code>%config(noreplace) %{_sysconfdir}/%{name}/%{name}.conf</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="gomulu-makrolar">Gömülü Makrolar</h4>
<div class="paragraph">
<p>Sisteminizde pek gömülü makro bulunmaktadır ve bu makroların hepsini görmenin en kolay <code>rpm --showrc</code> komutunu çalıştırmaktır. Ancak ki çıktı fazlaca uzun olduğu için <code>grep</code> komutuyla kısaltmak, genellikle tercih edilen bir yöntemdir.</p>
</div>
<div class="paragraph">
<p>Aynı şekilde, <code>rpm -ql rpm</code> komutunun çıktısında, içinde <code>macros</code> dosyalardan da daha fazla bilgi alabilirsiniz. Bu dosyalar, sisteminizdeki RPM sürümüyle birlikte gelir.</p>
</div>
</div>
<div class="sect3">
<h4 id="rpm-dagitim-makrolari">RPM Dağıtım Makroları</h4>
<div class="paragraph">
<p>Different distributions will supply different sets of recommended RPM Macros
based on the language implementation of the software being packaged or the
specific guidelines of the distribution in question.</p>
</div>
<div class="paragraph">
<p>Bu makrolar, RPM Paketleri tarafından sunulur ve <a href="http://yum.baseurl.org/">yum</a> veyahut <a href="https://github.com/rpm-software-management/dnf">dnf</a> gibi dağıtımlara ait paket yöneticileri aracılığıyla kurulabilirler. Makro dosyaları kurulduktan sonra <code>/usr/lib/rpm/macros.d/</code> içerisinde bulunabilir ve <code>rpm --showrc</code> çıktısında görülebilir.</p>
</div>
<div class="paragraph">
<p>Bunun başlıca örneklerinden birisi, <a href="https://docs.fedoraproject.org/en-US/packaging-guidelines/">Fedora Paketleme Kılavuzunda</a> ilişkili olan <a href="https://docs.fedoraproject.org/en-US/packaging-guidelines/#_domain_specific_guidelines">Uygulamaya Özgü Kılavuzlar</a> bölümüdür. Bu rehberin yazıldığı tarihte, RPM Makrolarıyla birlikte 60&#8217;ın üzerinde farklı RPM paketleme kılavuzu bulunmaktadır.</p>
</div>
<div class="paragraph">
<p>Bunlara bir örnek, <a href="https://www.python.org/">Python</a>'un 2. versiyonu için hazırlanmış olan <code>python2-rpm-macros</code> paketidir. (RHEL 7 ve CentOS 7 için EPEL deposunda bulunmaktadır.) Python2&#8217;ye özgü pek çok makroya bu paketten ulaşabilirsiniz.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpm -ql python2-rpm-macros
/usr/lib/rpm/macros.d/macros.python2

$ rpm --showrc | grep python2
-14: __python2  /usr/bin/python2
CFLAGS=&quot;%{optflags}&quot; %{__python2} %{py_setup} %{?py_setup_args} build --executable=&quot;%{__python2} %{py2_shbang_opts}&quot; %{?1}
CFLAGS=&quot;%{optflags}&quot; %{__python2} %{py_setup} %{?py_setup_args} install -O1 --skip-build --root %{buildroot} %{?1}
-14: python2_sitearch   %(%{__python2} -c &quot;from distutils.sysconfig import get_python_lib; print(get_python_lib(1))&quot;)
-14: python2_sitelib    %(%{__python2} -c &quot;from distutils.sysconfig import get_python_lib; print(get_python_lib())&quot;)
-14: python2_version    %(%{__python2} -c &quot;import sys; sys.stdout.write('{0.major}.{0.minor}'.format(sys.version_info))&quot;)
-14: python2_version_nodots     %(%{__python2} -c &quot;import sys; sys.stdout.write('{0.major}{0.minor}'.format(sys.version_info))&quot;)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Üstteki örnekte ham RPM makro tanımlarını görmektesiniz. Eğer dilenirse <code>rpm --eval</code> komutunu kullanarak bu makroları daha anlaşılır bir biçimde tekrardan yorumlatabilirsiniz. Bu sayede RPM paketlerken hangi makronun ne işe yaracağını inceleyebilirsiniz.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpm --eval %{__python2}
/usr/bin/python2

$ rpm --eval %{python2_sitearch}
/usr/lib64/python2.7/site-packages

$ rpm --eval %{python2_sitelib}
/usr/lib/python2.7/site-packages

$ rpm --eval %{python2_version}
2.7

$ rpm --eval %{python2_version_nodots}
27</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ozel-makrolar">Özel Makrolar</h3>
<div class="paragraph">
<p><code>~/.rpmmacros</code> dosyasını düzenleyerek dağıtım makrolarını geçersiz bırakabilirsiniz. Burada yapacağınız her bir değişiklik gelecekteki inşa süreçlerine etkide bulunacaktır.</p>
</div>
<div class="paragraph">
<p>Değiştirebileceğiniz bazı makrolar şu şekildedir:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>%_topdir /opt/falanca/calisma/dizini/rpmbuild</code></dt>
<dd>
<p>Bu dizini oluşturup oluşturabilir ve <code>rpmdev-setuptree</code> aracının oluşturduğu dizinleri ekleyebilirsiniz. Bu makronun değeri öntanımlı olarak <code>~/rpmbuild</code>'dir.</p>
</dd>
<dt class="hdlist1"><code>%_smp_mflags -l3</code></dt>
<dd>
<p>Bu makro genellikle Makefile&#8217;a geçmek için kullanılırdı. Mesela: <code>make %{?_smp_mflags}</code> veya inşa sürecinde eşzamanlı işlikçilerin sayısını belirlemek. Öntanımlı olarak, <code>-jX</code>'i temsil eder ki <code>X</code> burada işlikçi sayısını belirtir. Bu numarayı değiştirerek paketlerin inşa sürecini hızlandırabilir ya da yavaşlatabilirsiniz.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><code>~/rpmmacros</code> içerisinde yeni makrolar belirleyebilirsiniz, ancak bunu yapmayın. Çünkü bu makrolar yalnızca sizin makinenizde tanımlanmış olacak. Diğer kullanıcılar paketleri tekrar inşa etmek istediği zaman bu makrolara erişemeyebilirler.</p>
</div>
</div>
<div class="sect2">
<h3 id="epoch-betikciler-ve-tetikciler">Epoch, Scriptlets, and Triggers</h3>
<div class="paragraph">
<p>RPM SPEC dosyaları âlemindeki bazı konular daha ileri seviye sayılır çünkü bu konular yalnızca SPEC dosyasını değil, paketin nasıl derlendiğini ve aynı zamanda bu RPM paketi kurulacağı zaman nasıl tepki göstermesi gerektiğini de ilgilendirir.</p>
</div>
<div class="paragraph">
<p>Bu bölümde bu ileri düzey konulardan en bilinenleri olan dönemleri, betikçileri ve tetikleyicileri ele alacağız.</p>
</div>
<div class="sect3">
<h4 id="donem">Dönem</h4>
<div class="paragraph">
<p>İlk olarak <code>Dönem (Epoch)</code>'i ele alacağız. dönemler belirli bir versiyon numarasına yönelik bağımlılıkları tanımlar. Eğer <code>Epoch</code> yönergesi SPEC dosyasında belirtilmemişse öntanımlı değer 0&#8217;dır. Bu rehberin SPEC yazımıyla ilgili kısmında dönemleri ele almadık, çünkü versiyon kıyaslamak normalde RPM&#8217;in yaptığı bir iş olduğu için bunu belirtmek ayrıca kafa karıştırıcı olabilir.</p>
</div>
<div class="paragraph">
<p><code>Epoch: 1</code> ve <code>Version: 1.0</code> yönergelerine sahip <code>hedehödö</code> diye bir paketin sisteme kurulduğunu farzedelim. Ve başka birisi de <code>hedehödö</code>'yü <code>Version: 2.0</code> yönergesiyle paketledi ancak dalgınlıkla <code>Epoch</code> yönergesini belirtmeyi unuttu. Yeni versiyon, RPM tarafından bir güncelleme olarak kabul edilmeyecektir çünkü RPM paketlerinin versiyonlarını belirtirken dönem (epoch) geleneksel İsim-Versiyon-Sürüm üçlemesinden daha öncelikli kabul edilir.</p>
</div>
<div class="paragraph">
<p>Bu yaklaşım ancak çok ama çok gerekli olduğu zaman son çare olarak kullanılır. Amaç, sürüm numaralandırmalarındaki değişikliklerden doğan yan etkileri telafi etmektir. Bir başka sebebi ise sürüm numalarında kullanılan kıyaslanması mümkün olmayan karakterleri telafi etmektir.</p>
</div>
</div>
<div class="sect3">
<h4 id="tetikleyiciler-ve-betikciler">Betikçiler ve Tetikleyiciler</h4>
<div class="paragraph">
<p>Paketin kurulması esnasında sistem üzerinde gereken veyahut istenen değişikliği gerçekleştirmek için kullanılan birtakım yönergeler vardır. Bu yönergeler <strong>betikçiler</strong> (İng: Scriptlet) olarak adlandırılır.</p>
</div>
<div class="paragraph">
<p>Neden böyle bir şeyi kullanmak isteyeceğinize dair bir örnek verelim. Diyelim ki sisteme yeni bir hizmet yerleştiren bir paket kurduk ve içeriğinde <a href="https://freedesktop.org/wiki/Software/systemd/">systemd</a>'ye ait bir <a href="https://www.freedesktop.org/software/systemd/man/systemd.unit.html">birim dosyası</a> bulunmakta. Bu durumda <a href="https://freedesktop.org/wiki/Software/systemd/">systemd</a>'ye <code>filanca</code> isimli hayali paketin kurulumundan sonra <code>systemctl start filanca.service</code> komutunun kullanılabileceğini bildirmemiz gerek. Aynı şekilde, kaldıracağımız zaman da tam aksini gerçekleştirebilmemiz gerekir, böylece birim dosyası Systemd&#8217;nin yapılandırmasına kendisini sürdürmeye devam ederken sözkonusu arkaplan programının kaldırılması başka hataları tetiklemez.</p>
</div>
<div class="paragraph">
<p>Sıklıkla kullanılan betikçilerin sayısı oldukça azdır ve kullanım şekilleri <code>%build</code> ile <code>%install</code> gibi "gövde başlık" yönergeleriyle oldukça benzeşirler. (Mesela birden çok satıra yayılabilirler.) Çoğu zaman bir
<a href="https://tr.wikipedia.org/wiki/POSIX">POSIX</a>
uyumlu bir kabuk betiği ile yazılırlar ancak hedef dağıtımın izin verdiği programlama dillerinde de hazırlanabilirler. Hangi dillerle yazılabileceğinin kapsamlı bir listesini <em>RPM Resmi Belgesisinde</em> bulabilirsiniz.</p>
</div>
<div class="paragraph">
<p>Betikçi yönergeleri şunlardır:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yönerge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Açıklama</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%pre</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paket hedef sisteme kurulmadan hemen önce çalıştırılacak betikçi</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%post</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paket hedef sisteme kurulduktan hemen sonra çalıştırılacak betikçi</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%preun</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paket hedef sistemden kaldırılmadan hemen önce çalıştırılacak betikçi</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%postun</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paket hedef sistemden kaldırıldıktan hemen sonra çalıştırılacak betikçi</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Aynı zamanda bu işlev için sıklıkla kullanılan RPM makroları da vardır. Mesela daha önce bahsettiğimiz <a href="https://freedesktop.org/wiki/Software/systemd/">systemd</a>'nin yeni bir <a href="https://www.freedesktop.org/software/systemd/man/systemd.unit.html">birim dosyası</a> için tetiklenmesi gerektiğini belirtmenin daha kolay yolları da vardır. Alttaki çıktıdan inceleyebilirsiniz. Daha fazla bilgi için <a href="https://fedoraproject.org/wiki/Packaging:Systemd">Fedora Systemd Paketleme Kılavuzu</a>na göz atın.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rpm --showrc | grep systemd
-14: __transaction_systemd_inhibit      %{__plugindir}/systemd_inhibit.so
-14: _journalcatalogdir /usr/lib/systemd/catalog
-14: _presetdir /usr/lib/systemd/system-preset
-14: _unitdir   /usr/lib/systemd/system
-14: _userunitdir       /usr/lib/systemd/user
/usr/lib/systemd/systemd-binfmt %{?*} &gt;/dev/null 2&gt;&amp;1 || :
/usr/lib/systemd/systemd-sysctl %{?*} &gt;/dev/null 2&gt;&amp;1 || :
-14: systemd_post
-14: systemd_postun
-14: systemd_postun_with_restart
-14: systemd_preun
-14: systemd_requires
Requires(post): systemd
Requires(preun): systemd
Requires(postun): systemd
-14: systemd_user_post  %systemd_post --user --global %{?*}
-14: systemd_user_postun        %{nil}
-14: systemd_user_postun_with_restart   %{nil}
-14: systemd_user_preun
systemd-sysusers %{?*} &gt;/dev/null 2&gt;&amp;1 || :
echo %{?*} | systemd-sysusers - &gt;/dev/null 2&gt;&amp;1 || :
systemd-tmpfiles --create %{?*} &gt;/dev/null 2&gt;&amp;1 || :

$ rpm --eval %{systemd_post}

if [ $1 -eq 1 ] ; then
        # Initial installation
        systemctl preset  &gt;/dev/null 2&gt;&amp;1 || :
fi

$ rpm --eval %{systemd_postun}

systemctl daemon-reload &gt;/dev/null 2&gt;&amp;1 || :

$ rpm --eval %{systemd_preun}

if [ $1 -eq 0 ] ; then
        # Package removal, not upgrade
        systemctl --no-reload disable  &gt; /dev/null 2&gt;&amp;1 || :
        systemctl stop  &gt; /dev/null 2&gt;&amp;1 || :
fi</code></pre>
</div>
</div>
<div class="paragraph">
<p>RPM işlemi üzerinde daha da incelikli bir kontrol arzuluyorsanız <strong>tetikleyicilere</strong> (İng. triggers) göz atabilirsiniz. Hemen hemen betikçilerle aynı işlevi görürler, ancak kurulum veya yükseltme işlemi içerisinde özel bir sıralamaya göre çalıştırılırlar, işlem üzerinde çok daha hassa bir kontrol sağlarlar.</p>
</div>
<div class="paragraph">
<p>Tetikçiler, tetiklenme sıralarına göre detaylarıyla birlikte aşağıda listelenmişlerdir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">all-%pretrans
...
any-%triggerprein (%triggerprein - öteki paketler yeni bir kuruluma hazırlanırken)
new-%triggerprein
new-%pre      Paketin yeni versiyonu kurulurken
...           (bütün yeni dosyalar kurulur)
new-%post     Paketin yeni versiyou kurulurken

any-%triggerin (%triggerin - öteki paketler yeni bir kuruluma hazırlanırken)
new-%triggerin
old-%triggerun
any-%triggerun (%triggerun - öteki paketler kaldıırlmaya hazırlanırken)

old-%preun    Paketin eski versiyonu kaldırılırken
...           (bütün eski dosyalar kaldırılır)
old-%postun   Paketin eski versiyonu kaldırılırken

old-%triggerpostun
any-%triggerpostun (%triggerpostun - diğer paketler de kaldırılırken)
...
all-%posttrans</code></pre>
</div>
</div>
<div class="paragraph">
<p>Yukarıdaki maddeler Fedora sistemlerde <code>/usr/share/doc/rpm/triggers</code>, RHEL 7 ve CentOS 7 sistemlerde ise <code>/usr/share/doc/rpm-4.*/triggers</code> adresinde bulunan RPM belgelerinden alıntıdır.</p>
</div>
<div class="sect4">
<h5 id="kabuk-disi-betikleri-spec-dosyasinda-kullanmak">Kabuk Dışı Betikleri SPEC Dosyasında Kullanmak</h5>
<div class="paragraph">
<p><code>-p</code> isimli betikçi parametresi, SPEC dosyası içerisinde belirli bir yorumlayıcıyı çağırmamıza izin verir. Öntanımlı değer <code>-p&#160;/bin/sh&#8217;dir. Aşağıdaki açıklayıcı örnekte `pelaba.py</code> dosyasının kurulumundan sonra ekrana bir mesajı bastıran bir betiği görmektesiniz.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>pello.spec</code> dosyasını açın.</p>
</li>
<li>
<p>Şu satırı bulun:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">install -m 0644 %{name}.py* %{buildroot}/usr/lib/%{name}/</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bu satırın altına, şu kodu ekleyin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="specfile">%post -p /usr/bin/python3
print(&quot;Hey! Bu bir {} kodu!&quot;.format(&quot;python&quot;))</code></pre>
</div>
</div>
</li>
<li>
<p><a href="#rpm-insa-etmek">RPMleri İnşa Etmek</a> kısmına göre paketinizi inşa edin.</p>
</li>
<li>
<p>Paketinizi kurun:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"># dnf install /home/&lt;username&gt;/rpmbuild/RPMS/noarch/pello-0.1.1-1.fc27.noarch.rpm</code></pre>
</div>
</div>
<div class="paragraph">
<p>Paketleri kurduktan sonra çıktıda şu mesajı göreceksiniz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>Installing       : pello-0.1.1-1.fc27.noarch                              1/1
Running scriptlet: pello-0.1.1-1.fc27.noarch                              1/1
Hey! Bu bir python kodu!</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Bir Python&#160;3 betiği kullanmak için: SPEC dosyasındaki <code>install -m</code> satırı altında <code>%post -p /usr/bin/python3</code> satırını ekleyin.</p>
</li>
<li>
<p>Bir Lua betiği kullanmak için: SPEC dosyasındaki <code>install&#160;-m</code> satırı altına <code>%post -p &lt;lua&gt;</code> satırını ekleyin.</p>
</li>
<li>
<p>Bu yolla dilediğiniz yorumlayıcıyı SPEC dosyasında kullanabilirsiniz.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="rpmde-kosullu-ifadeler">RPM&#8217;de Koşullu İfadeler</h3>
<div class="paragraph">
<p>Koşullu ifadeler, SPEC dosyasının çeşitli kısımlarında kullanılabilir.</p>
</div>
<div class="paragraph">
<p>Koşullu ifadeler çoğunlukla şunlar için kullanılır:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>mimariye özgü durumlar için</p>
</li>
<li>
<p>işletim sistemine özgü durumlar için</p>
</li>
<li>
<p>işletim sisteminin sürümleri arasındaki uyumluluk sorunlarıyla başa çıkmak için</p>
</li>
<li>
<p>makroların varlığını ve tanımını sorgulamak için</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_koşullu_i̇fadelerin_sözdizimi">Koşullu İfadelerin Sözdizimi</h4>
<div class="paragraph">
<p>Eğer <em>ifade</em> doğruysa bir şeyler yap:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>%if ifade
...
%endif</pre>
</div>
</div>
<div class="paragraph">
<p>Eğer <em>ifade</em> doğruysa bir şeyler yap. Değilse, başka bir şey yap:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>%if ifade
...
%else
...
%endif</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_koşullu_i̇fadelerin_örnekleri">Koşullu İfadelerin Örnekleri:</h4>
<div class="sect4">
<h5 id="_if_koşulu"><code>%if</code> koşulu</h5>
<div class="literalblock">
<div class="content">
<pre>%if 0%{?rhel} == 6
sed -i '/AS_FUNCTION_DESCRIBE/ s/^/#/' configure.in
sed -i '/AS_FUNCTION_DESCRIBE/ s/^/#/' acinclude.m4
%endif</pre>
</div>
</div>
<div class="paragraph">
<p>Bu koşul, RHEL6 ve diğer işletim sistemleri için AS_FUNCTION_DESCRIBE makrosunun desteğini düzenler. Eğer paket RHEL için inşa edilirse <code>%rhel</code> makrosu tanımlanmış olacaktır ve RHEL sürümünü verecektir. Eğer bu değer 6 ise, bu paket RHEL 6 için derlenecektir ve RHEL 6 tarafından desteklenmeyen AS_FUNCTION_DESCRIBE makrosunu otomatik yapılandırma betiklerinden silecektir.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>%if 0%{?el6}
%global ruby_sitearch %(ruby -rrbconfig -e 'puts Config::CONFIG["sitearchdir"]')
%endif</pre>
</div>
</div>
<div class="paragraph">
<p>Bu koşul ise Fedora 17 ile daha yeni versiyonlarını ve RHEL 6&#8217;nın <code>%ruby_sitearch</code> makro desteğini düzenler. Fedora 17 ve daha yeni sürümleri <code>%ruby_sitearch</code> makrosunu desteklerken RHEL6 desteklemez. Eğer çalışan işletim sistemi RHEL6 ise, <code>%ruby_sitearch</code> makrosunu tanımlar. Dikat edilmelidir ki <code>0%{?el6}</code> ile önceki örnekte gördüğümüz <code>0%{?rhel} == 6</code> ile aynıdır ve paketin RHEL 6 için derlenip derlenmediğini yoklar.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>%if 0%{?fedora} &gt;= 19
%global with_rubypick 1
%endif</pre>
</div>
</div>
<div class="paragraph">
<p>Bu koşulda ise rubypick desteği yoklanır. Eğer işletim sistemi Fedora 19 veya daha yeniyse, rubypick destekleniyordur.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>%define ruby_archive %{name}-%{ruby_version}
%if 0%{?milestone:1}%{?revision:1} != 0
%define ruby_archive %{ruby_archive}-%{?milestone}%{?!milestone:%{?revision:r%{revision}}}
%endif</pre>
</div>
</div>
<div class="paragraph">
<p>Bu koşulda da makro tanımları yoklanır. Eğer <code>%milestone</code> ve <code>%revision</code> makroları tanımlanmışsa tarball ismini belirten <code>%ruby_archive</code> makrosu tekrar tanımlanır.</p>
</div>
</div>
<div class="sect4">
<h5 id="_if_koşulunun_özel_türleri"><code>%if</code> Koşulunun Özel Türleri</h5>
<div class="paragraph">
<p><code>%ifarch</code>,<code>%ifnarch</code> ve <code>%ifos</code> koşulları <code>%if</code> koşulunun özelleştirilmiş türleridir. Bu türler sık sık kullanıldığı için kendi makroları vardır.</p>
</div>
<div class="sect5">
<h6 id="_ifarch_koşulu"><code>%ifarch</code> koşulu</h6>
<div class="paragraph">
<p><code>%ifarch</code> koşulu genellikle belirli bir mimariye özgü kısmını tetiklemek için kullanılır. Hemen ardından bir veya birden çok mimari belirtir ve her biri virgüller ya da boşluklarla ayrılır.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>%ifarch i386 sparc
...
%endif</pre>
</div>
</div>
<div class="paragraph">
<p><code>%ifarch</code> ve <code>endif</code> arasında kalan kısım yalnızca 32 bit AMD/Intel mimariler veya Sun SPARC temelli sistemlerde işlenir.</p>
</div>
</div>
<div class="sect5">
<h6 id="_ifnarch_koşulu"><code>%ifnarch</code> koşulu</h6>
<div class="paragraph">
<p><code>%ifnarch</code> koşulu ise <code>%ifarch</code> koşulunun tam tersidir.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>%ifnarch alpha
...
%endif</pre>
</div>
</div>
<div class="paragraph">
<p><code>%ifnarch</code> ve <code>%endif</code> arasında kalan kısım Alfa işlemcilerini kullanan sistemler <strong>dışında</strong> bütün sistemlerde kullanılacaktır.</p>
</div>
</div>
<div class="sect5">
<h6 id="_ifos_koşulu"><code>%ifos</code> koşulu</h6>
<div class="paragraph">
<p><code>%ifos</code> koşulu da belirtilen işletim sistemi üzerinde uygulanacak işlemleri belirtir. Bir veya birden çok işletim sistemi belirtilebilir.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>%ifos linux
...
%endif</pre>
</div>
</div>
<div class="paragraph">
<p><code>%ifos</code> ve <code>%endif</code> arasında kalan kısım, eğer inşa bir Linux sistem üzerinde gerçekleştirilirse çalıştırılacak işlemleri içerir.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rhel_7_ile_beraber_gelen_yeni_rpm_özellikleri">RHEL 7 ile Beraber Gelen Yeni RPM Özellikleri</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dokümanın bu kısmında Red Hat Enterprise Linux 6 ve 7. sürüm arasında dikkat edilmesi gereken farklar anlatılmaktadır.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Anahtarlık ve imza denetimi için <code>rpmkeys</code> komutu eklendi.</p>
</li>
<li>
<p>SPEC dosyalarının sorgulanması ve taranması için <code>rpmspec</code> komutu eklendi.</p>
</li>
<li>
<p>Paketlerin imzalanması için <code>rpmsign</code> komutu eklendi.</p>
</li>
<li>
<p><code>%{lua:&#8230;&#8203;}</code> içerisinde gömülmüş betiklerde çağrılan <code>posix.exec()</code> ve <code>os.exit()</code> eklentileri, <code>posix.fork()</code> betikçisinin altsüreci olarak çağırılmadıkları sürece hata vereceklerdir.</p>
</li>
<li>
<p><code>%pretrans</code> betikçi hatası, paket kurulumunun atlanmasına neden olur.</p>
</li>
<li>
<p>Betikçiler, çalışma zamanında makro ve sorgu biçimi (queryformat) şeklinde genişletilebilir.</p>
</li>
<li>
<p>İşlem öncesi ve işlem sonraki betikçilerinin bağımlılıkları artık <code>Requires(pretrans)</code> ve <code>Requires(posttrans)</code> betikçileriyle ifade edilebilir.</p>
</li>
<li>
<p>Fazladan sıralama ipucularını ifade etmek için <code>OrderWithRequires</code> etiketi eklendi. Bu etiket, <code>Requires</code> etiketinin sözdizimini taklit eder ancak gerçek bağımlılıklar oluşturmaz. Sıralama ipuçlarında belirtilenler eğer işlem esnasında varsa <code>Requires</code>'da belirtilmiş gibi ele alınırlar.</p>
</li>
<li>
<p><code>%license</code> bayrağı <code>%files</code> kısmında kullanılabilirler. Tıpkı lisans dosyalarını işaretlerken tıpkı <code>%doc</code> gibi kullanılırlar, ancak <code>-nodocs</code> seçeneğinden etkilenmezler.</p>
</li>
<li>
<p>Otomatik yama eklemek için kullanılan <code>%autosetup</code> makrosu, dilenirse bir versiyon kontrol sistemiyle beraber kullanılabilirler.</p>
</li>
<li>
<p>Otomatik bağımlılık oluşturucusu gömülü bir filtrelemeyle beraber genişletilebilir ve özelleştirilebilir bir şekilde yeniden yazıldı.</p>
</li>
<li>
<p>OpenPGP V3 genel anahtarları artık desteklenmeyecektir.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_referanslar">Referanslar</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Aşağıda RPM paketlemek, inşa etmek ve RPM paketleri hakkında konuları ele alan bazı referansları görebilirsiniz. Bazıları, bu rehberde bahsedilenlerden çok daha ileri düzeyde konuları içerir.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-02-27 17:08:45 UTC
</div>
</div>
</body>
</html>